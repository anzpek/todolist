@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Default Theme (Blue/Midnight) - RGB values for Tailwind opacity support */
  --color-primary-50: 239 246 255;
  --color-primary-100: 219 234 254;
  --color-primary-200: 191 219 254;
  --color-primary-300: 147 197 253;
  --color-primary-400: 96 165 250;
  --color-primary-500: 59 130 246;
  --color-primary-600: 37 99 235;
  --color-primary-700: 29 78 216;
  --color-primary-800: 30 64 175;
  --color-primary-900: 30 58 138;
  --color-primary-950: 23 37 84;

  /* Glassmorphism Variables */
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-bg: rgba(255, 255, 255, 0.7);
  --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
  --glass-blur: 12px;

  /* Dark Mode Glass */
  --glass-border-dark: rgba(255, 255, 255, 0.1);
  --glass-bg-dark: rgba(17, 24, 39, 0.7);
  --glass-shadow-dark: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
}

/* Theme Overrides */
/* Theme Overrides - Standardized Color Names */
.theme-orange {
  /* Formerly Sunset */
  --color-primary-50: 255 247 237;
  --color-primary-100: 255 237 213;
  --color-primary-200: 254 215 170;
  --color-primary-300: 253 186 116;
  --color-primary-400: 251 146 60;
  --color-primary-500: 249 115 22;
  --color-primary-600: 234 88 12;
  --color-primary-700: 194 65 12;
  --color-primary-800: 154 52 18;
  --color-primary-900: 124 45 18;
  --color-primary-950: 67 20 7;
}

.theme-green {
  /* Formerly Forest */
  --color-primary-50: 240 253 244;
  --color-primary-100: 220 252 231;
  --color-primary-200: 187 247 208;
  --color-primary-300: 134 239 172;
  --color-primary-400: 74 222 128;
  --color-primary-500: 34 197 94;
  --color-primary-600: 22 163 74;
  --color-primary-700: 21 128 61;
  --color-primary-800: 22 101 52;
  --color-primary-900: 20 83 45;
  --color-primary-950: 5 46 22;
}

.theme-pink {
  /* Formerly Berry */
  --color-primary-50: 253 242 248;
  --color-primary-100: 252 231 243;
  --color-primary-200: 251 204 231;
  --color-primary-300: 249 168 212;
  --color-primary-400: 244 114 182;
  --color-primary-500: 236 72 153;
  --color-primary-600: 219 39 119;
  --color-primary-700: 190 24 93;
  --color-primary-800: 157 23 77;
  --color-primary-900: 131 24 67;
  --color-primary-950: 80 7 36;
}

.theme-sky {
  --color-primary-50: 240 249 255;
  --color-primary-100: 224 242 254;
  --color-primary-200: 186 230 253;
  --color-primary-300: 125 211 252;
  --color-primary-400: 56 189 248;
  --color-primary-500: 14 165 233;
  --color-primary-600: 2 132 199;
  --color-primary-700: 3 105 161;
  --color-primary-800: 7 89 133;
  --color-primary-900: 12 74 110;
  --color-primary-950: 8 47 73;
}

.theme-teal {
  --color-primary-50: 240 253 250;
  --color-primary-100: 204 251 241;
  --color-primary-200: 153 246 228;
  --color-primary-300: 94 234 212;
  --color-primary-400: 45 212 191;
  --color-primary-500: 20 184 166;
  --color-primary-600: 13 148 136;
  --color-primary-700: 15 118 110;
  --color-primary-800: 17 94 89;
  --color-primary-900: 19 78 74;
  --color-primary-950: 4 47 46;
}

.theme-purple {
  --color-primary-50: 250 245 255;
  --color-primary-100: 243 232 255;
  --color-primary-200: 233 213 255;
  --color-primary-300: 216 180 254;
  --color-primary-400: 192 132 252;
  --color-primary-500: 168 85 247;
  --color-primary-600: 147 51 234;
  --color-primary-700: 126 34 206;
  --color-primary-800: 107 33 168;
  --color-primary-900: 88 28 135;
  --color-primary-950: 59 7 100;
}

.theme-red {
  --color-primary-50: 254 242 242;
  --color-primary-100: 254 226 226;
  --color-primary-200: 254 202 202;
  --color-primary-300: 252 165 165;
  --color-primary-400: 248 113 113;
  --color-primary-500: 239 68 68;
  --color-primary-600: 220 38 38;
  --color-primary-700: 185 28 28;
  --color-primary-800: 153 27 27;
  --color-primary-900: 127 29 29;
  --color-primary-950: 69 10 10;
}

.theme-lime {
  --color-primary-50: 247 254 231;
  --color-primary-100: 236 252 203;
  --color-primary-200: 217 249 157;
  --color-primary-300: 190 242 100;
  --color-primary-400: 163 230 53;
  --color-primary-500: 132 204 22;
  --color-primary-600: 101 163 13;
  --color-primary-700: 77 124 15;
  --color-primary-800: 63 98 18;
  --color-primary-900: 54 83 20;
  --color-primary-950: 26 46 5;
}

.theme-indigo {
  --color-primary-50: 238 242 255;
  --color-primary-100: 224 231 255;
  --color-primary-200: 199 210 254;
  --color-primary-300: 165 180 252;
  --color-primary-400: 129 140 248;
  --color-primary-500: 99 102 241;
  --color-primary-600: 79 70 229;
  --color-primary-700: 67 56 202;
  --color-primary-800: 55 48 163;
  --color-primary-900: 49 46 129;
  --color-primary-950: 30 27 75;
}

.theme-gray {
  --color-primary-50: 249 250 251;
  --color-primary-100: 243 244 246;
  --color-primary-200: 229 231 235;
  --color-primary-300: 209 213 219;
  --color-primary-400: 156 163 175;
  --color-primary-500: 107 114 128;
  --color-primary-600: 75 85 99;
  --color-primary-700: 55 65 81;
  --color-primary-800: 31 41 55;
  --color-primary-900: 17 24 39;
  --color-primary-950: 3 7 18;
}

html {
  font-size: calc(16px * var(--font-scale, 1));
  transition: font-size 0.3s ease-out;
}

@layer base {
  body {
    @apply bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 antialiased;
    background-color: #f3f4f6;
    /* Use --bg-image if set, else fallback to gradient */
    background-image: var(--bg-image, radial-gradient(at 0% 0%, rgba(var(--color-primary-500), 0.15) 0px, transparent 50%),
        radial-gradient(at 100% 0%, rgba(var(--color-primary-600), 0.15) 0px, transparent 50%),
        radial-gradient(at 100% 100%, rgba(var(--color-primary-400), 0.15) 0px, transparent 50%),
        radial-gradient(at 0% 100%, rgba(var(--color-primary-500), 0.15) 0px, transparent 50%));
    /* I tweaked gradient to use primary colors variables so it adapts to theme! */

    background-attachment: fixed;
    background-size: cover;
    /* Changed for images */
    background-position: center;
    transition: background-image 0.5s ease-in-out;
  }

  .dark body {
    background-color: #111827;
    background-image: var(--bg-image, radial-gradient(at 0% 0%, rgba(var(--color-primary-500), 0.1) 0px, transparent 50%),
        radial-gradient(at 100% 0%, rgba(var(--color-primary-600), 0.1) 0px, transparent 50%),
        radial-gradient(at 100% 100%, rgba(var(--color-primary-400), 0.1) 0px, transparent 50%),
        radial-gradient(at 0% 100%, rgba(var(--color-primary-500), 0.1) 0px, transparent 50%));
  }
}

@keyframes gradient-shift {
  0% {
    background-position: 0% 0%;
  }

  100% {
    background-position: 100% 100%;
  }
}

@layer components {

  /* Glass Utilities */
  .glass-card {
    @apply bg-white/70 dark:bg-gray-800/70 backdrop-blur-md border border-white/20 dark:border-white/10 shadow-lg rounded-2xl transition-all duration-300;
  }

  /* More transparent glass when visual theme is active - Outline Style */
  .has-visual-theme .glass-card {
    /* Use CSS variable for opacity logic. 
       Note: We need RGB values to use with rgba, or just use `opactiy` on bg? 
       Tailwind's bg-white/xx uses --tw-bg-opacity.
       Let's use rgba manually for best control.
    */
    background-color: rgba(255, 255, 255, var(--glass-opacity, 0.1));
    backdrop-blur: none;
    @apply border-white/40 dark:border-white/30 shadow-lg;
  }

  .has-visual-theme.dark .glass-card {
    background-color: rgba(0, 0, 0, var(--glass-opacity, 0.2));
    /* Dark mode slightly cleaner */
  }

  .glass-panel {
    @apply bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border border-white/20 dark:border-white/10 rounded-xl;
  }

  /* Also update panel for visual theme */
  .has-visual-theme .glass-panel {
    background-color: rgba(255, 255, 255, calc(var(--glass-opacity, 0.1) * 0.5));
    backdrop-blur: none;
    @apply border-white/40 dark:border-white/30;
  }

  .has-visual-theme.dark .glass-panel {
    background-color: rgba(0, 0, 0, calc(var(--glass-opacity, 0.2) * 0.5));
  }

  .glass-button {
    @apply px-4 py-2 rounded-xl font-medium transition-all duration-200 bg-white/80 dark:bg-gray-700/80 hover:bg-white dark:hover:bg-gray-600 border border-white/20 dark:border-white/10 shadow-sm hover:shadow-md active:scale-95;
  }

  .glass-input {
    @apply bg-white/50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 backdrop-blur-sm rounded-xl px-4 py-2 focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 outline-none transition-all duration-200;
  }

  /* Text Gradients */
  .text-gradient-blue {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400;
  }

  .text-gradient-primary {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-primary-600 to-primary-400 dark:from-primary-400 dark:to-primary-300;
  }

  .text-gradient-purple {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-pink-600 dark:from-purple-400 dark:to-pink-400;
  }

  /* Custom Scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-gray-300/50 dark:bg-gray-600/50 rounded-full hover:bg-gray-400/50 dark:hover:bg-gray-500/50 transition-colors;
  }

  /* Safe Area Utilities */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .pt-safe {
    padding-top: env(safe-area-inset-top);
  }

  .min-h-safe {
    min-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  }
}

/* Animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }

  100% {
    background-position: 1000px 0;
  }
}

.animate-fade-in-up {
  animation: fadeInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-scale-in {
  animation: scaleIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

/* Legacy Support & Overrides */
.card {
  @apply glass-card;
}

.btn-primary {
  @apply bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg shadow-blue-500/30 border-none;
}

.btn-secondary {
  @apply glass-button;
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {

  *,
  ::before,
  ::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}