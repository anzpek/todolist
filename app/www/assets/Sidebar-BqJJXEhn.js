import{a as S,j as e,b as A,u as C,c as E,i as I}from"./index-CKyfRD9H.js";import{r as D,a1 as O,a2 as R,O as U,Q as F,x as z,V,e as k,a3 as B,u as J,a4 as L,a5 as H,w as P,X as Q,p as W,g as X,a6 as Y,a7 as q}from"./icons-CpcCsFSF.js";import"./react-DJG_os-6.js";import"./firebase-BUAVoIHS.js";import"./date-CFbvH-ln.js";const G=()=>{const{theme:x,setTheme:b}=S(),u=[{value:"light",label:"Light"},{value:"dark",label:"Dark"},{value:"system",label:"System"}];return e.jsx("div",{className:"grid grid-cols-3 gap-1",children:u.map(({value:a,label:s})=>e.jsx("button",{onClick:()=>b(a),className:`px-2 py-2 text-xs rounded-lg transition-colors ${x===a?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:`${s} 모드`,children:s},a))})},K=()=>{const{todos:x,addTodo:b,syncWithFirestore:u,syncing:a,loading:s,forceRefresh:m}=A(),{currentUser:h}=C(),[i,t]=D.useState(null),[j,v]=D.useState(!1),N=()=>{try{const n={version:"1.0",exportDate:new Date().toISOString(),todos:x},p=JSON.stringify(n,null,2),y="data:application/json;charset=utf-8,"+encodeURIComponent(p),g=`todos-backup-${new Date().toISOString().split("T")[0]}.json`,l=document.createElement("a");l.setAttribute("href",y),l.setAttribute("download",g),l.click(),t({type:"success",text:"데이터가 성공적으로 내보내기 되었습니다!"}),setTimeout(()=>t(null),3e3)}catch{t({type:"error",text:"데이터 내보내기 중 오류가 발생했습니다."}),setTimeout(()=>t(null),3e3)}},f=n=>{const p=n.target.files?.[0];if(!p)return;const y=new FileReader;y.onload=g=>{try{const l=g.target?.result,o=JSON.parse(l);if(!o.todos||!Array.isArray(o.todos))throw new Error("잘못된 백업 파일 형식입니다.");window.confirm(`${o.todos.length}개의 할일을 가져오시겠습니까?
기존 데이터와 병합됩니다.`)&&(o.todos.forEach(d=>{const{id:T,...r}=d;b({...r,createdAt:new Date(d.createdAt),updatedAt:new Date(d.updatedAt),dueDate:d.dueDate?new Date(d.dueDate):void 0,subTasks:d.subTasks?.map(c=>({...c,createdAt:new Date(c.createdAt)}))})}),t({type:"success",text:`${o.todos.length}개의 할일을 성공적으로 가져왔습니다!`}))}catch{t({type:"error",text:"파일을 읽는 중 오류가 발생했습니다. 올바른 백업 파일인지 확인해주세요."})}n.target.value="",setTimeout(()=>t(null),3e3)},y.readAsText(p)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:`col-span-2 flex items-center justify-center gap-1 px-3 py-2 rounded-lg text-sm ${h?"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700"}`,children:h?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"온라인"})]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{children:"오프라인"})]})}),e.jsxs("button",{onClick:N,className:"flex items-center justify-center gap-2 px-3 py-2 text-sm bg-blue-50 text-blue-700 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-400 dark:hover:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-800",title:"데이터 내보내기",children:[e.jsx(U,{className:"w-4 h-4"}),"내보내기"]}),e.jsxs("label",{className:"flex items-center justify-center gap-2 px-3 py-2 text-sm bg-green-50 text-green-700 hover:bg-green-100 dark:bg-green-900/20 dark:text-green-400 dark:hover:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-800 cursor-pointer",children:[e.jsx(F,{className:"w-4 h-4"}),"가져오기",e.jsx("input",{type:"file",accept:".json",onChange:f,className:"hidden"})]})]}),i&&e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 text-sm rounded-lg ${i.type==="success"?"bg-green-50 text-green-700 border border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800":"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800"}`,children:[i.type==="success"?e.jsx(z,{className:"w-4 h-4"}):e.jsx(V,{className:"w-4 h-4"}),i.text]})]})},te=({currentView:x,onViewChange:b,isOpen:u,onToggle:a,isMobile:s=!1,forceMobile:m=null,onToggleForceMobile:h})=>{const{getOverdueTodos:i,getTomorrowTodos:t,getYesterdayIncompleteTodos:j,recurringTemplates:v,getRecurringTodos:N,getTodayTodos:f}=A(),{currentUser:n}=C(),{showVacationsInTodos:p,toggleVacationDisplay:y}=E(),g=i(),l=t(),o=j(),w=f(),d=v.filter(r=>r.isActive),T=[{id:"today",label:"오늘 할일",icon:k,count:w.filter(r=>!r.completed).length},{id:"week",label:"주간 캘린더",icon:B},{id:"month",label:"월간 캘린더",icon:k},{id:"recurring",label:"반복 관리",icon:J,count:d.length},{id:"history",label:"완료 기록",icon:L},{id:"analytics",label:"통계/분석",icon:H},{id:"vacation",label:"휴가 관리",icon:k},{id:"settings",label:"설정",icon:P}];return e.jsxs(e.Fragment,{children:[s&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300",onClick:a}),e.jsxs("aside",{className:`fixed top-0 left-0 z-50 h-full transition-all duration-300 ease-in-out 
          ${u?"translate-x-0":"-translate-x-full"} 
          ${s?"w-[280px]":"w-64"}
          glass-card border-r border-white/40 dark:border-gray-700/40 rounded-none
          flex flex-col shadow-2xl`,children:[e.jsxs("div",{className:"p-6 flex items-center justify-between relative overflow-hidden shrink-0",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-500/10 to-purple-500/10 dark:from-blue-500/5 dark:to-purple-500/5 pointer-events-none"}),e.jsx("h1",{className:"text-2xl font-bold text-gradient-blue relative z-10 tracking-tight",children:"Todo List"}),s&&e.jsx("button",{onClick:a,className:"p-2 rounded-xl hover:bg-white/50 dark:hover:bg-gray-700/50 text-gray-500 dark:text-gray-400 transition-colors relative z-10",children:e.jsx(Q,{className:"w-5 h-5"})})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto px-4 py-2 space-y-1 custom-scrollbar",children:[T.map(r=>{if(r.id==="analytics"&&!I(n?.email))return null;const c=x===r.id,$=r.icon;return e.jsxs("button",{onClick:()=>{b(r.id),s&&a()},className:`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 group
                  ${c?"bg-blue-500/10 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400 shadow-sm border border-blue-100/50 dark:border-blue-500/30 backdrop-blur-sm":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-800/50 hover:text-gray-900 dark:hover:text-gray-200 hover:shadow-sm border border-transparent"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg transition-colors ${c?"bg-blue-100 dark:bg-blue-900/40":"bg-gray-100/50 dark:bg-gray-800/50 group-hover:bg-white dark:group-hover:bg-gray-700"}`,children:e.jsx($,{className:`w-5 h-5 ${c?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-200"}`})}),e.jsx("span",{className:"font-medium",children:r.label})]}),r.count!==void 0&&r.count>0&&e.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full ${c?"bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400"}`,children:r.count})]},r.id)}),e.jsx("div",{className:"my-4 border-t border-gray-200/50 dark:border-gray-700/50"}),e.jsxs("div",{className:"space-y-3 px-1",children:[o.length>0&&e.jsxs("div",{className:"glass-panel p-4 rounded-xl border-l-4 border-l-orange-400 group hover:scale-[1.02] transition-transform duration-200 bg-orange-50/30 dark:bg-orange-900/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-orange-600 dark:text-orange-400",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-bold",children:"어제 미완료"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:[o.length,e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-1",children:"개"})]})]}),g.length>0&&e.jsxs("div",{className:"glass-panel p-4 rounded-xl border-l-4 border-l-red-500 group hover:scale-[1.02] transition-transform duration-200 bg-red-50/30 dark:bg-red-900/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-red-600 dark:text-red-400",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-bold",children:"지연된 할일"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:[g.length,e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-1",children:"개"})]})]}),e.jsxs("div",{className:"glass-panel p-4 rounded-xl border-l-4 border-l-blue-400 group hover:scale-[1.02] transition-transform duration-200 bg-blue-50/30 dark:bg-blue-900/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-blue-600 dark:text-blue-400",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-bold",children:"내일 예정"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:[l.length,e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-1",children:"개"})]})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200/50 dark:border-gray-700/50 bg-white/30 dark:bg-gray-900/30 backdrop-blur-sm shrink-0 space-y-4",children:[e.jsx(G,{}),e.jsx(K,{}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200/30 dark:border-gray-700/30",children:[e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 font-medium",children:"v1.2.0 • Premium"}),h&&e.jsx("button",{onClick:()=>h(!m),className:`p-1.5 rounded-lg transition-all ${m?"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"hover:bg-white/50 dark:hover:bg-gray-700/50 text-gray-500 dark:text-gray-400"}`,title:m?"데스크톱 뷰로 전환":"모바일 뷰 테스트",children:m?e.jsx(Y,{className:"w-4 h-4"}):e.jsx(q,{className:"w-4 h-4"})})]})]})]})]})};export{te as default};
