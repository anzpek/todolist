import{d as a,e as o,f as n,j as r}from"./index-CCUjBz3E.js";import{a8 as l}from"./icons-CpcCsFSF.js";import"./react-DJG_os-6.js";import"./firebase-BNIW61Ac.js";import"./date-CFbvH-ln.js";class p extends l.Component{handleError=a("ErrorBoundary");constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,e){const s=o.trackReactError(t,{componentStack:e.componentStack,errorBoundary:"ErrorBoundary"});n.error("Error caught by ErrorBoundary:",t,e),this.setState({hasError:!0,error:t,errorInfo:e,errorId:s}),this.props.onError?.(t,e),this.handleError(t,e)}handleRetry=()=>{const t=this.state.retryCount+1;t<=3&&this.setState({hasError:!1,error:null,errorInfo:null,errorId:void 0,retryCount:t})};handleReload=()=>{window.location.reload()};render(){if(this.state.hasError){if(this.props.fallbackComponent&&this.state.error){const t=this.props.fallbackComponent;return r.jsx(t,{error:this.state.error,retry:this.handleRetry})}return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:r.jsx("div",{className:"max-w-2xl mx-auto text-center",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[r.jsx("div",{className:"text-red-600 dark:text-red-400 text-6xl mb-4",children:"⚠️"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"앱에서 오류가 발생했습니다"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"예상치 못한 오류가 발생했습니다. 아래 옵션을 시도해보세요."}),this.state.errorId&&r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["오류 ID: ",this.state.errorId]}),r.jsxs("div",{className:"space-y-4",children:[this.state.retryCount<3&&r.jsxs("button",{onClick:this.handleRetry,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:["다시 시도 (",this.state.retryCount,"/3)"]}),r.jsx("button",{onClick:this.handleReload,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"페이지 새로고침"}),r.jsxs("details",{className:"text-left",children:[r.jsx("summary",{className:"cursor-pointer text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"개발자 정보 보기"}),r.jsxs("div",{className:"mt-2 p-3 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono text-red-600 dark:text-red-400 overflow-auto max-h-64",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"오류:"})," ",this.state.error?.message]}),r.jsxs("p",{children:[r.jsx("strong",{children:"재시도 횟수:"})," ",this.state.retryCount,"/3"]}),this.state.errorId&&r.jsxs("p",{children:[r.jsx("strong",{children:"추적 ID:"})," ",this.state.errorId]}),r.jsx("p",{children:r.jsx("strong",{children:"스택 추적:"})}),r.jsx("pre",{className:"whitespace-pre-wrap",children:this.state.error?.stack}),this.state.errorInfo&&r.jsxs("div",{children:[r.jsx("p",{children:r.jsx("strong",{children:"컴포넌트 스택:"})}),r.jsx("pre",{className:"whitespace-pre-wrap",children:this.state.errorInfo.componentStack})]})]})]})]})]})})})}return this.props.children}}export{p as default};
