(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function LE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Lg={exports:{}},ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tb;function UE(){if(tb)return ec;tb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,i,l){var h=null;if(l!==void 0&&(h=""+l),i.key!==void 0&&(h=""+i.key),"key"in i){l={};for(var g in i)g!=="key"&&(l[g]=i[g])}else l=i;return i=l.ref,{$$typeof:r,type:a,key:h,ref:i!==void 0?i:null,props:l}}return ec.Fragment=e,ec.jsx=t,ec.jsxs=t,ec}var nb;function zE(){return nb||(nb=1,Lg.exports=UE()),Lg.exports}var c=zE(),Ug={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function HE(){if(rb)return Ce;rb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.iterator;function T(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,$={};function P(D,re,R){this.props=D,this.context=re,this.refs=$,this.updater=R||O}P.prototype.isReactComponent={},P.prototype.setState=function(D,re){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,re,"setState")},P.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function S(){}S.prototype=P.prototype;function L(D,re,R){this.props=D,this.context=re,this.refs=$,this.updater=R||O}var I=L.prototype=new S;I.constructor=L,F(I,P.prototype),I.isPureReactComponent=!0;var V=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function A(D,re,R,q,K,se){return R=se.ref,{$$typeof:r,type:D,key:re,ref:R!==void 0?R:null,props:se}}function k(D,re){return A(D.type,re,void 0,void 0,void 0,D.props)}function C(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function z(D){var re={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(R){return re[R]})}var M=/\/+/g;function B(D,re){return typeof D=="object"&&D!==null&&D.key!=null?z(""+D.key):re.toString(36)}function j(){}function _e(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(j,j):(D.status="pending",D.then(function(re){D.status==="pending"&&(D.status="fulfilled",D.value=re)},function(re){D.status==="pending"&&(D.status="rejected",D.reason=re)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Ee(D,re,R,q,K){var se=typeof D;(se==="undefined"||se==="boolean")&&(D=null);var ae=!1;if(D===null)ae=!0;else switch(se){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(D.$$typeof){case r:case e:ae=!0;break;case b:return ae=D._init,Ee(ae(D._payload),re,R,q,K)}}if(ae)return K=K(D),ae=q===""?"."+B(D,0):q,V(K)?(R="",ae!=null&&(R=ae.replace(M,"$&/")+"/"),Ee(K,re,R,"",function(Ke){return Ke})):K!=null&&(C(K)&&(K=k(K,R+(K.key==null||D&&D.key===K.key?"":(""+K.key).replace(M,"$&/")+"/")+ae)),re.push(K)),1;ae=0;var ce=q===""?".":q+":";if(V(D))for(var xe=0;xe<D.length;xe++)q=D[xe],se=ce+B(q,xe),ae+=Ee(q,re,R,se,K);else if(xe=T(D),typeof xe=="function")for(D=xe.call(D),xe=0;!(q=D.next()).done;)q=q.value,se=ce+B(q,xe++),ae+=Ee(q,re,R,se,K);else if(se==="object"){if(typeof D.then=="function")return Ee(_e(D),re,R,q,K);throw re=String(D),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ae}function W(D,re,R){if(D==null)return D;var q=[],K=0;return Ee(D,q,"","",function(se){return re.call(R,se,K++)}),q}function J(D){if(D._status===-1){var re=D._result;re=re(),re.then(function(R){(D._status===0||D._status===-1)&&(D._status=1,D._result=R)},function(R){(D._status===0||D._status===-1)&&(D._status=2,D._result=R)}),D._status===-1&&(D._status=0,D._result=re)}if(D._status===1)return D._result.default;throw D._result}var H=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function ue(){}return Ce.Children={map:W,forEach:function(D,re,R){W(D,function(){re.apply(this,arguments)},R)},count:function(D){var re=0;return W(D,function(){re++}),re},toArray:function(D){return W(D,function(re){return re})||[]},only:function(D){if(!C(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ce.Component=P,Ce.Fragment=t,Ce.Profiler=i,Ce.PureComponent=L,Ce.StrictMode=a,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(D){return Y.H.useMemoCache(D)}},Ce.cache=function(D){return function(){return D.apply(null,arguments)}},Ce.cloneElement=function(D,re,R){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var q=F({},D.props),K=D.key,se=void 0;if(re!=null)for(ae in re.ref!==void 0&&(se=void 0),re.key!==void 0&&(K=""+re.key),re)!te.call(re,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&re.ref===void 0||(q[ae]=re[ae]);var ae=arguments.length-2;if(ae===1)q.children=R;else if(1<ae){for(var ce=Array(ae),xe=0;xe<ae;xe++)ce[xe]=arguments[xe+2];q.children=ce}return A(D.type,K,void 0,void 0,se,q)},Ce.createContext=function(D){return D={$$typeof:h,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},Ce.createElement=function(D,re,R){var q,K={},se=null;if(re!=null)for(q in re.key!==void 0&&(se=""+re.key),re)te.call(re,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(K[q]=re[q]);var ae=arguments.length-2;if(ae===1)K.children=R;else if(1<ae){for(var ce=Array(ae),xe=0;xe<ae;xe++)ce[xe]=arguments[xe+2];K.children=ce}if(D&&D.defaultProps)for(q in ae=D.defaultProps,ae)K[q]===void 0&&(K[q]=ae[q]);return A(D,se,void 0,void 0,null,K)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(D){return{$$typeof:g,render:D}},Ce.isValidElement=C,Ce.lazy=function(D){return{$$typeof:b,_payload:{_status:-1,_result:D},_init:J}},Ce.memo=function(D,re){return{$$typeof:y,type:D,compare:re===void 0?null:re}},Ce.startTransition=function(D){var re=Y.T,R={};Y.T=R;try{var q=D(),K=Y.S;K!==null&&K(R,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(ue,H)}catch(se){H(se)}finally{Y.T=re}},Ce.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},Ce.use=function(D){return Y.H.use(D)},Ce.useActionState=function(D,re,R){return Y.H.useActionState(D,re,R)},Ce.useCallback=function(D,re){return Y.H.useCallback(D,re)},Ce.useContext=function(D){return Y.H.useContext(D)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(D,re){return Y.H.useDeferredValue(D,re)},Ce.useEffect=function(D,re,R){var q=Y.H;if(typeof R=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return q.useEffect(D,re)},Ce.useId=function(){return Y.H.useId()},Ce.useImperativeHandle=function(D,re,R){return Y.H.useImperativeHandle(D,re,R)},Ce.useInsertionEffect=function(D,re){return Y.H.useInsertionEffect(D,re)},Ce.useLayoutEffect=function(D,re){return Y.H.useLayoutEffect(D,re)},Ce.useMemo=function(D,re){return Y.H.useMemo(D,re)},Ce.useOptimistic=function(D,re){return Y.H.useOptimistic(D,re)},Ce.useReducer=function(D,re,R){return Y.H.useReducer(D,re,R)},Ce.useRef=function(D){return Y.H.useRef(D)},Ce.useState=function(D){return Y.H.useState(D)},Ce.useSyncExternalStore=function(D,re,R){return Y.H.useSyncExternalStore(D,re,R)},Ce.useTransition=function(){return Y.H.useTransition()},Ce.version="19.1.0",Ce}var sb;function zm(){return sb||(sb=1,Ug.exports=HE()),Ug.exports}var le=zm();const BE=LE(le);var zg={exports:{}},tc={},Hg={exports:{}},Bg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ab;function qE(){return ab||(ab=1,function(r){function e(W,J){var H=W.length;W.push(J);e:for(;0<H;){var ue=H-1>>>1,D=W[ue];if(0<i(D,J))W[ue]=J,W[H]=D,H=ue;else break e}}function t(W){return W.length===0?null:W[0]}function a(W){if(W.length===0)return null;var J=W[0],H=W.pop();if(H!==J){W[0]=H;e:for(var ue=0,D=W.length,re=D>>>1;ue<re;){var R=2*(ue+1)-1,q=W[R],K=R+1,se=W[K];if(0>i(q,H))K<D&&0>i(se,q)?(W[ue]=se,W[K]=H,ue=K):(W[ue]=q,W[R]=H,ue=R);else if(K<D&&0>i(se,H))W[ue]=se,W[K]=H,ue=K;else break e}}return J}function i(W,J){var H=W.sortIndex-J.sortIndex;return H!==0?H:W.id-J.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,g=h.now();r.unstable_now=function(){return h.now()-g}}var p=[],y=[],b=1,w=null,T=3,O=!1,F=!1,$=!1,P=!1,S=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function V(W){for(var J=t(y);J!==null;){if(J.callback===null)a(y);else if(J.startTime<=W)a(y),J.sortIndex=J.expirationTime,e(p,J);else break;J=t(y)}}function Y(W){if($=!1,V(W),!F)if(t(p)!==null)F=!0,te||(te=!0,B());else{var J=t(y);J!==null&&Ee(Y,J.startTime-W)}}var te=!1,A=-1,k=5,C=-1;function z(){return P?!0:!(r.unstable_now()-C<k)}function M(){if(P=!1,te){var W=r.unstable_now();C=W;var J=!0;try{e:{F=!1,$&&($=!1,L(A),A=-1),O=!0;var H=T;try{t:{for(V(W),w=t(p);w!==null&&!(w.expirationTime>W&&z());){var ue=w.callback;if(typeof ue=="function"){w.callback=null,T=w.priorityLevel;var D=ue(w.expirationTime<=W);if(W=r.unstable_now(),typeof D=="function"){w.callback=D,V(W),J=!0;break t}w===t(p)&&a(p),V(W)}else a(p);w=t(p)}if(w!==null)J=!0;else{var re=t(y);re!==null&&Ee(Y,re.startTime-W),J=!1}}break e}finally{w=null,T=H,O=!1}J=void 0}}finally{J?B():te=!1}}}var B;if(typeof I=="function")B=function(){I(M)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,_e=j.port2;j.port1.onmessage=M,B=function(){_e.postMessage(null)}}else B=function(){S(M,0)};function Ee(W,J){A=S(function(){W(r.unstable_now())},J)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(W){switch(T){case 1:case 2:case 3:var J=3;break;default:J=T}var H=T;T=J;try{return W()}finally{T=H}},r.unstable_requestPaint=function(){P=!0},r.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var H=T;T=W;try{return J()}finally{T=H}},r.unstable_scheduleCallback=function(W,J,H){var ue=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ue+H:ue):H=ue,W){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=H+D,W={id:b++,callback:J,priorityLevel:W,startTime:H,expirationTime:D,sortIndex:-1},H>ue?(W.sortIndex=H,e(y,W),t(p)===null&&W===t(y)&&($?(L(A),A=-1):$=!0,Ee(Y,H-ue))):(W.sortIndex=D,e(p,W),F||O||(F=!0,te||(te=!0,B()))),W},r.unstable_shouldYield=z,r.unstable_wrapCallback=function(W){var J=T;return function(){var H=T;T=J;try{return W.apply(this,arguments)}finally{T=H}}}}(Bg)),Bg}var ib;function FE(){return ib||(ib=1,Hg.exports=qE()),Hg.exports}var qg={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob;function $E(){if(ob)return sn;ob=1;var r=zm();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(p,y,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:w==null?null:""+w,children:p,containerInfo:y,implementation:b}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,sn.createPortal=function(p,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(p,y,null,b)},sn.flushSync=function(p){var y=h.T,b=a.p;try{if(h.T=null,a.p=2,p)return p()}finally{h.T=y,a.p=b,a.d.f()}},sn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(p,y))},sn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},sn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var b=y.as,w=g(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,O=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?a.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:O}):b==="script"&&a.d.X(p,{crossOrigin:w,integrity:T,fetchPriority:O,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},sn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=g(y.as,y.crossOrigin);a.d.M(p,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(p)},sn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,w=g(b,y.crossOrigin);a.d.L(p,b,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},sn.preloadModule=function(p,y){if(typeof p=="string")if(y){var b=g(y.as,y.crossOrigin);a.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(p)},sn.requestFormReset=function(p){a.d.r(p)},sn.unstable_batchedUpdates=function(p,y){return p(y)},sn.useFormState=function(p,y,b){return h.H.useFormState(p,y,b)},sn.useFormStatus=function(){return h.H.useHostTransitionStatus()},sn.version="19.1.0",sn}var lb;function GE(){if(lb)return qg.exports;lb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),qg.exports=$E(),qg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function YE(){if(cb)return tc;cb=1;var r=FE(),e=zm(),t=GE();function a(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function h(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(a(188))}function p(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(a(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),n;if(m===u)return g(f),s;m=m.sibling}throw Error(a(188))}if(o.return!==u.return)o=f,u=m;else{for(var _=!1,E=f.child;E;){if(E===o){_=!0,o=f,u=m;break}if(E===u){_=!0,u=f,o=m;break}E=E.sibling}if(!_){for(E=m.child;E;){if(E===o){_=!0,o=m,u=f;break}if(E===u){_=!0,u=m,o=f;break}E=E.sibling}if(!_)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?n:s}function y(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=y(n),s!==null)return s;n=n.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),I=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function B(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var j=Symbol.for("react.client.reference");function _e(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===j?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case P:return"Profiler";case $:return"StrictMode";case Y:return"Suspense";case te:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case I:return(n.displayName||"Context")+".Provider";case L:return(n._context.displayName||"Context")+".Consumer";case V:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A:return s=n.displayName||null,s!==null?s:_e(n.type)||"Memo";case k:s=n._payload,n=n._init;try{return _e(n(s))}catch{}}return null}var Ee=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},ue=[],D=-1;function re(n){return{current:n}}function R(n){0>D||(n.current=ue[D],ue[D]=null,D--)}function q(n,s){D++,ue[D]=n.current,n.current=s}var K=re(null),se=re(null),ae=re(null),ce=re(null);function xe(n,s){switch(q(ae,s),q(se,n),q(K,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Dx(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Dx(s),n=Rx(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}R(K),q(K,n)}function Ke(){R(K),R(se),R(ae)}function Me(n){n.memoizedState!==null&&q(ce,n);var s=K.current,o=Rx(s,n.type);s!==o&&(q(se,n),q(K,o))}function at(n){se.current===n&&(R(K),R(se)),ce.current===n&&(R(ce),Ql._currentValue=H)}var Zn=Object.prototype.hasOwnProperty,ka=r.unstable_scheduleCallback,Sa=r.unstable_cancelCallback,Go=r.unstable_shouldYield,Kc=r.unstable_requestPaint,Mn=r.unstable_now,Vh=r.unstable_getCurrentPriorityLevel,Yo=r.unstable_ImmediatePriority,Ei=r.unstable_UserBlockingPriority,Na=r.unstable_NormalPriority,Lh=r.unstable_LowPriority,ki=r.unstable_IdlePriority,Wo=r.log,Xc=r.unstable_setDisableYieldValue,mt=null,Xe=null;function En(n){if(typeof Wo=="function"&&Xc(n),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(mt,n)}catch{}}var nn=Math.clz32?Math.clz32:Aa,Jc=Math.log,Uh=Math.LN2;function Aa(n){return n>>>=0,n===0?32:31-(Jc(n)/Uh|0)|0}var Da=256,Ra=4194304;function er(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Si(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var E=u&134217727;return E!==0?(u=E&~m,u!==0?f=er(u):(_&=E,_!==0?f=er(_):o||(o=E&~n,o!==0&&(f=er(o))))):(E=u&~m,E!==0?f=er(E):_!==0?f=er(_):o||(o=u&~n,o!==0&&(f=er(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function ja(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Qo(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ko(){var n=Da;return Da<<=1,(Da&4194048)===0&&(Da=256),n}function Xo(){var n=Ra;return Ra<<=1,(Ra&62914560)===0&&(Ra=4194304),n}function qr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Fr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Jo(n,s,o,u,f,m){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,U=n.expirationTimes,ee=n.hiddenUpdates;for(o=_&~o;0<o;){var de=31-nn(o),ge=1<<de;E[de]=0,U[de]=-1;var ne=ee[de];if(ne!==null)for(ee[de]=null,de=0;de<ne.length;de++){var ie=ne[de];ie!==null&&(ie.lane&=-536870913)}o&=~ge}u!==0&&dr(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~s))}function dr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-nn(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function Zo(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-nn(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function Ns(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ni(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function As(){var n=J.p;return n!==0?n:(n=window.event,n===void 0?32:Qx(n.type))}function Zc(n,s){var o=J.p;try{return J.p=n,s()}finally{J.p=o}}var ut=Math.random().toString(36).slice(2),Ct="__reactFiber$"+ut,kt="__reactProps$"+ut,Pn="__reactContainer$"+ut,el="__reactEvents$"+ut,zh="__reactListeners$"+ut,Ds="__reactHandles$"+ut,eu="__reactResources$"+ut,Ia="__reactMarker$"+ut;function Rs(n){delete n[Ct],delete n[kt],delete n[el],delete n[zh],delete n[Ds]}function $r(n){var s=n[Ct];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Pn]||o[Ct]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=Ox(n);n!==null;){if(o=n[Ct])return o;n=Ox(n)}return s}n=o,o=n.parentNode}return null}function hr(n){if(n=n[Ct]||n[Pn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function fr(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(a(33))}function hn(n){var s=n[eu];return s||(s=n[eu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xt(n){n[Ia]=!0}var tl=new Set,Ai={};function tr(n,s){Gr(n,s),Gr(n+"Capture",s)}function Gr(n,s){for(Ai[n]=s,n=0;n<s.length;n++)tl.add(s[n])}var tu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nu={},Ca={};function ru(n){return Zn.call(Ca,n)?!0:Zn.call(nu,n)?!1:tu.test(n)?Ca[n]=!0:(nu[n]=!0,!1)}function js(n,s,o){if(ru(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function gr(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Yt(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}var Oa,su;function Yr(n){if(Oa===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Oa=s&&s[1]||"",su=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oa+n+su}var Di=!1;function Ri(n,s){if(!n||Di)return"";Di=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(ie){var ne=ie}Reflect.construct(n,[],ge)}else{try{ge.call()}catch(ie){ne=ie}n.call(ge.prototype)}}else{try{throw Error()}catch(ie){ne=ie}(ge=n())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(ie){if(ie&&ne&&typeof ie.stack=="string")return[ie.stack,ne.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],E=m[1];if(_&&E){var U=_.split(`
`),ee=E.split(`
`);for(f=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(u===U.length||f===ee.length)for(u=U.length-1,f=ee.length-1;1<=u&&0<=f&&U[u]!==ee[f];)f--;for(;1<=u&&0<=f;u--,f--)if(U[u]!==ee[f]){if(u!==1||f!==1)do if(u--,f--,0>f||U[u]!==ee[f]){var de=`
`+U[u].replace(" at new "," at ");return n.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",n.displayName)),de}while(1<=u&&0<=f);break}}}finally{Di=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Yr(o):""}function nl(n){switch(n.tag){case 26:case 27:case 5:return Yr(n.type);case 16:return Yr("Lazy");case 13:return Yr("Suspense");case 19:return Yr("SuspenseList");case 0:case 15:return Ri(n.type,!1);case 11:return Ri(n.type.render,!1);case 1:return Ri(n.type,!0);case 31:return Yr("Activity");default:return""}}function ji(n){try{var s="";do s+=nl(n),n=n.return;while(n);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function fn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function rl(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Hh(n){var s=rl(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),u=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){u=""+_,m.call(this,_)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ii(n){n._valueTracker||(n._valueTracker=Hh(n))}function sl(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=rl(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Ma(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Bh=/[\n"\\]/g;function St(n){return n.replace(Bh,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function kn(n,s,o,u,f,m,_,E){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+fn(s)):n.value!==""+fn(s)&&(n.value=""+fn(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?Is(n,_,fn(s)):o!=null?Is(n,_,fn(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+fn(E):n.removeAttribute("name")}function Pa(n,s,o,u,f,m,_,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+fn(o):"",s=s!=null?""+fn(s):o,E||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=E?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_)}function Is(n,s,o){s==="number"&&Ma(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Wr(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+fn(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function tt(n,s,o){if(s!=null&&(s=""+fn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+fn(o):""}function Va(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(a(92));if(Ee(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=fn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Vn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var La=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function au(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||La.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function al(n,s,o){if(s!=null&&typeof s!="object")throw Error(a(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&au(n,f,u)}else for(var m in s)s.hasOwnProperty(m)&&au(n,m,s[m])}function il(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ci(n){return Fh.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Qr=null;function Ln(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Kr=null,Xr=null;function ol(n){var s=hr(n);if(s&&(n=s.stateNode)){var o=n[kt]||null;e:switch(n=s.stateNode,s.type){case"input":if(kn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+St(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[kt]||null;if(!f)throw Error(a(90));kn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&sl(u)}break e;case"textarea":tt(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Wr(n,!!o.multiple,s,!1)}}}var mr=!1;function iu(n,s,o){if(mr)return n(s,o);mr=!0;try{var u=n(s);return u}finally{if(mr=!1,(Kr!==null||Xr!==null)&&(Zu(),Kr&&(s=Kr,n=Xr,Xr=Kr=null,ol(s),n)))for(s=0;s<n.length;s++)ol(n[s])}}function Ua(n,s){var o=n.stateNode;if(o===null)return null;var u=o[kt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(a(231,s,typeof o));return o}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Un=!1;if(nr)try{var za={};Object.defineProperty(za,"passive",{get:function(){Un=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{Un=!1}var pr=null,Cs=null,Jr=null;function ll(){if(Jr)return Jr;var n,s=Cs,o=s.length,u,f="value"in pr?pr.value:pr.textContent,m=f.length;for(n=0;n<o&&s[n]===f[n];n++);var _=o-n;for(u=1;u<=_&&s[o-u]===f[m-u];u++);return Jr=f.slice(n,1<u?1-u:void 0)}function yr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function xr(){return!0}function cl(){return!1}function Ht(n){function s(o,u,f,m,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?xr:cl,this.isPropagationStopped=cl,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=xr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=xr)},persist:function(){},isPersistent:xr}),s}var We={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=Ht(We),Ha=b({},We,{view:0,detail:0}),ou=Ht(Ha),Mi,Pi,br,Ba=b({},Ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==br&&(br&&n.type==="mousemove"?(Mi=n.screenX-br.screenX,Pi=n.screenY-br.screenY):Pi=Mi=0,br=n),Mi)},movementY:function(n){return"movementY"in n?n.movementY:Pi}}),zn=Ht(Ba),lu=b({},Ba,{dataTransfer:0}),$h=Ht(lu),qa=b({},Ha,{relatedTarget:0}),Vi=Ht(qa),ul=b({},We,{animationName:0,elapsedTime:0,pseudoElement:0}),Li=Ht(ul),cu=b({},We,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ui=Ht(cu),Gh=b({},We,{data:0}),dl=Ht(Gh),Fa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=du[n])?!!s[n]:!1}function $a(){return hl}var hu=b({},Ha,{key:function(n){if(n.key){var s=Fa[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=yr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?uu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(n){return n.type==="keypress"?yr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),zi=Ht(hu),fu=b({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fl=Ht(fu),Zr=b({},Ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),gu=Ht(Zr),mu=b({},We,{propertyName:0,elapsedTime:0,pseudoElement:0}),pu=Ht(mu),yu=b({},Ba,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Hi=Ht(yu),gn=b({},We,{newState:0,oldState:0}),xu=Ht(gn),bu=[9,13,27,32],vr=nr&&"CompositionEvent"in window,d=null;nr&&"documentMode"in document&&(d=document.documentMode);var x=nr&&"TextEvent"in window&&!d,v=nr&&(!vr||d&&8<d&&11>=d),N=" ",X=!1;function oe(n,s){switch(n){case"keyup":return bu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Be=!1;function Ot(n,s){switch(n){case"compositionend":return pe(s);case"keypress":return s.which!==32?null:(X=!0,N);case"textInput":return n=s.data,n===N&&X?null:n;default:return null}}function qe(n,s){if(Be)return n==="compositionend"||!vr&&oe(n,s)?(n=ll(),Jr=Cs=pr=null,Be=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var Bt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mt(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Bt[n.type]:s==="textarea"}function es(n,s,o,u){Kr?Xr?Xr.push(u):Xr=[u]:Kr=u,s=ad(s,"onChange"),0<s.length&&(o=new Oi("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Wt=null,_r=null;function gl(n){Ex(n,0)}function vu(n){var s=fr(n);if(sl(s))return n}function $p(n,s){if(n==="change")return s}var Gp=!1;if(nr){var Yh;if(nr){var Wh="oninput"in document;if(!Wh){var Yp=document.createElement("div");Yp.setAttribute("oninput","return;"),Wh=typeof Yp.oninput=="function"}Yh=Wh}else Yh=!1;Gp=Yh&&(!document.documentMode||9<document.documentMode)}function Wp(){Wt&&(Wt.detachEvent("onpropertychange",Qp),_r=Wt=null)}function Qp(n){if(n.propertyName==="value"&&vu(_r)){var s=[];es(s,_r,n,Ln(n)),iu(gl,s)}}function g1(n,s,o){n==="focusin"?(Wp(),Wt=s,_r=o,Wt.attachEvent("onpropertychange",Qp)):n==="focusout"&&Wp()}function m1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return vu(_r)}function p1(n,s){if(n==="click")return vu(s)}function y1(n,s){if(n==="input"||n==="change")return vu(s)}function x1(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Sn=typeof Object.is=="function"?Object.is:x1;function ml(n,s){if(Sn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Zn.call(s,f)||!Sn(n[f],s[f]))return!1}return!0}function Kp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Xp(n,s){var o=Kp(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Kp(o)}}function Jp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Jp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Zp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Ma(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Ma(n.document)}return s}function Qh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var b1=nr&&"documentMode"in document&&11>=document.documentMode,Bi=null,Kh=null,pl=null,Xh=!1;function e0(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Xh||Bi==null||Bi!==Ma(u)||(u=Bi,"selectionStart"in u&&Qh(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),pl&&ml(pl,u)||(pl=u,u=ad(Kh,"onSelect"),0<u.length&&(s=new Oi("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=Bi)))}function Ga(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var qi={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},Jh={},t0={};nr&&(t0=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function Ya(n){if(Jh[n])return Jh[n];if(!qi[n])return n;var s=qi[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in t0)return Jh[n]=s[o];return n}var n0=Ya("animationend"),r0=Ya("animationiteration"),s0=Ya("animationstart"),v1=Ya("transitionrun"),_1=Ya("transitionstart"),w1=Ya("transitioncancel"),a0=Ya("transitionend"),i0=new Map,Zh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zh.push("scrollEnd");function rr(n,s){i0.set(n,s),tr(s,[n])}var o0=new WeakMap;function Hn(n,s){if(typeof n=="object"&&n!==null){var o=o0.get(n);return o!==void 0?o:(s={value:n,source:s,stack:ji(s)},o0.set(n,s),s)}return{value:n,source:s,stack:ji(s)}}var Bn=[],Fi=0,ef=0;function _u(){for(var n=Fi,s=ef=Fi=0;s<n;){var o=Bn[s];Bn[s++]=null;var u=Bn[s];Bn[s++]=null;var f=Bn[s];Bn[s++]=null;var m=Bn[s];if(Bn[s++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}m!==0&&l0(o,f,m)}}function wu(n,s,o,u){Bn[Fi++]=n,Bn[Fi++]=s,Bn[Fi++]=o,Bn[Fi++]=u,ef|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function tf(n,s,o,u){return wu(n,s,o,u),Tu(n)}function $i(n,s){return wu(n,null,null,s),Tu(n)}function l0(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&s!==null&&(f=31-nn(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function Tu(n){if(50<Hl)throw Hl=0,lg=null,Error(a(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Gi={};function T1(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(n,s,o,u){return new T1(n,s,o,u)}function nf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ts(n,s){var o=n.alternate;return o===null?(o=Nn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function c0(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Eu(n,s,o,u,f,m){var _=0;if(u=n,typeof n=="function")nf(n)&&(_=1);else if(typeof n=="string")_=kE(n,o,K.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=Nn(31,o,s,f),n.elementType=C,n.lanes=m,n;case F:return Wa(o.children,f,m,s);case $:_=8,f|=24;break;case P:return n=Nn(12,o,s,f|2),n.elementType=P,n.lanes=m,n;case Y:return n=Nn(13,o,s,f),n.elementType=Y,n.lanes=m,n;case te:return n=Nn(19,o,s,f),n.elementType=te,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case S:case I:_=10;break e;case L:_=9;break e;case V:_=11;break e;case A:_=14;break e;case k:_=16,u=null;break e}_=29,o=Error(a(130,n===null?"null":typeof n,"")),u=null}return s=Nn(_,o,s,f),s.elementType=n,s.type=u,s.lanes=m,s}function Wa(n,s,o,u){return n=Nn(7,n,u,s),n.lanes=o,n}function rf(n,s,o){return n=Nn(6,n,null,s),n.lanes=o,n}function sf(n,s,o){return s=Nn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Yi=[],Wi=0,ku=null,Su=0,qn=[],Fn=0,Qa=null,ns=1,rs="";function Ka(n,s){Yi[Wi++]=Su,Yi[Wi++]=ku,ku=n,Su=s}function u0(n,s,o){qn[Fn++]=ns,qn[Fn++]=rs,qn[Fn++]=Qa,Qa=n;var u=ns;n=rs;var f=32-nn(u)-1;u&=~(1<<f),o+=1;var m=32-nn(s)+f;if(30<m){var _=f-f%5;m=(u&(1<<_)-1).toString(32),u>>=_,f-=_,ns=1<<32-nn(s)+f|o<<f|u,rs=m+n}else ns=1<<m|o<<f|u,rs=n}function af(n){n.return!==null&&(Ka(n,1),u0(n,1,0))}function of(n){for(;n===ku;)ku=Yi[--Wi],Yi[Wi]=null,Su=Yi[--Wi],Yi[Wi]=null;for(;n===Qa;)Qa=qn[--Fn],qn[Fn]=null,rs=qn[--Fn],qn[Fn]=null,ns=qn[--Fn],qn[Fn]=null}var mn=null,pt=null,Ye=!1,Xa=null,wr=!1,lf=Error(a(519));function Ja(n){var s=Error(a(418,""));throw bl(Hn(s,n)),lf}function d0(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Ct]=n,s[kt]=u,o){case"dialog":Le("cancel",s),Le("close",s);break;case"iframe":case"object":case"embed":Le("load",s);break;case"video":case"audio":for(o=0;o<ql.length;o++)Le(ql[o],s);break;case"source":Le("error",s);break;case"img":case"image":case"link":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"input":Le("invalid",s),Pa(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ii(s);break;case"select":Le("invalid",s);break;case"textarea":Le("invalid",s),Va(s,u.value,u.defaultValue,u.children),Ii(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Ax(s.textContent,o)?(u.popover!=null&&(Le("beforetoggle",s),Le("toggle",s)),u.onScroll!=null&&Le("scroll",s),u.onScrollEnd!=null&&Le("scrollend",s),u.onClick!=null&&(s.onclick=id),s=!0):s=!1,s||Ja(n)}function h0(n){for(mn=n.return;mn;)switch(mn.tag){case 5:case 13:wr=!1;return;case 27:case 3:wr=!0;return;default:mn=mn.return}}function yl(n){if(n!==mn)return!1;if(!Ye)return h0(n),Ye=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Eg(n.type,n.memoizedProps)),o=!o),o&&pt&&Ja(n),h0(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(s===0){pt=ar(n.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;n=n.nextSibling}pt=null}}else s===27?(s=pt,Qs(n.type)?(n=Ag,Ag=null,pt=n):pt=s):pt=mn?ar(n.stateNode.nextSibling):null;return!0}function xl(){pt=mn=null,Ye=!1}function f0(){var n=Xa;return n!==null&&(bn===null?bn=n:bn.push.apply(bn,n),Xa=null),n}function bl(n){Xa===null?Xa=[n]:Xa.push(n)}var cf=re(null),Za=null,ss=null;function Os(n,s,o){q(cf,s._currentValue),s._currentValue=o}function as(n){n._currentValue=cf.current,R(cf)}function uf(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function df(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var U=0;U<s.length;U++)if(E.context===s[U]){m.lanes|=o,E=m.alternate,E!==null&&(E.lanes|=o),uf(m.return,o,n),u||(_=null);break e}m=E.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(a(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),uf(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function vl(n,s,o,u){n=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var E=f.type;Sn(f.pendingProps.value,_.value)||(n!==null?n.push(E):n=[E])}}else if(f===ce.current){if(_=f.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Ql):n=[Ql])}f=f.return}n!==null&&df(s,n,o,u),s.flags|=262144}function Nu(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ei(n){Za=n,ss=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function rn(n){return g0(Za,n)}function Au(n,s){return Za===null&&ei(n),g0(n,s)}function g0(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ss===null){if(n===null)throw Error(a(308));ss=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ss=ss.next=s;return o}var E1=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},k1=r.unstable_scheduleCallback,S1=r.unstable_NormalPriority,Pt={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hf(){return{controller:new E1,data:new Map,refCount:0}}function _l(n){n.refCount--,n.refCount===0&&k1(S1,function(){n.controller.abort()})}var wl=null,ff=0,Qi=0,Ki=null;function N1(n,s){if(wl===null){var o=wl=[];ff=0,Qi=mg(),Ki={status:"pending",value:void 0,then:function(u){o.push(u)}}}return ff++,s.then(m0,m0),s}function m0(){if(--ff===0&&wl!==null){Ki!==null&&(Ki.status="fulfilled");var n=wl;wl=null,Qi=0,Ki=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function A1(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var p0=W.S;W.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&N1(n,s),p0!==null&&p0(n,s)};var ti=re(null);function gf(){var n=ti.current;return n!==null?n:ot.pooledCache}function Du(n,s){s===null?q(ti,ti.current):q(ti,s.pool)}function y0(){var n=gf();return n===null?null:{parent:Pt._currentValue,pool:n}}var Tl=Error(a(460)),x0=Error(a(474)),Ru=Error(a(542)),mf={then:function(){}};function b0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ju(){}function v0(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(ju,ju),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,w0(n),n;default:if(typeof s.status=="string")s.then(ju,ju);else{if(n=ot,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,w0(n),n}throw El=s,Tl}}var El=null;function _0(){if(El===null)throw Error(a(459));var n=El;return El=null,n}function w0(n){if(n===Tl||n===Ru)throw Error(a(483))}var Ms=!1;function pf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yf(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ps(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Vs(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Je&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Tu(n),l0(n,null,o),s}return wu(n,u,s,o),Tu(n)}function kl(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Zo(n,o)}}function xf(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var bf=!1;function Sl(){if(bf){var n=Ki;if(n!==null)throw n}}function Nl(n,s,o,u){bf=!1;var f=n.updateQueue;Ms=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var U=E,ee=U.next;U.next=null,_===null?m=ee:_.next=ee,_=U;var de=n.alternate;de!==null&&(de=de.updateQueue,E=de.lastBaseUpdate,E!==_&&(E===null?de.firstBaseUpdate=ee:E.next=ee,de.lastBaseUpdate=U))}if(m!==null){var ge=f.baseState;_=0,de=ee=U=null,E=m;do{var ne=E.lane&-536870913,ie=ne!==E.lane;if(ie?(Fe&ne)===ne:(u&ne)===ne){ne!==0&&ne===Qi&&(bf=!0),de!==null&&(de=de.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Re=n,Se=E;ne=s;var st=o;switch(Se.tag){case 1:if(Re=Se.payload,typeof Re=="function"){ge=Re.call(st,ge,ne);break e}ge=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Se.payload,ne=typeof Re=="function"?Re.call(st,ge,ne):Re,ne==null)break e;ge=b({},ge,ne);break e;case 2:Ms=!0}}ne=E.callback,ne!==null&&(n.flags|=64,ie&&(n.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[ne]:ie.push(ne))}else ie={lane:ne,tag:E.tag,payload:E.payload,callback:E.callback,next:null},de===null?(ee=de=ie,U=ge):de=de.next=ie,_|=ne;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;ie=E,E=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);de===null&&(U=ge),f.baseState=U,f.firstBaseUpdate=ee,f.lastBaseUpdate=de,m===null&&(f.shared.lanes=0),$s|=_,n.lanes=_,n.memoizedState=ge}}function T0(n,s){if(typeof n!="function")throw Error(a(191,n));n.call(s)}function E0(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)T0(o[n],s)}var Xi=re(null),Iu=re(0);function k0(n,s){n=hs,q(Iu,n),q(Xi,s),hs=n|s.baseLanes}function vf(){q(Iu,hs),q(Xi,Xi.current)}function _f(){hs=Iu.current,R(Xi),R(Iu)}var Ls=0,Oe=null,nt=null,Nt=null,Cu=!1,Ji=!1,ni=!1,Ou=0,Al=0,Zi=null,D1=0;function bt(){throw Error(a(321))}function wf(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!Sn(n[o],s[o]))return!1;return!0}function Tf(n,s,o,u,f,m){return Ls=m,Oe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,W.H=n===null||n.memoizedState===null?ly:cy,ni=!1,m=o(u,f),ni=!1,Ji&&(m=N0(s,o,u,f)),S0(n),m}function S0(n){W.H=zu;var s=nt!==null&&nt.next!==null;if(Ls=0,Nt=nt=Oe=null,Cu=!1,Al=0,Zi=null,s)throw Error(a(300));n===null||qt||(n=n.dependencies,n!==null&&Nu(n)&&(qt=!0))}function N0(n,s,o,u){Oe=n;var f=0;do{if(Ji&&(Zi=null),Al=0,Ji=!1,25<=f)throw Error(a(301));if(f+=1,Nt=nt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}W.H=P1,m=s(o,u)}while(Ji);return m}function R1(){var n=W.H,s=n.useState()[0];return s=typeof s.then=="function"?Dl(s):s,n=n.useState()[0],(nt!==null?nt.memoizedState:null)!==n&&(Oe.flags|=1024),s}function Ef(){var n=Ou!==0;return Ou=0,n}function kf(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Sf(n){if(Cu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Cu=!1}Ls=0,Nt=nt=Oe=null,Ji=!1,Al=Ou=0,Zi=null}function yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Oe.memoizedState=Nt=n:Nt=Nt.next=n,Nt}function At(){if(nt===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=nt.next;var s=Nt===null?Oe.memoizedState:Nt.next;if(s!==null)Nt=s,nt=n;else{if(n===null)throw Oe.alternate===null?Error(a(467)):Error(a(310));nt=n,n={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Nt===null?Oe.memoizedState=Nt=n:Nt=Nt.next=n}return Nt}function Nf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(n){var s=Al;return Al+=1,Zi===null&&(Zi=[]),n=v0(Zi,n,s),s=Oe,(Nt===null?s.memoizedState:Nt.next)===null&&(s=s.alternate,W.H=s===null||s.memoizedState===null?ly:cy),n}function Mu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Dl(n);if(n.$$typeof===I)return rn(n)}throw Error(a(438,String(n)))}function Af(n){var s=null,o=Oe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Oe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Nf(),Oe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=z;return s.index++,o}function is(n,s){return typeof s=="function"?s(n):s}function Pu(n){var s=At();return Df(s,nt,n)}function Df(n,s,o){var u=n.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}s.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{s=f.next;var E=_=null,U=null,ee=s,de=!1;do{var ge=ee.lane&-536870913;if(ge!==ee.lane?(Fe&ge)===ge:(Ls&ge)===ge){var ne=ee.revertLane;if(ne===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),ge===Qi&&(de=!0);else if((Ls&ne)===ne){ee=ee.next,ne===Qi&&(de=!0);continue}else ge={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},U===null?(E=U=ge,_=m):U=U.next=ge,Oe.lanes|=ne,$s|=ne;ge=ee.action,ni&&o(m,ge),m=ee.hasEagerState?ee.eagerState:o(m,ge)}else ne={lane:ge,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},U===null?(E=U=ne,_=m):U=U.next=ne,Oe.lanes|=ge,$s|=ge;ee=ee.next}while(ee!==null&&ee!==s);if(U===null?_=m:U.next=E,!Sn(m,n.memoizedState)&&(qt=!0,de&&(o=Ki,o!==null)))throw o;n.memoizedState=m,n.baseState=_,n.baseQueue=U,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Rf(n){var s=At(),o=s.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=n(m,_.action),_=_.next;while(_!==f);Sn(m,s.memoizedState)||(qt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function A0(n,s,o){var u=Oe,f=At(),m=Ye;if(m){if(o===void 0)throw Error(a(407));o=o()}else o=s();var _=!Sn((nt||f).memoizedState,o);_&&(f.memoizedState=o,qt=!0),f=f.queue;var E=j0.bind(null,u,f,n);if(Rl(2048,8,E,[n]),f.getSnapshot!==s||_||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,eo(9,Vu(),R0.bind(null,u,f,o,s),null),ot===null)throw Error(a(349));m||(Ls&124)!==0||D0(u,s,o)}return o}function D0(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Oe.updateQueue,s===null?(s=Nf(),Oe.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function R0(n,s,o,u){s.value=o,s.getSnapshot=u,I0(s)&&C0(n)}function j0(n,s,o){return o(function(){I0(s)&&C0(n)})}function I0(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!Sn(n,o)}catch{return!0}}function C0(n){var s=$i(n,2);s!==null&&In(s,n,2)}function jf(n){var s=yn();if(typeof n=="function"){var o=n;if(n=o(),ni){En(!0);try{o()}finally{En(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:n},s}function O0(n,s,o,u){return n.baseState=o,Df(n,nt,typeof u=="function"?u:is)}function j1(n,s,o,u,f){if(Uu(n))throw Error(a(485));if(n=s.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};W.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,M0(s,m)):(m.next=o.next,s.pending=o.next=m)}}function M0(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var m=W.T,_={};W.T=_;try{var E=o(f,u),U=W.S;U!==null&&U(_,E),P0(n,s,E)}catch(ee){If(n,s,ee)}finally{W.T=m}}else try{m=o(f,u),P0(n,s,m)}catch(ee){If(n,s,ee)}}function P0(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){V0(n,s,u)},function(u){return If(n,s,u)}):V0(n,s,o)}function V0(n,s,o){s.status="fulfilled",s.value=o,L0(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,M0(n,o)))}function If(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,L0(s),s=s.next;while(s!==u)}n.action=null}function L0(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function U0(n,s){return s}function z0(n,s){if(Ye){var o=ot.formState;if(o!==null){e:{var u=Oe;if(Ye){if(pt){t:{for(var f=pt,m=wr;f.nodeType!==8;){if(!m){f=null;break t}if(f=ar(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){pt=ar(f.nextSibling),u=f.data==="F!";break e}}Ja(u)}u=!1}u&&(s=o[0])}}return o=yn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:U0,lastRenderedState:s},o.queue=u,o=ay.bind(null,Oe,u),u.dispatch=o,u=jf(!1),m=Vf.bind(null,Oe,!1,u.queue),u=yn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=j1.bind(null,Oe,f,m,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function H0(n){var s=At();return B0(s,nt,n)}function B0(n,s,o){if(s=Df(n,s,U0)[0],n=Pu(is)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Dl(s)}catch(_){throw _===Tl?Ru:_}else u=s;s=At();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(Oe.flags|=2048,eo(9,Vu(),I1.bind(null,f,o),null)),[u,m,n]}function I1(n,s){n.action=s}function q0(n){var s=At(),o=nt;if(o!==null)return B0(s,o,n);At(),s=s.memoizedState,o=At();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function eo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Oe.updateQueue,s===null&&(s=Nf(),Oe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function Vu(){return{destroy:void 0,resource:void 0}}function F0(){return At().memoizedState}function Lu(n,s,o,u){var f=yn();u=u===void 0?null:u,Oe.flags|=n,f.memoizedState=eo(1|s,Vu(),o,u)}function Rl(n,s,o,u){var f=At();u=u===void 0?null:u;var m=f.memoizedState.inst;nt!==null&&u!==null&&wf(u,nt.memoizedState.deps)?f.memoizedState=eo(s,m,o,u):(Oe.flags|=n,f.memoizedState=eo(1|s,m,o,u))}function $0(n,s){Lu(8390656,8,n,s)}function G0(n,s){Rl(2048,8,n,s)}function Y0(n,s){return Rl(4,2,n,s)}function W0(n,s){return Rl(4,4,n,s)}function Q0(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function K0(n,s,o){o=o!=null?o.concat([n]):null,Rl(4,4,Q0.bind(null,s,n),o)}function Cf(){}function X0(n,s){var o=At();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&wf(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function J0(n,s){var o=At();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&wf(s,u[1]))return u[0];if(u=n(),ni){En(!0);try{n()}finally{En(!1)}}return o.memoizedState=[u,s],u}function Of(n,s,o){return o===void 0||(Ls&1073741824)!==0?n.memoizedState=s:(n.memoizedState=o,n=tx(),Oe.lanes|=n,$s|=n,o)}function Z0(n,s,o,u){return Sn(o,s)?o:Xi.current!==null?(n=Of(n,o,u),Sn(n,s)||(qt=!0),n):(Ls&42)===0?(qt=!0,n.memoizedState=o):(n=tx(),Oe.lanes|=n,$s|=n,s)}function ey(n,s,o,u,f){var m=J.p;J.p=m!==0&&8>m?m:8;var _=W.T,E={};W.T=E,Vf(n,!1,s,o);try{var U=f(),ee=W.S;if(ee!==null&&ee(E,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var de=A1(U,u);jl(n,s,de,jn(n))}else jl(n,s,u,jn(n))}catch(ge){jl(n,s,{then:function(){},status:"rejected",reason:ge},jn())}finally{J.p=m,W.T=_}}function C1(){}function Mf(n,s,o,u){if(n.tag!==5)throw Error(a(476));var f=ty(n).queue;ey(n,f,s,H,o===null?C1:function(){return ny(n),o(u)})}function ty(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:H},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function ny(n){var s=ty(n).next.queue;jl(n,s,{},jn())}function Pf(){return rn(Ql)}function ry(){return At().memoizedState}function sy(){return At().memoizedState}function O1(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=jn();n=Ps(o);var u=Vs(s,n,o);u!==null&&(In(u,s,o),kl(u,s,o)),s={cache:hf()},n.payload=s;return}s=s.return}}function M1(n,s,o){var u=jn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Uu(n)?iy(s,o):(o=tf(n,s,o,u),o!==null&&(In(o,n,u),oy(o,s,u)))}function ay(n,s,o){var u=jn();jl(n,s,o,u)}function jl(n,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Uu(n))iy(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,E=m(_,o);if(f.hasEagerState=!0,f.eagerState=E,Sn(E,_))return wu(n,s,f,0),ot===null&&_u(),!1}catch{}finally{}if(o=tf(n,s,f,u),o!==null)return In(o,n,u),oy(o,s,u),!0}return!1}function Vf(n,s,o,u){if(u={lane:2,revertLane:mg(),action:u,hasEagerState:!1,eagerState:null,next:null},Uu(n)){if(s)throw Error(a(479))}else s=tf(n,o,u,2),s!==null&&In(s,n,2)}function Uu(n){var s=n.alternate;return n===Oe||s!==null&&s===Oe}function iy(n,s){Ji=Cu=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function oy(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Zo(n,o)}}var zu={readContext:rn,use:Mu,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt},ly={readContext:rn,use:Mu,useCallback:function(n,s){return yn().memoizedState=[n,s===void 0?null:s],n},useContext:rn,useEffect:$0,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Lu(4194308,4,Q0.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Lu(4194308,4,n,s)},useInsertionEffect:function(n,s){Lu(4,2,n,s)},useMemo:function(n,s){var o=yn();s=s===void 0?null:s;var u=n();if(ni){En(!0);try{n()}finally{En(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=yn();if(o!==void 0){var f=o(s);if(ni){En(!0);try{o(s)}finally{En(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=M1.bind(null,Oe,n),[u.memoizedState,n]},useRef:function(n){var s=yn();return n={current:n},s.memoizedState=n},useState:function(n){n=jf(n);var s=n.queue,o=ay.bind(null,Oe,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Cf,useDeferredValue:function(n,s){var o=yn();return Of(o,n,s)},useTransition:function(){var n=jf(!1);return n=ey.bind(null,Oe,n.queue,!0,!1),yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Oe,f=yn();if(Ye){if(o===void 0)throw Error(a(407));o=o()}else{if(o=s(),ot===null)throw Error(a(349));(Fe&124)!==0||D0(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,$0(j0.bind(null,u,m,n),[n]),u.flags|=2048,eo(9,Vu(),R0.bind(null,u,m,o,s),null),o},useId:function(){var n=yn(),s=ot.identifierPrefix;if(Ye){var o=rs,u=ns;o=(u&~(1<<32-nn(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Ou++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=D1++,s="«"+s+"r"+o.toString(32)+"»";return n.memoizedState=s},useHostTransitionStatus:Pf,useFormState:z0,useActionState:z0,useOptimistic:function(n){var s=yn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Vf.bind(null,Oe,!0,o),o.dispatch=s,[n,s]},useMemoCache:Af,useCacheRefresh:function(){return yn().memoizedState=O1.bind(null,Oe)}},cy={readContext:rn,use:Mu,useCallback:X0,useContext:rn,useEffect:G0,useImperativeHandle:K0,useInsertionEffect:Y0,useLayoutEffect:W0,useMemo:J0,useReducer:Pu,useRef:F0,useState:function(){return Pu(is)},useDebugValue:Cf,useDeferredValue:function(n,s){var o=At();return Z0(o,nt.memoizedState,n,s)},useTransition:function(){var n=Pu(is)[0],s=At().memoizedState;return[typeof n=="boolean"?n:Dl(n),s]},useSyncExternalStore:A0,useId:ry,useHostTransitionStatus:Pf,useFormState:H0,useActionState:H0,useOptimistic:function(n,s){var o=At();return O0(o,nt,n,s)},useMemoCache:Af,useCacheRefresh:sy},P1={readContext:rn,use:Mu,useCallback:X0,useContext:rn,useEffect:G0,useImperativeHandle:K0,useInsertionEffect:Y0,useLayoutEffect:W0,useMemo:J0,useReducer:Rf,useRef:F0,useState:function(){return Rf(is)},useDebugValue:Cf,useDeferredValue:function(n,s){var o=At();return nt===null?Of(o,n,s):Z0(o,nt.memoizedState,n,s)},useTransition:function(){var n=Rf(is)[0],s=At().memoizedState;return[typeof n=="boolean"?n:Dl(n),s]},useSyncExternalStore:A0,useId:ry,useHostTransitionStatus:Pf,useFormState:q0,useActionState:q0,useOptimistic:function(n,s){var o=At();return nt!==null?O0(o,nt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Af,useCacheRefresh:sy},to=null,Il=0;function Hu(n){var s=Il;return Il+=1,to===null&&(to=[]),v0(to,n,s)}function Cl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Bu(n,s){throw s.$$typeof===w?Error(a(525)):(n=Object.prototype.toString.call(s),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function uy(n){var s=n._init;return s(n._payload)}function dy(n){function s(Q,G){if(n){var Z=Q.deletions;Z===null?(Q.deletions=[G],Q.flags|=16):Z.push(G)}}function o(Q,G){if(!n)return null;for(;G!==null;)s(Q,G),G=G.sibling;return null}function u(Q){for(var G=new Map;Q!==null;)Q.key!==null?G.set(Q.key,Q):G.set(Q.index,Q),Q=Q.sibling;return G}function f(Q,G){return Q=ts(Q,G),Q.index=0,Q.sibling=null,Q}function m(Q,G,Z){return Q.index=Z,n?(Z=Q.alternate,Z!==null?(Z=Z.index,Z<G?(Q.flags|=67108866,G):Z):(Q.flags|=67108866,G)):(Q.flags|=1048576,G)}function _(Q){return n&&Q.alternate===null&&(Q.flags|=67108866),Q}function E(Q,G,Z,fe){return G===null||G.tag!==6?(G=rf(Z,Q.mode,fe),G.return=Q,G):(G=f(G,Z),G.return=Q,G)}function U(Q,G,Z,fe){var ve=Z.type;return ve===F?de(Q,G,Z.props.children,fe,Z.key):G!==null&&(G.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===k&&uy(ve)===G.type)?(G=f(G,Z.props),Cl(G,Z),G.return=Q,G):(G=Eu(Z.type,Z.key,Z.props,null,Q.mode,fe),Cl(G,Z),G.return=Q,G)}function ee(Q,G,Z,fe){return G===null||G.tag!==4||G.stateNode.containerInfo!==Z.containerInfo||G.stateNode.implementation!==Z.implementation?(G=sf(Z,Q.mode,fe),G.return=Q,G):(G=f(G,Z.children||[]),G.return=Q,G)}function de(Q,G,Z,fe,ve){return G===null||G.tag!==7?(G=Wa(Z,Q.mode,fe,ve),G.return=Q,G):(G=f(G,Z),G.return=Q,G)}function ge(Q,G,Z){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=rf(""+G,Q.mode,Z),G.return=Q,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case T:return Z=Eu(G.type,G.key,G.props,null,Q.mode,Z),Cl(Z,G),Z.return=Q,Z;case O:return G=sf(G,Q.mode,Z),G.return=Q,G;case k:var fe=G._init;return G=fe(G._payload),ge(Q,G,Z)}if(Ee(G)||B(G))return G=Wa(G,Q.mode,Z,null),G.return=Q,G;if(typeof G.then=="function")return ge(Q,Hu(G),Z);if(G.$$typeof===I)return ge(Q,Au(Q,G),Z);Bu(Q,G)}return null}function ne(Q,G,Z,fe){var ve=G!==null?G.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return ve!==null?null:E(Q,G,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:return Z.key===ve?U(Q,G,Z,fe):null;case O:return Z.key===ve?ee(Q,G,Z,fe):null;case k:return ve=Z._init,Z=ve(Z._payload),ne(Q,G,Z,fe)}if(Ee(Z)||B(Z))return ve!==null?null:de(Q,G,Z,fe,null);if(typeof Z.then=="function")return ne(Q,G,Hu(Z),fe);if(Z.$$typeof===I)return ne(Q,G,Au(Q,Z),fe);Bu(Q,Z)}return null}function ie(Q,G,Z,fe,ve){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Q=Q.get(Z)||null,E(G,Q,""+fe,ve);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case T:return Q=Q.get(fe.key===null?Z:fe.key)||null,U(G,Q,fe,ve);case O:return Q=Q.get(fe.key===null?Z:fe.key)||null,ee(G,Q,fe,ve);case k:var Pe=fe._init;return fe=Pe(fe._payload),ie(Q,G,Z,fe,ve)}if(Ee(fe)||B(fe))return Q=Q.get(Z)||null,de(G,Q,fe,ve,null);if(typeof fe.then=="function")return ie(Q,G,Z,Hu(fe),ve);if(fe.$$typeof===I)return ie(Q,G,Z,Au(G,fe),ve);Bu(G,fe)}return null}function Re(Q,G,Z,fe){for(var ve=null,Pe=null,we=G,Ne=G=0,$t=null;we!==null&&Ne<Z.length;Ne++){we.index>Ne?($t=we,we=null):$t=we.sibling;var Ge=ne(Q,we,Z[Ne],fe);if(Ge===null){we===null&&(we=$t);break}n&&we&&Ge.alternate===null&&s(Q,we),G=m(Ge,G,Ne),Pe===null?ve=Ge:Pe.sibling=Ge,Pe=Ge,we=$t}if(Ne===Z.length)return o(Q,we),Ye&&Ka(Q,Ne),ve;if(we===null){for(;Ne<Z.length;Ne++)we=ge(Q,Z[Ne],fe),we!==null&&(G=m(we,G,Ne),Pe===null?ve=we:Pe.sibling=we,Pe=we);return Ye&&Ka(Q,Ne),ve}for(we=u(we);Ne<Z.length;Ne++)$t=ie(we,Q,Ne,Z[Ne],fe),$t!==null&&(n&&$t.alternate!==null&&we.delete($t.key===null?Ne:$t.key),G=m($t,G,Ne),Pe===null?ve=$t:Pe.sibling=$t,Pe=$t);return n&&we.forEach(function(ea){return s(Q,ea)}),Ye&&Ka(Q,Ne),ve}function Se(Q,G,Z,fe){if(Z==null)throw Error(a(151));for(var ve=null,Pe=null,we=G,Ne=G=0,$t=null,Ge=Z.next();we!==null&&!Ge.done;Ne++,Ge=Z.next()){we.index>Ne?($t=we,we=null):$t=we.sibling;var ea=ne(Q,we,Ge.value,fe);if(ea===null){we===null&&(we=$t);break}n&&we&&ea.alternate===null&&s(Q,we),G=m(ea,G,Ne),Pe===null?ve=ea:Pe.sibling=ea,Pe=ea,we=$t}if(Ge.done)return o(Q,we),Ye&&Ka(Q,Ne),ve;if(we===null){for(;!Ge.done;Ne++,Ge=Z.next())Ge=ge(Q,Ge.value,fe),Ge!==null&&(G=m(Ge,G,Ne),Pe===null?ve=Ge:Pe.sibling=Ge,Pe=Ge);return Ye&&Ka(Q,Ne),ve}for(we=u(we);!Ge.done;Ne++,Ge=Z.next())Ge=ie(we,Q,Ne,Ge.value,fe),Ge!==null&&(n&&Ge.alternate!==null&&we.delete(Ge.key===null?Ne:Ge.key),G=m(Ge,G,Ne),Pe===null?ve=Ge:Pe.sibling=Ge,Pe=Ge);return n&&we.forEach(function(VE){return s(Q,VE)}),Ye&&Ka(Q,Ne),ve}function st(Q,G,Z,fe){if(typeof Z=="object"&&Z!==null&&Z.type===F&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:e:{for(var ve=Z.key;G!==null;){if(G.key===ve){if(ve=Z.type,ve===F){if(G.tag===7){o(Q,G.sibling),fe=f(G,Z.props.children),fe.return=Q,Q=fe;break e}}else if(G.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===k&&uy(ve)===G.type){o(Q,G.sibling),fe=f(G,Z.props),Cl(fe,Z),fe.return=Q,Q=fe;break e}o(Q,G);break}else s(Q,G);G=G.sibling}Z.type===F?(fe=Wa(Z.props.children,Q.mode,fe,Z.key),fe.return=Q,Q=fe):(fe=Eu(Z.type,Z.key,Z.props,null,Q.mode,fe),Cl(fe,Z),fe.return=Q,Q=fe)}return _(Q);case O:e:{for(ve=Z.key;G!==null;){if(G.key===ve)if(G.tag===4&&G.stateNode.containerInfo===Z.containerInfo&&G.stateNode.implementation===Z.implementation){o(Q,G.sibling),fe=f(G,Z.children||[]),fe.return=Q,Q=fe;break e}else{o(Q,G);break}else s(Q,G);G=G.sibling}fe=sf(Z,Q.mode,fe),fe.return=Q,Q=fe}return _(Q);case k:return ve=Z._init,Z=ve(Z._payload),st(Q,G,Z,fe)}if(Ee(Z))return Re(Q,G,Z,fe);if(B(Z)){if(ve=B(Z),typeof ve!="function")throw Error(a(150));return Z=ve.call(Z),Se(Q,G,Z,fe)}if(typeof Z.then=="function")return st(Q,G,Hu(Z),fe);if(Z.$$typeof===I)return st(Q,G,Au(Q,Z),fe);Bu(Q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,G!==null&&G.tag===6?(o(Q,G.sibling),fe=f(G,Z),fe.return=Q,Q=fe):(o(Q,G),fe=rf(Z,Q.mode,fe),fe.return=Q,Q=fe),_(Q)):o(Q,G)}return function(Q,G,Z,fe){try{Il=0;var ve=st(Q,G,Z,fe);return to=null,ve}catch(we){if(we===Tl||we===Ru)throw we;var Pe=Nn(29,we,null,Q.mode);return Pe.lanes=fe,Pe.return=Q,Pe}finally{}}}var no=dy(!0),hy=dy(!1),$n=re(null),Tr=null;function Us(n){var s=n.alternate;q(Vt,Vt.current&1),q($n,n),Tr===null&&(s===null||Xi.current!==null||s.memoizedState!==null)&&(Tr=n)}function fy(n){if(n.tag===22){if(q(Vt,Vt.current),q($n,n),Tr===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Tr=n)}}else zs()}function zs(){q(Vt,Vt.current),q($n,$n.current)}function os(n){R($n),Tr===n&&(Tr=null),R(Vt)}var Vt=re(0);function qu(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Ng(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Lf(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:b({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Uf={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=jn(),f=Ps(u);f.payload=s,o!=null&&(f.callback=o),s=Vs(n,f,u),s!==null&&(In(s,n,u),kl(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=jn(),f=Ps(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Vs(n,f,u),s!==null&&(In(s,n,u),kl(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=jn(),u=Ps(o);u.tag=2,s!=null&&(u.callback=s),s=Vs(n,u,o),s!==null&&(In(s,n,o),kl(s,n,o))}};function gy(n,s,o,u,f,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,_):s.prototype&&s.prototype.isPureReactComponent?!ml(o,u)||!ml(f,m):!0}function my(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&Uf.enqueueReplaceState(s,s.state,null)}function ri(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=b({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Fu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function py(n){Fu(n)}function yy(n){console.error(n)}function xy(n){Fu(n)}function $u(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function by(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function zf(n,s,o){return o=Ps(o),o.tag=3,o.payload={element:null},o.callback=function(){$u(n,s)},o}function vy(n){return n=Ps(n),n.tag=3,n}function _y(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){by(s,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){by(s,o,u),typeof f!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function V1(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&vl(s,o,f,!0),o=$n.current,o!==null){switch(o.tag){case 13:return Tr===null?ug():o.alternate===null&&yt===0&&(yt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===mf?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),hg(n,u,f)),!1;case 22:return o.flags|=65536,u===mf?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),hg(n,u,f)),!1}throw Error(a(435,o.tag))}return hg(n,u,f),ug(),!1}if(Ye)return s=$n.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==lf&&(n=Error(a(422),{cause:u}),bl(Hn(n,o)))):(u!==lf&&(s=Error(a(423),{cause:u}),bl(Hn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Hn(u,o),f=zf(n.stateNode,u,f),xf(n,f),yt!==4&&(yt=2)),!1;var m=Error(a(520),{cause:u});if(m=Hn(m,o),zl===null?zl=[m]:zl.push(m),yt!==4&&(yt=2),s===null)return!0;u=Hn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=zf(o.stateNode,u,n),xf(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Gs===null||!Gs.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=vy(f),_y(f,n,o,u),xf(o,f),!1}o=o.return}while(o!==null);return!1}var wy=Error(a(461)),qt=!1;function Qt(n,s,o,u){s.child=n===null?hy(s,null,o,u):no(s,n.child,o,u)}function Ty(n,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var _={};for(var E in u)E!=="ref"&&(_[E]=u[E])}else _=u;return ei(s),u=Tf(n,s,o,_,m,f),E=Ef(),n!==null&&!qt?(kf(n,s,f),ls(n,s,f)):(Ye&&E&&af(s),s.flags|=1,Qt(n,s,u,f),s.child)}function Ey(n,s,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!nf(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,ky(n,s,m,u,f)):(n=Eu(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!Wf(n,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:ml,o(_,u)&&n.ref===s.ref)return ls(n,s,f)}return s.flags|=1,n=ts(m,u),n.ref=s.ref,n.return=s,s.child=n}function ky(n,s,o,u,f){if(n!==null){var m=n.memoizedProps;if(ml(m,u)&&n.ref===s.ref)if(qt=!1,s.pendingProps=u=m,Wf(n,f))(n.flags&131072)!==0&&(qt=!0);else return s.lanes=n.lanes,ls(n,s,f)}return Hf(n,s,o,u,f)}function Sy(n,s,o){var u=s.pendingProps,f=u.children,m=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,n!==null){for(f=s.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return Ny(n,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Du(s,m!==null?m.cachePool:null),m!==null?k0(s,m):vf(),fy(s);else return s.lanes=s.childLanes=536870912,Ny(n,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(Du(s,m.cachePool),k0(s,m),zs(),s.memoizedState=null):(n!==null&&Du(s,null),vf(),zs());return Qt(n,s,f,o),s.child}function Ny(n,s,o,u){var f=gf();return f=f===null?null:{parent:Pt._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},n!==null&&Du(s,null),vf(),fy(s),n!==null&&vl(n,s,u,!0),null}function Gu(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Hf(n,s,o,u,f){return ei(s),o=Tf(n,s,o,u,void 0,f),u=Ef(),n!==null&&!qt?(kf(n,s,f),ls(n,s,f)):(Ye&&u&&af(s),s.flags|=1,Qt(n,s,o,f),s.child)}function Ay(n,s,o,u,f,m){return ei(s),s.updateQueue=null,o=N0(s,u,o,f),S0(n),u=Ef(),n!==null&&!qt?(kf(n,s,m),ls(n,s,m)):(Ye&&u&&af(s),s.flags|=1,Qt(n,s,o,m),s.child)}function Dy(n,s,o,u,f){if(ei(s),s.stateNode===null){var m=Gi,_=o.contextType;typeof _=="object"&&_!==null&&(m=rn(_)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Uf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},pf(s),_=o.contextType,m.context=typeof _=="object"&&_!==null?rn(_):Gi,m.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Lf(s,o,_,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Uf.enqueueReplaceState(m,m.state,null),Nl(s,u,m,f),Sl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var E=s.memoizedProps,U=ri(o,E);m.props=U;var ee=m.context,de=o.contextType;_=Gi,typeof de=="object"&&de!==null&&(_=rn(de));var ge=o.getDerivedStateFromProps;de=typeof ge=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,de||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||ee!==_)&&my(s,m,u,_),Ms=!1;var ne=s.memoizedState;m.state=ne,Nl(s,u,m,f),Sl(),ee=s.memoizedState,E||ne!==ee||Ms?(typeof ge=="function"&&(Lf(s,o,ge,u),ee=s.memoizedState),(U=Ms||gy(s,o,U,u,ne,ee,_))?(de||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=ee),m.props=u,m.state=ee,m.context=_,u=U):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,yf(n,s),_=s.memoizedProps,de=ri(o,_),m.props=de,ge=s.pendingProps,ne=m.context,ee=o.contextType,U=Gi,typeof ee=="object"&&ee!==null&&(U=rn(ee)),E=o.getDerivedStateFromProps,(ee=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ge||ne!==U)&&my(s,m,u,U),Ms=!1,ne=s.memoizedState,m.state=ne,Nl(s,u,m,f),Sl();var ie=s.memoizedState;_!==ge||ne!==ie||Ms||n!==null&&n.dependencies!==null&&Nu(n.dependencies)?(typeof E=="function"&&(Lf(s,o,E,u),ie=s.memoizedState),(de=Ms||gy(s,o,de,u,ne,ie,U)||n!==null&&n.dependencies!==null&&Nu(n.dependencies))?(ee||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,ie,U),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,ie,U)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ie),m.props=u,m.state=ie,m.context=U,u=de):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,Gu(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=no(s,n.child,null,f),s.child=no(s,null,o,f)):Qt(n,s,o,f),s.memoizedState=m.state,n=s.child):n=ls(n,s,f),n}function Ry(n,s,o,u){return xl(),s.flags|=256,Qt(n,s,o,u),s.child}var Bf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qf(n){return{baseLanes:n,cachePool:y0()}}function Ff(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Gn),n}function jy(n,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(Vt.current&2)!==0),_&&(f=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ye){if(f?Us(s):zs(),Ye){var E=pt,U;if(U=E){e:{for(U=E,E=wr;U.nodeType!==8;){if(!E){E=null;break e}if(U=ar(U.nextSibling),U===null){E=null;break e}}E=U}E!==null?(s.memoizedState={dehydrated:E,treeContext:Qa!==null?{id:ns,overflow:rs}:null,retryLane:536870912,hydrationErrors:null},U=Nn(18,null,null,0),U.stateNode=E,U.return=s,s.child=U,mn=s,pt=null,U=!0):U=!1}U||Ja(s)}if(E=s.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Ng(E)?s.lanes=32:s.lanes=536870912,null;os(s)}return E=u.children,u=u.fallback,f?(zs(),f=s.mode,E=Yu({mode:"hidden",children:E},f),u=Wa(u,f,o,null),E.return=s,u.return=s,E.sibling=u,s.child=E,f=s.child,f.memoizedState=qf(o),f.childLanes=Ff(n,_,o),s.memoizedState=Bf,u):(Us(s),$f(s,E))}if(U=n.memoizedState,U!==null&&(E=U.dehydrated,E!==null)){if(m)s.flags&256?(Us(s),s.flags&=-257,s=Gf(n,s,o)):s.memoizedState!==null?(zs(),s.child=n.child,s.flags|=128,s=null):(zs(),f=u.fallback,E=s.mode,u=Yu({mode:"visible",children:u.children},E),f=Wa(f,E,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,no(s,n.child,null,o),u=s.child,u.memoizedState=qf(o),u.childLanes=Ff(n,_,o),s.memoizedState=Bf,s=f);else if(Us(s),Ng(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var ee=_.dgst;_=ee,u=Error(a(419)),u.stack="",u.digest=_,bl({value:u,source:null,stack:null}),s=Gf(n,s,o)}else if(qt||vl(n,s,o,!1),_=(o&n.childLanes)!==0,qt||_){if(_=ot,_!==null&&(u=o&-o,u=(u&42)!==0?1:Ns(u),u=(u&(_.suspendedLanes|o))!==0?0:u,u!==0&&u!==U.retryLane))throw U.retryLane=u,$i(n,u),In(_,n,u),wy;E.data==="$?"||ug(),s=Gf(n,s,o)}else E.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=U.treeContext,pt=ar(E.nextSibling),mn=s,Ye=!0,Xa=null,wr=!1,n!==null&&(qn[Fn++]=ns,qn[Fn++]=rs,qn[Fn++]=Qa,ns=n.id,rs=n.overflow,Qa=s),s=$f(s,u.children),s.flags|=4096);return s}return f?(zs(),f=u.fallback,E=s.mode,U=n.child,ee=U.sibling,u=ts(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&65011712,ee!==null?f=ts(ee,f):(f=Wa(f,E,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,E=n.child.memoizedState,E===null?E=qf(o):(U=E.cachePool,U!==null?(ee=Pt._currentValue,U=U.parent!==ee?{parent:ee,pool:ee}:U):U=y0(),E={baseLanes:E.baseLanes|o,cachePool:U}),f.memoizedState=E,f.childLanes=Ff(n,_,o),s.memoizedState=Bf,u):(Us(s),o=n.child,n=o.sibling,o=ts(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=o,s.memoizedState=null,o)}function $f(n,s){return s=Yu({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Yu(n,s){return n=Nn(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Gf(n,s,o){return no(s,n.child,null,o),n=$f(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Iy(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),uf(n.return,s,o)}function Yf(n,s,o,u,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function Cy(n,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;if(Qt(n,s,u.children,o),u=Vt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Iy(n,o,s);else if(n.tag===19)Iy(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(q(Vt,u),f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&qu(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Yf(s,!1,f,o,m);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&qu(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Yf(s,!0,o,null,m);break;case"together":Yf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ls(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),$s|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(vl(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(a(153));if(s.child!==null){for(n=s.child,o=ts(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=ts(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Wf(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Nu(n)))}function L1(n,s,o){switch(s.tag){case 3:xe(s,s.stateNode.containerInfo),Os(s,Pt,n.memoizedState.cache),xl();break;case 27:case 5:Me(s);break;case 4:xe(s,s.stateNode.containerInfo);break;case 10:Os(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Us(s),s.flags|=128,null):(o&s.child.childLanes)!==0?jy(n,s,o):(Us(s),n=ls(n,s,o),n!==null?n.sibling:null);Us(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(vl(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return Cy(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),q(Vt,Vt.current),u)break;return null;case 22:case 23:return s.lanes=0,Sy(n,s,o);case 24:Os(s,Pt,n.memoizedState.cache)}return ls(n,s,o)}function Oy(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)qt=!0;else{if(!Wf(n,o)&&(s.flags&128)===0)return qt=!1,L1(n,s,o);qt=(n.flags&131072)!==0}else qt=!1,Ye&&(s.flags&1048576)!==0&&u0(s,Su,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")nf(u)?(n=ri(u,n),s.tag=1,s=Dy(null,s,u,n,o)):(s.tag=0,s=Hf(null,s,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===V){s.tag=11,s=Ty(null,s,u,n,o);break e}else if(f===A){s.tag=14,s=Ey(null,s,u,n,o);break e}}throw s=_e(u)||u,Error(a(306,s,""))}}return s;case 0:return Hf(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=ri(u,s.pendingProps),Dy(n,s,u,f,o);case 3:e:{if(xe(s,s.stateNode.containerInfo),n===null)throw Error(a(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,yf(n,s),Nl(s,u,null,o);var _=s.memoizedState;if(u=_.cache,Os(s,Pt,u),u!==m.cache&&df(s,[Pt],o,!0),Sl(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Ry(n,s,u,o);break e}else if(u!==f){f=Hn(Error(a(424)),s),bl(f),s=Ry(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(pt=ar(n.firstChild),mn=s,Ye=!0,Xa=null,wr=!0,o=hy(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(xl(),u===f){s=ls(n,s,o);break e}Qt(n,s,u,o)}s=s.child}return s;case 26:return Gu(n,s),n===null?(o=Lx(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ye||(o=s.type,n=s.pendingProps,u=od(ae.current).createElement(o),u[Ct]=s,u[kt]=n,Xt(u,o,n),xt(u),s.stateNode=u):s.memoizedState=Lx(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Me(s),n===null&&Ye&&(u=s.stateNode=Mx(s.type,s.pendingProps,ae.current),mn=s,wr=!0,f=pt,Qs(s.type)?(Ag=f,pt=ar(u.firstChild)):pt=f),Qt(n,s,s.pendingProps.children,o),Gu(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ye&&((f=u=pt)&&(u=hE(u,s.type,s.pendingProps,wr),u!==null?(s.stateNode=u,mn=s,pt=ar(u.firstChild),wr=!1,f=!0):f=!1),f||Ja(s)),Me(s),f=s.type,m=s.pendingProps,_=n!==null?n.memoizedProps:null,u=m.children,Eg(f,m)?u=null:_!==null&&Eg(f,_)&&(s.flags|=32),s.memoizedState!==null&&(f=Tf(n,s,R1,null,null,o),Ql._currentValue=f),Gu(n,s),Qt(n,s,u,o),s.child;case 6:return n===null&&Ye&&((n=o=pt)&&(o=fE(o,s.pendingProps,wr),o!==null?(s.stateNode=o,mn=s,pt=null,n=!0):n=!1),n||Ja(s)),null;case 13:return jy(n,s,o);case 4:return xe(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=no(s,null,u,o):Qt(n,s,u,o),s.child;case 11:return Ty(n,s,s.type,s.pendingProps,o);case 7:return Qt(n,s,s.pendingProps,o),s.child;case 8:return Qt(n,s,s.pendingProps.children,o),s.child;case 12:return Qt(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Os(s,s.type,u.value),Qt(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ei(s),f=rn(f),u=u(f),s.flags|=1,Qt(n,s,u,o),s.child;case 14:return Ey(n,s,s.type,s.pendingProps,o);case 15:return ky(n,s,s.type,s.pendingProps,o);case 19:return Cy(n,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},n===null?(o=Yu(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=ts(n.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return Sy(n,s,o);case 24:return ei(s),u=rn(Pt),n===null?(f=gf(),f===null&&(f=ot,m=hf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},pf(s),Os(s,Pt,f)):((n.lanes&o)!==0&&(yf(n,s),Nl(s,null,null,o),Sl()),f=n.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Os(s,Pt,u)):(u=m.cache,Os(s,Pt,u),u!==f.cache&&df(s,[Pt],o,!0))),Qt(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function cs(n){n.flags|=4}function My(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!qx(s)){if(s=$n.current,s!==null&&((Fe&4194048)===Fe?Tr!==null:(Fe&62914560)!==Fe&&(Fe&536870912)===0||s!==Tr))throw El=mf,x0;n.flags|=8192}}function Wu(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Xo():536870912,n.lanes|=s,io|=s)}function Ol(n,s){if(!Ye)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ht(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function U1(n,s,o){var u=s.pendingProps;switch(of(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(s),null;case 1:return ht(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),as(Pt),Ke(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(yl(s)?cs(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,f0())),ht(s),null;case 26:return o=s.memoizedState,n===null?(cs(s),o!==null?(ht(s),My(s,o)):(ht(s),s.flags&=-16777217)):o?o!==n.memoizedState?(cs(s),ht(s),My(s,o)):(ht(s),s.flags&=-16777217):(n.memoizedProps!==u&&cs(s),ht(s),s.flags&=-16777217),null;case 27:at(s),o=ae.current;var f=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==u&&cs(s);else{if(!u){if(s.stateNode===null)throw Error(a(166));return ht(s),null}n=K.current,yl(s)?d0(s):(n=Mx(f,u,o),s.stateNode=n,cs(s))}return ht(s),null;case 5:if(at(s),o=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&cs(s);else{if(!u){if(s.stateNode===null)throw Error(a(166));return ht(s),null}if(n=K.current,yl(s))d0(s);else{switch(f=od(ae.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[Ct]=s,n[kt]=u;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=n;e:switch(Xt(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&cs(s)}}return ht(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&cs(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(a(166));if(n=ae.current,yl(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=mn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Ct]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Ax(n.nodeValue,o)),n||Ja(s)}else n=od(n).createTextNode(u),n[Ct]=s,s.stateNode=n}return ht(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=yl(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(a(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Ct]=s}else xl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),f=!1}else f=f0(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(os(s),s):(os(s),null)}if(os(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==n&&o&&(s.child.flags|=8192),Wu(s,s.updateQueue),ht(s),null;case 4:return Ke(),n===null&&bg(s.stateNode.containerInfo),ht(s),null;case 10:return as(s.type),ht(s),null;case 19:if(R(Vt),f=s.memoizedState,f===null)return ht(s),null;if(u=(s.flags&128)!==0,m=f.rendering,m===null)if(u)Ol(f,!1);else{if(yt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=qu(n),m!==null){for(s.flags|=128,Ol(f,!1),n=m.updateQueue,s.updateQueue=n,Wu(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)c0(o,n),o=o.sibling;return q(Vt,Vt.current&1|2),s.child}n=n.sibling}f.tail!==null&&Mn()>Xu&&(s.flags|=128,u=!0,Ol(f,!1),s.lanes=4194304)}else{if(!u)if(n=qu(m),n!==null){if(s.flags|=128,u=!0,n=n.updateQueue,s.updateQueue=n,Wu(s,n),Ol(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Ye)return ht(s),null}else 2*Mn()-f.renderingStartTime>Xu&&o!==536870912&&(s.flags|=128,u=!0,Ol(f,!1),s.lanes=4194304);f.isBackwards?(m.sibling=s.child,s.child=m):(n=f.last,n!==null?n.sibling=m:s.child=m,f.last=m)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Mn(),s.sibling=null,n=Vt.current,q(Vt,u?n&1|2:n&1),s):(ht(s),null);case 22:case 23:return os(s),_f(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ht(s),s.subtreeFlags&6&&(s.flags|=8192)):ht(s),o=s.updateQueue,o!==null&&Wu(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&R(ti),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),as(Pt),ht(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function z1(n,s){switch(of(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return as(Pt),Ke(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return at(s),null;case 13:if(os(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(a(340));xl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return R(Vt),null;case 4:return Ke(),null;case 10:return as(s.type),null;case 22:case 23:return os(s),_f(),n!==null&&R(ti),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return as(Pt),null;case 25:return null;default:return null}}function Py(n,s){switch(of(s),s.tag){case 3:as(Pt),Ke();break;case 26:case 27:case 5:at(s);break;case 4:Ke();break;case 13:os(s);break;case 19:R(Vt);break;case 10:as(s.type);break;case 22:case 23:os(s),_f(),n!==null&&R(ti);break;case 24:as(Pt)}}function Ml(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==f)}}catch(E){it(s,s.return,E)}}function Hs(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var _=u.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,f=s;var U=o,ee=E;try{ee()}catch(de){it(f,U,de)}}}u=u.next}while(u!==m)}}catch(de){it(s,s.return,de)}}function Vy(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{E0(s,o)}catch(u){it(n,n.return,u)}}}function Ly(n,s,o){o.props=ri(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){it(n,s,u)}}function Pl(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){it(n,s,f)}}function Er(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){it(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){it(n,s,f)}else o.current=null}function Uy(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){it(n,n.return,f)}}function Qf(n,s,o){try{var u=n.stateNode;oE(u,n.type,o,s),u[kt]=s}catch(f){it(n,n.return,f)}}function zy(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Qs(n.type)||n.tag===4}function Kf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||zy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Qs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Xf(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=id));else if(u!==4&&(u===27&&Qs(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Xf(n,s,o),n=n.sibling;n!==null;)Xf(n,s,o),n=n.sibling}function Qu(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&Qs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Qu(n,s,o),n=n.sibling;n!==null;)Qu(n,s,o),n=n.sibling}function Hy(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Xt(s,u,o),s[Ct]=n,s[kt]=o}catch(m){it(n,n.return,m)}}var us=!1,vt=!1,Jf=!1,By=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function H1(n,s){if(n=n.containerInfo,wg=fd,n=Zp(n),Qh(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,E=-1,U=-1,ee=0,de=0,ge=n,ne=null;t:for(;;){for(var ie;ge!==o||f!==0&&ge.nodeType!==3||(E=_+f),ge!==m||u!==0&&ge.nodeType!==3||(U=_+u),ge.nodeType===3&&(_+=ge.nodeValue.length),(ie=ge.firstChild)!==null;)ne=ge,ge=ie;for(;;){if(ge===n)break t;if(ne===o&&++ee===f&&(E=_),ne===m&&++de===u&&(U=_),(ie=ge.nextSibling)!==null)break;ge=ne,ne=ge.parentNode}ge=ie}o=E===-1||U===-1?null:{start:E,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(Tg={focusedElem:n,selectionRange:o},fd=!1,Ft=s;Ft!==null;)if(s=Ft,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Ft=n;else for(;Ft!==null;){switch(s=Ft,m=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Re=ri(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(Re,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Se){it(o,o.return,Se)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Sg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Sg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=s.sibling,n!==null){n.return=s.return,Ft=n;break}Ft=s.return}}function qy(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Bs(n,o),u&4&&Ml(5,o);break;case 1:if(Bs(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(_){it(o,o.return,_)}else{var f=ri(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){it(o,o.return,_)}}u&64&&Vy(o),u&512&&Pl(o,o.return);break;case 3:if(Bs(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{E0(n,s)}catch(_){it(o,o.return,_)}}break;case 27:s===null&&u&4&&Hy(o);case 26:case 5:Bs(n,o),s===null&&u&4&&Uy(o),u&512&&Pl(o,o.return);break;case 12:Bs(n,o);break;case 13:Bs(n,o),u&4&&Gy(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=K1.bind(null,o),gE(n,o))));break;case 22:if(u=o.memoizedState!==null||us,!u){s=s!==null&&s.memoizedState!==null||vt,f=us;var m=vt;us=u,(vt=s)&&!m?qs(n,o,(o.subtreeFlags&8772)!==0):Bs(n,o),us=f,vt=m}break;case 30:break;default:Bs(n,o)}}function Fy(n){var s=n.alternate;s!==null&&(n.alternate=null,Fy(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Rs(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var dt=null,xn=!1;function ds(n,s,o){for(o=o.child;o!==null;)$y(n,s,o),o=o.sibling}function $y(n,s,o){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(mt,o)}catch{}switch(o.tag){case 26:vt||Er(o,s),ds(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:vt||Er(o,s);var u=dt,f=xn;Qs(o.type)&&(dt=o.stateNode,xn=!1),ds(n,s,o),$l(o.stateNode),dt=u,xn=f;break;case 5:vt||Er(o,s);case 6:if(u=dt,f=xn,dt=null,ds(n,s,o),dt=u,xn=f,dt!==null)if(xn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(o.stateNode)}catch(m){it(o,s,m)}else try{dt.removeChild(o.stateNode)}catch(m){it(o,s,m)}break;case 18:dt!==null&&(xn?(n=dt,Cx(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Zl(n)):Cx(dt,o.stateNode));break;case 4:u=dt,f=xn,dt=o.stateNode.containerInfo,xn=!0,ds(n,s,o),dt=u,xn=f;break;case 0:case 11:case 14:case 15:vt||Hs(2,o,s),vt||Hs(4,o,s),ds(n,s,o);break;case 1:vt||(Er(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Ly(o,s,u)),ds(n,s,o);break;case 21:ds(n,s,o);break;case 22:vt=(u=vt)||o.memoizedState!==null,ds(n,s,o),vt=u;break;default:ds(n,s,o)}}function Gy(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Zl(n)}catch(o){it(s,s.return,o)}}function B1(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new By),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new By),s;default:throw Error(a(435,n.tag))}}function Zf(n,s){var o=B1(n);s.forEach(function(u){var f=X1.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function An(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,_=s,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(Qs(E.type)){dt=E.stateNode,xn=!1;break e}break;case 5:dt=E.stateNode,xn=!1;break e;case 3:case 4:dt=E.stateNode.containerInfo,xn=!0;break e}E=E.return}if(dt===null)throw Error(a(160));$y(m,_,f),dt=null,xn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Yy(s,n),s=s.sibling}var sr=null;function Yy(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:An(s,n),Dn(n),u&4&&(Hs(3,n,n.return),Ml(3,n),Hs(5,n,n.return));break;case 1:An(s,n),Dn(n),u&512&&(vt||o===null||Er(o,o.return)),u&64&&us&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=sr;if(An(s,n),Dn(n),u&512&&(vt||o===null||Er(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ia]||m[Ct]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Xt(m,u,o),m[Ct]=n,xt(m),u=m;break e;case"link":var _=Hx("link","href",f).get(u+(o.href||""));if(_){for(var E=0;E<_.length;E++)if(m=_[E],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(E,1);break t}}m=f.createElement(u),Xt(m,u,o),f.head.appendChild(m);break;case"meta":if(_=Hx("meta","content",f).get(u+(o.content||""))){for(E=0;E<_.length;E++)if(m=_[E],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(E,1);break t}}m=f.createElement(u),Xt(m,u,o),f.head.appendChild(m);break;default:throw Error(a(468,u))}m[Ct]=n,xt(m),u=m}n.stateNode=u}else Bx(f,n.type,n.stateNode);else n.stateNode=zx(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Bx(f,n.type,n.stateNode):zx(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Qf(n,n.memoizedProps,o.memoizedProps)}break;case 27:An(s,n),Dn(n),u&512&&(vt||o===null||Er(o,o.return)),o!==null&&u&4&&Qf(n,n.memoizedProps,o.memoizedProps);break;case 5:if(An(s,n),Dn(n),u&512&&(vt||o===null||Er(o,o.return)),n.flags&32){f=n.stateNode;try{Vn(f,"")}catch(ie){it(n,n.return,ie)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Qf(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Jf=!0);break;case 6:if(An(s,n),Dn(n),u&4){if(n.stateNode===null)throw Error(a(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(ie){it(n,n.return,ie)}}break;case 3:if(ud=null,f=sr,sr=ld(s.containerInfo),An(s,n),sr=f,Dn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Zl(s.containerInfo)}catch(ie){it(n,n.return,ie)}Jf&&(Jf=!1,Wy(n));break;case 4:u=sr,sr=ld(n.stateNode.containerInfo),An(s,n),Dn(n),sr=u;break;case 12:An(s,n),Dn(n);break;case 13:An(s,n),Dn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ag=Mn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Zf(n,u)));break;case 22:f=n.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,ee=us,de=vt;if(us=ee||f,vt=de||U,An(s,n),vt=de,us=ee,Dn(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||U||us||vt||si(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){U=o=s;try{if(m=U.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=U.stateNode;var ge=U.memoizedProps.style,ne=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;E.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(ie){it(U,U.return,ie)}}}else if(s.tag===6){if(o===null){U=s;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(ie){it(U,U.return,ie)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Zf(n,o))));break;case 19:An(s,n),Dn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Zf(n,u)));break;case 30:break;case 21:break;default:An(s,n),Dn(n)}}function Dn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(zy(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,m=Kf(n);Qu(n,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(Vn(_,""),o.flags&=-33);var E=Kf(n);Qu(n,E,_);break;case 3:case 4:var U=o.stateNode.containerInfo,ee=Kf(n);Xf(n,ee,U);break;default:throw Error(a(161))}}catch(de){it(n,n.return,de)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Wy(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Wy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Bs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)qy(n,s.alternate,s),s=s.sibling}function si(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Hs(4,s,s.return),si(s);break;case 1:Er(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Ly(s,s.return,o),si(s);break;case 27:$l(s.stateNode);case 26:case 5:Er(s,s.return),si(s);break;case 22:s.memoizedState===null&&si(s);break;case 30:si(s);break;default:si(s)}n=n.sibling}}function qs(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:qs(f,m,o),Ml(4,m);break;case 1:if(qs(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){it(u,u.return,ee)}if(u=m,f=u.updateQueue,f!==null){var E=u.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)T0(U[f],E)}catch(ee){it(u,u.return,ee)}}o&&_&64&&Vy(m),Pl(m,m.return);break;case 27:Hy(m);case 26:case 5:qs(f,m,o),o&&u===null&&_&4&&Uy(m),Pl(m,m.return);break;case 12:qs(f,m,o);break;case 13:qs(f,m,o),o&&_&4&&Gy(f,m);break;case 22:m.memoizedState===null&&qs(f,m,o),Pl(m,m.return);break;case 30:break;default:qs(f,m,o)}s=s.sibling}}function eg(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&_l(o))}function tg(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&_l(n))}function kr(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Qy(n,s,o,u),s=s.sibling}function Qy(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:kr(n,s,o,u),f&2048&&Ml(9,s);break;case 1:kr(n,s,o,u);break;case 3:kr(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&_l(n)));break;case 12:if(f&2048){kr(n,s,o,u),n=s.stateNode;try{var m=s.memoizedProps,_=m.id,E=m.onPostCommit;typeof E=="function"&&E(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(U){it(s,s.return,U)}}else kr(n,s,o,u);break;case 13:kr(n,s,o,u);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?kr(n,s,o,u):Vl(n,s):m._visibility&2?kr(n,s,o,u):(m._visibility|=2,ro(n,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&eg(_,s);break;case 24:kr(n,s,o,u),f&2048&&tg(s.alternate,s);break;default:kr(n,s,o,u)}}function ro(n,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=n,_=s,E=o,U=u,ee=_.flags;switch(_.tag){case 0:case 11:case 15:ro(m,_,E,U,f),Ml(8,_);break;case 23:break;case 22:var de=_.stateNode;_.memoizedState!==null?de._visibility&2?ro(m,_,E,U,f):Vl(m,_):(de._visibility|=2,ro(m,_,E,U,f)),f&&ee&2048&&eg(_.alternate,_);break;case 24:ro(m,_,E,U,f),f&&ee&2048&&tg(_.alternate,_);break;default:ro(m,_,E,U,f)}s=s.sibling}}function Vl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:Vl(o,u),f&2048&&eg(u.alternate,u);break;case 24:Vl(o,u),f&2048&&tg(u.alternate,u);break;default:Vl(o,u)}s=s.sibling}}var Ll=8192;function so(n){if(n.subtreeFlags&Ll)for(n=n.child;n!==null;)Ky(n),n=n.sibling}function Ky(n){switch(n.tag){case 26:so(n),n.flags&Ll&&n.memoizedState!==null&&NE(sr,n.memoizedState,n.memoizedProps);break;case 5:so(n);break;case 3:case 4:var s=sr;sr=ld(n.stateNode.containerInfo),so(n),sr=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=Ll,Ll=16777216,so(n),Ll=s):so(n));break;default:so(n)}}function Xy(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ul(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ft=u,Zy(u,n)}Xy(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Jy(n),n=n.sibling}function Jy(n){switch(n.tag){case 0:case 11:case 15:Ul(n),n.flags&2048&&Hs(9,n,n.return);break;case 3:Ul(n);break;case 12:Ul(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Ku(n)):Ul(n);break;default:Ul(n)}}function Ku(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ft=u,Zy(u,n)}Xy(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Hs(8,s,s.return),Ku(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Ku(s));break;default:Ku(s)}n=n.sibling}}function Zy(n,s){for(;Ft!==null;){var o=Ft;switch(o.tag){case 0:case 11:case 15:Hs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:_l(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ft=u;else e:for(o=n;Ft!==null;){u=Ft;var f=u.sibling,m=u.return;if(Fy(u),u===o){Ft=null;break e}if(f!==null){f.return=m,Ft=f;break e}Ft=m}}}var q1={getCacheForType:function(n){var s=rn(Pt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o}},F1=typeof WeakMap=="function"?WeakMap:Map,Je=0,ot=null,Ve=null,Fe=0,Ze=0,Rn=null,Fs=!1,ao=!1,ng=!1,hs=0,yt=0,$s=0,ai=0,rg=0,Gn=0,io=0,zl=null,bn=null,sg=!1,ag=0,Xu=1/0,Ju=null,Gs=null,Kt=0,Ys=null,oo=null,lo=0,ig=0,og=null,ex=null,Hl=0,lg=null;function jn(){if((Je&2)!==0&&Fe!==0)return Fe&-Fe;if(W.T!==null){var n=Qi;return n!==0?n:mg()}return As()}function tx(){Gn===0&&(Gn=(Fe&536870912)===0||Ye?Ko():536870912);var n=$n.current;return n!==null&&(n.flags|=32),Gn}function In(n,s,o){(n===ot&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)&&(co(n,0),Ws(n,Fe,Gn,!1)),Fr(n,o),((Je&2)===0||n!==ot)&&(n===ot&&((Je&2)===0&&(ai|=o),yt===4&&Ws(n,Fe,Gn,!1)),Sr(n))}function nx(n,s,o){if((Je&6)!==0)throw Error(a(327));var u=!o&&(s&124)===0&&(s&n.expiredLanes)===0||ja(n,s),f=u?Y1(n,s):dg(n,s,!0),m=u;do{if(f===0){ao&&!u&&Ws(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!$1(o)){f=dg(n,s,!1),m=!1;continue}if(f===2){if(m=s,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var E=n;f=zl;var U=E.current.memoizedState.isDehydrated;if(U&&(co(E,_).flags|=256),_=dg(E,_,!1),_!==2){if(ng&&!U){E.errorRecoveryDisabledLanes|=m,ai|=m,f=4;break e}m=bn,bn=f,m!==null&&(bn===null?bn=m:bn.push.apply(bn,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){co(n,0),Ws(n,s,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:Ws(u,s,Gn,!Fs);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(f=ag+300-Mn(),10<f)){if(Ws(u,s,Gn,!Fs),Si(u,0,!0)!==0)break e;u.timeoutHandle=jx(rx.bind(null,u,o,bn,Ju,sg,s,Gn,ai,io,Fs,m,2,-0,0),f);break e}rx(u,o,bn,Ju,sg,s,Gn,ai,io,Fs,m,0,-0,0)}}break}while(!0);Sr(n)}function rx(n,s,o,u,f,m,_,E,U,ee,de,ge,ne,ie){if(n.timeoutHandle=-1,ge=s.subtreeFlags,(ge&8192||(ge&16785408)===16785408)&&(Wl={stylesheets:null,count:0,unsuspend:SE},Ky(s),ge=AE(),ge!==null)){n.cancelPendingCommit=ge(ux.bind(null,n,s,m,o,u,f,_,E,U,de,1,ne,ie)),Ws(n,m,_,!ee);return}ux(n,s,m,o,u,f,_,E,U)}function $1(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!Sn(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ws(n,s,o,u){s&=~rg,s&=~ai,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var m=31-nn(f),_=1<<m;u[m]=-1,f&=~_}o!==0&&dr(n,o,s)}function Zu(){return(Je&6)===0?(Bl(0),!1):!0}function cg(){if(Ve!==null){if(Ze===0)var n=Ve.return;else n=Ve,ss=Za=null,Sf(n),to=null,Il=0,n=Ve;for(;n!==null;)Py(n.alternate,n),n=n.return;Ve=null}}function co(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,cE(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),cg(),ot=n,Ve=o=ts(n.current,null),Fe=s,Ze=0,Rn=null,Fs=!1,ao=ja(n,s),ng=!1,io=Gn=rg=ai=$s=yt=0,bn=zl=null,sg=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-nn(u),m=1<<f;s|=n[f],u&=~m}return hs=s,_u(),o}function sx(n,s){Oe=null,W.H=zu,s===Tl||s===Ru?(s=_0(),Ze=3):s===x0?(s=_0(),Ze=4):Ze=s===wy?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Rn=s,Ve===null&&(yt=1,$u(n,Hn(s,n.current)))}function ax(){var n=W.H;return W.H=zu,n===null?zu:n}function ix(){var n=W.A;return W.A=q1,n}function ug(){yt=4,Fs||(Fe&4194048)!==Fe&&$n.current!==null||(ao=!0),($s&134217727)===0&&(ai&134217727)===0||ot===null||Ws(ot,Fe,Gn,!1)}function dg(n,s,o){var u=Je;Je|=2;var f=ax(),m=ix();(ot!==n||Fe!==s)&&(Ju=null,co(n,s)),s=!1;var _=yt;e:do try{if(Ze!==0&&Ve!==null){var E=Ve,U=Rn;switch(Ze){case 8:cg(),_=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(s=!0);var ee=Ze;if(Ze=0,Rn=null,uo(n,E,U,ee),o&&ao){_=0;break e}break;default:ee=Ze,Ze=0,Rn=null,uo(n,E,U,ee)}}G1(),_=yt;break}catch(de){sx(n,de)}while(!0);return s&&n.shellSuspendCounter++,ss=Za=null,Je=u,W.H=f,W.A=m,Ve===null&&(ot=null,Fe=0,_u()),_}function G1(){for(;Ve!==null;)ox(Ve)}function Y1(n,s){var o=Je;Je|=2;var u=ax(),f=ix();ot!==n||Fe!==s?(Ju=null,Xu=Mn()+500,co(n,s)):ao=ja(n,s);e:do try{if(Ze!==0&&Ve!==null){s=Ve;var m=Rn;t:switch(Ze){case 1:Ze=0,Rn=null,uo(n,s,m,1);break;case 2:case 9:if(b0(m)){Ze=0,Rn=null,lx(s);break}s=function(){Ze!==2&&Ze!==9||ot!==n||(Ze=7),Sr(n)},m.then(s,s);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:b0(m)?(Ze=0,Rn=null,lx(s)):(Ze=0,Rn=null,uo(n,s,m,7));break;case 5:var _=null;switch(Ve.tag){case 26:_=Ve.memoizedState;case 5:case 27:var E=Ve;if(!_||qx(_)){Ze=0,Rn=null;var U=E.sibling;if(U!==null)Ve=U;else{var ee=E.return;ee!==null?(Ve=ee,ed(ee)):Ve=null}break t}}Ze=0,Rn=null,uo(n,s,m,5);break;case 6:Ze=0,Rn=null,uo(n,s,m,6);break;case 8:cg(),yt=6;break e;default:throw Error(a(462))}}W1();break}catch(de){sx(n,de)}while(!0);return ss=Za=null,W.H=u,W.A=f,Je=o,Ve!==null?0:(ot=null,Fe=0,_u(),yt)}function W1(){for(;Ve!==null&&!Go();)ox(Ve)}function ox(n){var s=Oy(n.alternate,n,hs);n.memoizedProps=n.pendingProps,s===null?ed(n):Ve=s}function lx(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Ay(o,s,s.pendingProps,s.type,void 0,Fe);break;case 11:s=Ay(o,s,s.pendingProps,s.type.render,s.ref,Fe);break;case 5:Sf(s);default:Py(o,s),s=Ve=c0(s,hs),s=Oy(o,s,hs)}n.memoizedProps=n.pendingProps,s===null?ed(n):Ve=s}function uo(n,s,o,u){ss=Za=null,Sf(s),to=null,Il=0;var f=s.return;try{if(V1(n,f,s,o,Fe)){yt=1,$u(n,Hn(o,n.current)),Ve=null;return}}catch(m){if(f!==null)throw Ve=f,m;yt=1,$u(n,Hn(o,n.current)),Ve=null;return}s.flags&32768?(Ye||u===1?n=!0:ao||(Fe&536870912)!==0?n=!1:(Fs=n=!0,(u===2||u===9||u===3||u===6)&&(u=$n.current,u!==null&&u.tag===13&&(u.flags|=16384))),cx(s,n)):ed(s)}function ed(n){var s=n;do{if((s.flags&32768)!==0){cx(s,Fs);return}n=s.return;var o=U1(s.alternate,s,hs);if(o!==null){Ve=o;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=n}while(s!==null);yt===0&&(yt=5)}function cx(n,s){do{var o=z1(n.alternate,n);if(o!==null){o.flags&=32767,Ve=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Ve=n;return}Ve=n=o}while(n!==null);yt=6,Ve=null}function ux(n,s,o,u,f,m,_,E,U){n.cancelPendingCommit=null;do td();while(Kt!==0);if((Je&6)!==0)throw Error(a(327));if(s!==null){if(s===n.current)throw Error(a(177));if(m=s.lanes|s.childLanes,m|=ef,Jo(n,o,m,_,E,U),n===ot&&(Ve=ot=null,Fe=0),oo=s,Ys=n,lo=o,ig=m,og=f,ex=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,J1(Na,function(){return mx(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=W.T,W.T=null,f=J.p,J.p=2,_=Je,Je|=4;try{H1(n,s,o)}finally{Je=_,J.p=f,W.T=u}}Kt=1,dx(),hx(),fx()}}function dx(){if(Kt===1){Kt=0;var n=Ys,s=oo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var u=J.p;J.p=2;var f=Je;Je|=4;try{Yy(s,n);var m=Tg,_=Zp(n.containerInfo),E=m.focusedElem,U=m.selectionRange;if(_!==E&&E&&E.ownerDocument&&Jp(E.ownerDocument.documentElement,E)){if(U!==null&&Qh(E)){var ee=U.start,de=U.end;if(de===void 0&&(de=ee),"selectionStart"in E)E.selectionStart=ee,E.selectionEnd=Math.min(de,E.value.length);else{var ge=E.ownerDocument||document,ne=ge&&ge.defaultView||window;if(ne.getSelection){var ie=ne.getSelection(),Re=E.textContent.length,Se=Math.min(U.start,Re),st=U.end===void 0?Se:Math.min(U.end,Re);!ie.extend&&Se>st&&(_=st,st=Se,Se=_);var Q=Xp(E,Se),G=Xp(E,st);if(Q&&G&&(ie.rangeCount!==1||ie.anchorNode!==Q.node||ie.anchorOffset!==Q.offset||ie.focusNode!==G.node||ie.focusOffset!==G.offset)){var Z=ge.createRange();Z.setStart(Q.node,Q.offset),ie.removeAllRanges(),Se>st?(ie.addRange(Z),ie.extend(G.node,G.offset)):(Z.setEnd(G.node,G.offset),ie.addRange(Z))}}}}for(ge=[],ie=E;ie=ie.parentNode;)ie.nodeType===1&&ge.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ge.length;E++){var fe=ge[E];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}fd=!!wg,Tg=wg=null}finally{Je=f,J.p=u,W.T=o}}n.current=s,Kt=2}}function hx(){if(Kt===2){Kt=0;var n=Ys,s=oo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var u=J.p;J.p=2;var f=Je;Je|=4;try{qy(n,s.alternate,s)}finally{Je=f,J.p=u,W.T=o}}Kt=3}}function fx(){if(Kt===4||Kt===3){Kt=0,Kc();var n=Ys,s=oo,o=lo,u=ex;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Kt=5:(Kt=0,oo=Ys=null,gx(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Gs=null),Ni(o),s=s.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(mt,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=W.T,f=J.p,J.p=2,W.T=null;try{for(var m=n.onRecoverableError,_=0;_<u.length;_++){var E=u[_];m(E.value,{componentStack:E.stack})}}finally{W.T=s,J.p=f}}(lo&3)!==0&&td(),Sr(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===lg?Hl++:(Hl=0,lg=n):Hl=0,Bl(0)}}function gx(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,_l(s)))}function td(n){return dx(),hx(),fx(),mx()}function mx(){if(Kt!==5)return!1;var n=Ys,s=ig;ig=0;var o=Ni(lo),u=W.T,f=J.p;try{J.p=32>o?32:o,W.T=null,o=og,og=null;var m=Ys,_=lo;if(Kt=0,oo=Ys=null,lo=0,(Je&6)!==0)throw Error(a(331));var E=Je;if(Je|=4,Jy(m.current),Qy(m,m.current,_,o),Je=E,Bl(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(mt,m)}catch{}return!0}finally{J.p=f,W.T=u,gx(n,s)}}function px(n,s,o){s=Hn(o,s),s=zf(n.stateNode,s,2),n=Vs(n,s,2),n!==null&&(Fr(n,2),Sr(n))}function it(n,s,o){if(n.tag===3)px(n,n,o);else for(;s!==null;){if(s.tag===3){px(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Gs===null||!Gs.has(u))){n=Hn(o,n),o=vy(2),u=Vs(s,o,2),u!==null&&(_y(o,u,s,n),Fr(u,2),Sr(u));break}}s=s.return}}function hg(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new F1;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(ng=!0,f.add(o),n=Q1.bind(null,n,s,o),s.then(n,n))}function Q1(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ot===n&&(Fe&o)===o&&(yt===4||yt===3&&(Fe&62914560)===Fe&&300>Mn()-ag?(Je&2)===0&&co(n,0):rg|=o,io===Fe&&(io=0)),Sr(n)}function yx(n,s){s===0&&(s=Xo()),n=$i(n,s),n!==null&&(Fr(n,s),Sr(n))}function K1(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),yx(n,o)}function X1(n,s){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(s),yx(n,o)}function J1(n,s){return ka(n,s)}var nd=null,ho=null,fg=!1,rd=!1,gg=!1,ii=0;function Sr(n){n!==ho&&n.next===null&&(ho===null?nd=ho=n:ho=ho.next=n),rd=!0,fg||(fg=!0,eE())}function Bl(n,s){if(!gg&&rd){gg=!0;do for(var o=!1,u=nd;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var _=u.suspendedLanes,E=u.pingedLanes;m=(1<<31-nn(42|n)+1)-1,m&=f&~(_&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,_x(u,m))}else m=Fe,m=Si(u,u===ot?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ja(u,m)||(o=!0,_x(u,m));u=u.next}while(o);gg=!1}}function Z1(){xx()}function xx(){rd=fg=!1;var n=0;ii!==0&&(lE()&&(n=ii),ii=0);for(var s=Mn(),o=null,u=nd;u!==null;){var f=u.next,m=bx(u,s);m===0?(u.next=null,o===null?nd=f:o.next=f,f===null&&(ho=o)):(o=u,(n!==0||(m&3)!==0)&&(rd=!0)),u=f}Bl(n)}function bx(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-nn(m),E=1<<_,U=f[_];U===-1?((E&o)===0||(E&u)!==0)&&(f[_]=Qo(E,s)):U<=s&&(n.expiredLanes|=E),m&=~E}if(s=ot,o=Fe,o=Si(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Sa(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||ja(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Sa(u),Ni(o)){case 2:case 8:o=Ei;break;case 32:o=Na;break;case 268435456:o=ki;break;default:o=Na}return u=vx.bind(null,n),o=ka(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Sa(u),n.callbackPriority=2,n.callbackNode=null,2}function vx(n,s){if(Kt!==0&&Kt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(td()&&n.callbackNode!==o)return null;var u=Fe;return u=Si(n,n===ot?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(nx(n,u,s),bx(n,Mn()),n.callbackNode!=null&&n.callbackNode===o?vx.bind(null,n):null)}function _x(n,s){if(td())return null;nx(n,s,!0)}function eE(){uE(function(){(Je&6)!==0?ka(Yo,Z1):xx()})}function mg(){return ii===0&&(ii=Ko()),ii}function wx(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ci(""+n)}function Tx(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function tE(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=wx((f[kt]||null).action),_=u.submitter;_&&(s=(s=_[kt]||null)?wx(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var E=new Oi("action","action",null,u,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ii!==0){var U=_?Tx(f,_):new FormData(f);Mf(o,{pending:!0,data:U,method:f.method,action:m},null,U)}}else typeof m=="function"&&(E.preventDefault(),U=_?Tx(f,_):new FormData(f),Mf(o,{pending:!0,data:U,method:f.method,action:m},m,U))},currentTarget:f}]})}}for(var pg=0;pg<Zh.length;pg++){var yg=Zh[pg],nE=yg.toLowerCase(),rE=yg[0].toUpperCase()+yg.slice(1);rr(nE,"on"+rE)}rr(n0,"onAnimationEnd"),rr(r0,"onAnimationIteration"),rr(s0,"onAnimationStart"),rr("dblclick","onDoubleClick"),rr("focusin","onFocus"),rr("focusout","onBlur"),rr(v1,"onTransitionRun"),rr(_1,"onTransitionStart"),rr(w1,"onTransitionCancel"),rr(a0,"onTransitionEnd"),Gr("onMouseEnter",["mouseout","mouseover"]),Gr("onMouseLeave",["mouseout","mouseover"]),Gr("onPointerEnter",["pointerout","pointerover"]),Gr("onPointerLeave",["pointerout","pointerover"]),tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ql));function Ex(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var _=u.length-1;0<=_;_--){var E=u[_],U=E.instance,ee=E.currentTarget;if(E=E.listener,U!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=ee;try{m(f)}catch(de){Fu(de)}f.currentTarget=null,m=U}else for(_=0;_<u.length;_++){if(E=u[_],U=E.instance,ee=E.currentTarget,E=E.listener,U!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=ee;try{m(f)}catch(de){Fu(de)}f.currentTarget=null,m=U}}}}function Le(n,s){var o=s[el];o===void 0&&(o=s[el]=new Set);var u=n+"__bubble";o.has(u)||(kx(s,n,2,!1),o.add(u))}function xg(n,s,o){var u=0;s&&(u|=4),kx(o,n,u,s)}var sd="_reactListening"+Math.random().toString(36).slice(2);function bg(n){if(!n[sd]){n[sd]=!0,tl.forEach(function(o){o!=="selectionchange"&&(sE.has(o)||xg(o,!1,n),xg(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[sd]||(s[sd]=!0,xg("selectionchange",!1,s))}}function kx(n,s,o,u){switch(Qx(s)){case 2:var f=jE;break;case 8:f=IE;break;default:f=Cg}o=f.bind(null,s,o,n),f=void 0,!Un||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function vg(n,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var E=u.stateNode.containerInfo;if(E===f)break;if(_===4)for(_=u.return;_!==null;){var U=_.tag;if((U===3||U===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;E!==null;){if(_=$r(E),_===null)return;if(U=_.tag,U===5||U===6||U===26||U===27){u=m=_;continue e}E=E.parentNode}}u=u.return}iu(function(){var ee=m,de=Ln(o),ge=[];e:{var ne=i0.get(n);if(ne!==void 0){var ie=Oi,Re=n;switch(n){case"keypress":if(yr(o)===0)break e;case"keydown":case"keyup":ie=zi;break;case"focusin":Re="focus",ie=Vi;break;case"focusout":Re="blur",ie=Vi;break;case"beforeblur":case"afterblur":ie=Vi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=zn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=$h;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=gu;break;case n0:case r0:case s0:ie=Li;break;case a0:ie=pu;break;case"scroll":case"scrollend":ie=ou;break;case"wheel":ie=Hi;break;case"copy":case"cut":case"paste":ie=Ui;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=fl;break;case"toggle":case"beforetoggle":ie=xu}var Se=(s&4)!==0,st=!Se&&(n==="scroll"||n==="scrollend"),Q=Se?ne!==null?ne+"Capture":null:ne;Se=[];for(var G=ee,Z;G!==null;){var fe=G;if(Z=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||Z===null||Q===null||(fe=Ua(G,Q),fe!=null&&Se.push(Fl(G,fe,Z))),st)break;G=G.return}0<Se.length&&(ne=new ie(ne,Re,null,o,de),ge.push({event:ne,listeners:Se}))}}if((s&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",ne&&o!==Qr&&(Re=o.relatedTarget||o.fromElement)&&($r(Re)||Re[Pn]))break e;if((ie||ne)&&(ne=de.window===de?de:(ne=de.ownerDocument)?ne.defaultView||ne.parentWindow:window,ie?(Re=o.relatedTarget||o.toElement,ie=ee,Re=Re?$r(Re):null,Re!==null&&(st=l(Re),Se=Re.tag,Re!==st||Se!==5&&Se!==27&&Se!==6)&&(Re=null)):(ie=null,Re=ee),ie!==Re)){if(Se=zn,fe="onMouseLeave",Q="onMouseEnter",G="mouse",(n==="pointerout"||n==="pointerover")&&(Se=fl,fe="onPointerLeave",Q="onPointerEnter",G="pointer"),st=ie==null?ne:fr(ie),Z=Re==null?ne:fr(Re),ne=new Se(fe,G+"leave",ie,o,de),ne.target=st,ne.relatedTarget=Z,fe=null,$r(de)===ee&&(Se=new Se(Q,G+"enter",Re,o,de),Se.target=Z,Se.relatedTarget=st,fe=Se),st=fe,ie&&Re)t:{for(Se=ie,Q=Re,G=0,Z=Se;Z;Z=fo(Z))G++;for(Z=0,fe=Q;fe;fe=fo(fe))Z++;for(;0<G-Z;)Se=fo(Se),G--;for(;0<Z-G;)Q=fo(Q),Z--;for(;G--;){if(Se===Q||Q!==null&&Se===Q.alternate)break t;Se=fo(Se),Q=fo(Q)}Se=null}else Se=null;ie!==null&&Sx(ge,ne,ie,Se,!1),Re!==null&&st!==null&&Sx(ge,st,Re,Se,!0)}}e:{if(ne=ee?fr(ee):window,ie=ne.nodeName&&ne.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ne.type==="file")var ve=$p;else if(Mt(ne))if(Gp)ve=y1;else{ve=m1;var Pe=g1}else ie=ne.nodeName,!ie||ie.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&il(ee.elementType)&&(ve=$p):ve=p1;if(ve&&(ve=ve(n,ee))){es(ge,ve,o,de);break e}Pe&&Pe(n,ne,ee),n==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&Is(ne,"number",ne.value)}switch(Pe=ee?fr(ee):window,n){case"focusin":(Mt(Pe)||Pe.contentEditable==="true")&&(Bi=Pe,Kh=ee,pl=null);break;case"focusout":pl=Kh=Bi=null;break;case"mousedown":Xh=!0;break;case"contextmenu":case"mouseup":case"dragend":Xh=!1,e0(ge,o,de);break;case"selectionchange":if(b1)break;case"keydown":case"keyup":e0(ge,o,de)}var we;if(vr)e:{switch(n){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Be?oe(n,o)&&(Ne="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ne="onCompositionStart");Ne&&(v&&o.locale!=="ko"&&(Be||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&Be&&(we=ll()):(pr=de,Cs="value"in pr?pr.value:pr.textContent,Be=!0)),Pe=ad(ee,Ne),0<Pe.length&&(Ne=new dl(Ne,n,null,o,de),ge.push({event:Ne,listeners:Pe}),we?Ne.data=we:(we=pe(o),we!==null&&(Ne.data=we)))),(we=x?Ot(n,o):qe(n,o))&&(Ne=ad(ee,"onBeforeInput"),0<Ne.length&&(Pe=new dl("onBeforeInput","beforeinput",null,o,de),ge.push({event:Pe,listeners:Ne}),Pe.data=we)),tE(ge,n,ee,o,de)}Ex(ge,s)})}function Fl(n,s,o){return{instance:n,listener:s,currentTarget:o}}function ad(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Ua(n,o),f!=null&&u.unshift(Fl(n,f,m)),f=Ua(n,s),f!=null&&u.push(Fl(n,f,m))),n.tag===3)return u;n=n.return}return[]}function fo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Sx(n,s,o,u,f){for(var m=s._reactName,_=[];o!==null&&o!==u;){var E=o,U=E.alternate,ee=E.stateNode;if(E=E.tag,U!==null&&U===u)break;E!==5&&E!==26&&E!==27||ee===null||(U=ee,f?(ee=Ua(o,m),ee!=null&&_.unshift(Fl(o,ee,U))):f||(ee=Ua(o,m),ee!=null&&_.push(Fl(o,ee,U)))),o=o.return}_.length!==0&&n.push({event:s,listeners:_})}var aE=/\r\n?/g,iE=/\u0000|\uFFFD/g;function Nx(n){return(typeof n=="string"?n:""+n).replace(aE,`
`).replace(iE,"")}function Ax(n,s){return s=Nx(s),Nx(n)===s}function id(){}function rt(n,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Vn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Vn(n,""+u);break;case"className":gr(n,"class",u);break;case"tabIndex":gr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":gr(n,o,u);break;case"style":al(n,u,m);break;case"data":if(s!=="object"){gr(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ci(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&rt(n,s,"name",f.name,f,null),rt(n,s,"formEncType",f.formEncType,f,null),rt(n,s,"formMethod",f.formMethod,f,null),rt(n,s,"formTarget",f.formTarget,f,null)):(rt(n,s,"encType",f.encType,f,null),rt(n,s,"method",f.method,f,null),rt(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ci(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=id);break;case"onScroll":u!=null&&Le("scroll",n);break;case"onScrollEnd":u!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ci(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Le("beforetoggle",n),Le("toggle",n),js(n,"popover",u);break;case"xlinkActuate":Yt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Yt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Yt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Yt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Yt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Yt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Yt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Yt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Yt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":js(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=qh.get(o)||o,js(n,o,u))}}function _g(n,s,o,u,f,m){switch(o){case"style":al(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Vn(n,u):(typeof u=="number"||typeof u=="bigint")&&Vn(n,""+u);break;case"onScroll":u!=null&&Le("scroll",n);break;case"onScrollEnd":u!=null&&Le("scrollend",n);break;case"onClick":u!=null&&(n.onclick=id);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ai.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=n[kt]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):js(n,o,u)}}}function Xt(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:rt(n,s,m,_,o,null)}}f&&rt(n,s,"srcSet",o.srcSet,o,null),u&&rt(n,s,"src",o.src,o,null);return;case"input":Le("invalid",n);var E=m=_=f=null,U=null,ee=null;for(u in o)if(o.hasOwnProperty(u)){var de=o[u];if(de!=null)switch(u){case"name":f=de;break;case"type":_=de;break;case"checked":U=de;break;case"defaultChecked":ee=de;break;case"value":m=de;break;case"defaultValue":E=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(a(137,s));break;default:rt(n,s,u,de,o,null)}}Pa(n,m,E,U,ee,_,f,!1),Ii(n);return;case"select":Le("invalid",n),u=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(E=o[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":_=E;break;case"multiple":u=E;default:rt(n,s,f,E,o,null)}s=m,o=_,n.multiple=!!u,s!=null?Wr(n,!!u,s,!1):o!=null&&Wr(n,!!u,o,!0);return;case"textarea":Le("invalid",n),m=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(E=o[_],E!=null))switch(_){case"value":u=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:rt(n,s,_,E,o,null)}Va(n,u,f,m),Ii(n);return;case"option":for(U in o)if(o.hasOwnProperty(U)&&(u=o[U],u!=null))switch(U){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:rt(n,s,U,u,o,null)}return;case"dialog":Le("beforetoggle",n),Le("toggle",n),Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(u=0;u<ql.length;u++)Le(ql[u],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in o)if(o.hasOwnProperty(ee)&&(u=o[ee],u!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:rt(n,s,ee,u,o,null)}return;default:if(il(s)){for(de in o)o.hasOwnProperty(de)&&(u=o[de],u!==void 0&&_g(n,s,de,u,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(u=o[E],u!=null&&rt(n,s,E,u,o,null))}function oE(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,E=null,U=null,ee=null,de=null;for(ie in o){var ge=o[ie];if(o.hasOwnProperty(ie)&&ge!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":U=ge;default:u.hasOwnProperty(ie)||rt(n,s,ie,null,u,ge)}}for(var ne in u){var ie=u[ne];if(ge=o[ne],u.hasOwnProperty(ne)&&(ie!=null||ge!=null))switch(ne){case"type":m=ie;break;case"name":f=ie;break;case"checked":ee=ie;break;case"defaultChecked":de=ie;break;case"value":_=ie;break;case"defaultValue":E=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,s));break;default:ie!==ge&&rt(n,s,ne,ie,u,ge)}}kn(n,_,E,U,ee,de,m,f);return;case"select":ie=_=E=ne=null;for(m in o)if(U=o[m],o.hasOwnProperty(m)&&U!=null)switch(m){case"value":break;case"multiple":ie=U;default:u.hasOwnProperty(m)||rt(n,s,m,null,u,U)}for(f in u)if(m=u[f],U=o[f],u.hasOwnProperty(f)&&(m!=null||U!=null))switch(f){case"value":ne=m;break;case"defaultValue":E=m;break;case"multiple":_=m;default:m!==U&&rt(n,s,f,m,u,U)}s=E,o=_,u=ie,ne!=null?Wr(n,!!o,ne,!1):!!u!=!!o&&(s!=null?Wr(n,!!o,s,!0):Wr(n,!!o,o?[]:"",!1));return;case"textarea":ie=ne=null;for(E in o)if(f=o[E],o.hasOwnProperty(E)&&f!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:rt(n,s,E,null,u,f)}for(_ in u)if(f=u[_],m=o[_],u.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":ne=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&rt(n,s,_,f,u,m)}tt(n,ne,ie);return;case"option":for(var Re in o)if(ne=o[Re],o.hasOwnProperty(Re)&&ne!=null&&!u.hasOwnProperty(Re))switch(Re){case"selected":n.selected=!1;break;default:rt(n,s,Re,null,u,ne)}for(U in u)if(ne=u[U],ie=o[U],u.hasOwnProperty(U)&&ne!==ie&&(ne!=null||ie!=null))switch(U){case"selected":n.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:rt(n,s,U,ne,u,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in o)ne=o[Se],o.hasOwnProperty(Se)&&ne!=null&&!u.hasOwnProperty(Se)&&rt(n,s,Se,null,u,ne);for(ee in u)if(ne=u[ee],ie=o[ee],u.hasOwnProperty(ee)&&ne!==ie&&(ne!=null||ie!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,s));break;default:rt(n,s,ee,ne,u,ie)}return;default:if(il(s)){for(var st in o)ne=o[st],o.hasOwnProperty(st)&&ne!==void 0&&!u.hasOwnProperty(st)&&_g(n,s,st,void 0,u,ne);for(de in u)ne=u[de],ie=o[de],!u.hasOwnProperty(de)||ne===ie||ne===void 0&&ie===void 0||_g(n,s,de,ne,u,ie);return}}for(var Q in o)ne=o[Q],o.hasOwnProperty(Q)&&ne!=null&&!u.hasOwnProperty(Q)&&rt(n,s,Q,null,u,ne);for(ge in u)ne=u[ge],ie=o[ge],!u.hasOwnProperty(ge)||ne===ie||ne==null&&ie==null||rt(n,s,ge,ne,u,ie)}var wg=null,Tg=null;function od(n){return n.nodeType===9?n:n.ownerDocument}function Dx(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rx(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Eg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var kg=null;function lE(){var n=window.event;return n&&n.type==="popstate"?n===kg?!1:(kg=n,!0):(kg=null,!1)}var jx=typeof setTimeout=="function"?setTimeout:void 0,cE=typeof clearTimeout=="function"?clearTimeout:void 0,Ix=typeof Promise=="function"?Promise:void 0,uE=typeof queueMicrotask=="function"?queueMicrotask:typeof Ix<"u"?function(n){return Ix.resolve(null).then(n).catch(dE)}:jx;function dE(n){setTimeout(function(){throw n})}function Qs(n){return n==="head"}function Cx(n,s){var o=s,u=0,f=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var _=n.ownerDocument;if(o&1&&$l(_.documentElement),o&2&&$l(_.body),o&4)for(o=_.head,$l(o),_=o.firstChild;_;){var E=_.nextSibling,U=_.nodeName;_[Ia]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&_.rel.toLowerCase()==="stylesheet"||o.removeChild(_),_=E}}if(f===0){n.removeChild(m),Zl(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);Zl(s)}function Sg(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Sg(o),Rs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function hE(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ia])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=ar(n.nextSibling),n===null)break}return null}function fE(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=ar(n.nextSibling),n===null))return null;return n}function Ng(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function gE(n,s){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function ar(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var Ag=null;function Ox(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}function Mx(n,s,o){switch(s=od(o),n){case"html":if(n=s.documentElement,!n)throw Error(a(452));return n;case"head":if(n=s.head,!n)throw Error(a(453));return n;case"body":if(n=s.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function $l(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Rs(n)}var Yn=new Map,Px=new Set;function ld(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var fs=J.d;J.d={f:mE,r:pE,D:yE,C:xE,L:bE,m:vE,X:wE,S:_E,M:TE};function mE(){var n=fs.f(),s=Zu();return n||s}function pE(n){var s=hr(n);s!==null&&s.tag===5&&s.type==="form"?ny(s):fs.r(n)}var go=typeof document>"u"?null:document;function Vx(n,s,o){var u=go;if(u&&typeof s=="string"&&s){var f=St(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Px.has(f)||(Px.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Xt(s,"link",n),xt(s),u.head.appendChild(s)))}}function yE(n){fs.D(n),Vx("dns-prefetch",n,null)}function xE(n,s){fs.C(n,s),Vx("preconnect",n,s)}function bE(n,s,o){fs.L(n,s,o);var u=go;if(u&&n&&s){var f='link[rel="preload"][as="'+St(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+St(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+St(o.imageSizes)+'"]')):f+='[href="'+St(n)+'"]';var m=f;switch(s){case"style":m=mo(n);break;case"script":m=po(n)}Yn.has(m)||(n=b({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Yn.set(m,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(Gl(m))||s==="script"&&u.querySelector(Yl(m))||(s=u.createElement("link"),Xt(s,"link",n),xt(s),u.head.appendChild(s)))}}function vE(n,s){fs.m(n,s);var o=go;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+St(u)+'"][href="'+St(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=po(n)}if(!Yn.has(m)&&(n=b({rel:"modulepreload",href:n},s),Yn.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Yl(m)))return}u=o.createElement("link"),Xt(u,"link",n),xt(u),o.head.appendChild(u)}}}function _E(n,s,o){fs.S(n,s,o);var u=go;if(u&&n){var f=hn(u).hoistableStyles,m=mo(n);s=s||"default";var _=f.get(m);if(!_){var E={loading:0,preload:null};if(_=u.querySelector(Gl(m)))E.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Yn.get(m))&&Dg(n,o);var U=_=u.createElement("link");xt(U),Xt(U,"link",n),U._p=new Promise(function(ee,de){U.onload=ee,U.onerror=de}),U.addEventListener("load",function(){E.loading|=1}),U.addEventListener("error",function(){E.loading|=2}),E.loading|=4,cd(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:E},f.set(m,_)}}}function wE(n,s){fs.X(n,s);var o=go;if(o&&n){var u=hn(o).hoistableScripts,f=po(n),m=u.get(f);m||(m=o.querySelector(Yl(f)),m||(n=b({src:n,async:!0},s),(s=Yn.get(f))&&Rg(n,s),m=o.createElement("script"),xt(m),Xt(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function TE(n,s){fs.M(n,s);var o=go;if(o&&n){var u=hn(o).hoistableScripts,f=po(n),m=u.get(f);m||(m=o.querySelector(Yl(f)),m||(n=b({src:n,async:!0,type:"module"},s),(s=Yn.get(f))&&Rg(n,s),m=o.createElement("script"),xt(m),Xt(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Lx(n,s,o,u){var f=(f=ae.current)?ld(f):null;if(!f)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=mo(o.href),o=hn(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=mo(o.href);var m=hn(f).hoistableStyles,_=m.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=f.querySelector(Gl(n)))&&!m._p&&(_.instance=m,_.state.loading=5),Yn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Yn.set(n,o),m||EE(f,n,o,_.state))),s&&u===null)throw Error(a(528,""));return _}if(s&&u!==null)throw Error(a(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=po(o),o=hn(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function mo(n){return'href="'+St(n)+'"'}function Gl(n){return'link[rel="stylesheet"]['+n+"]"}function Ux(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function EE(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Xt(s,"link",o),xt(s),n.head.appendChild(s))}function po(n){return'[src="'+St(n)+'"]'}function Yl(n){return"script[async]"+n}function zx(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+St(o.href)+'"]');if(u)return s.instance=u,xt(u),u;var f=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),xt(u),Xt(u,"style",f),cd(u,o.precedence,n),s.instance=u;case"stylesheet":f=mo(o.href);var m=n.querySelector(Gl(f));if(m)return s.state.loading|=4,s.instance=m,xt(m),m;u=Ux(o),(f=Yn.get(f))&&Dg(u,f),m=(n.ownerDocument||n).createElement("link"),xt(m);var _=m;return _._p=new Promise(function(E,U){_.onload=E,_.onerror=U}),Xt(m,"link",u),s.state.loading|=4,cd(m,o.precedence,n),s.instance=m;case"script":return m=po(o.src),(f=n.querySelector(Yl(m)))?(s.instance=f,xt(f),f):(u=o,(f=Yn.get(m))&&(u=b({},o),Rg(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),xt(f),Xt(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,cd(u,o.precedence,n));return s.instance}function cd(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,_=0;_<u.length;_++){var E=u[_];if(E.dataset.precedence===s)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Dg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Rg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var ud=null;function Hx(n,s,o){if(ud===null){var u=new Map,f=ud=new Map;f.set(o,u)}else f=ud,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[Ia]||m[Ct]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=n+_;var E=u.get(_);E?E.push(m):u.set(_,[m])}}return u}function Bx(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function kE(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function qx(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Wl=null;function SE(){}function NE(n,s,o){if(Wl===null)throw Error(a(475));var u=Wl;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=mo(o.href),m=n.querySelector(Gl(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=dd.bind(u),n.then(u,u)),s.state.loading|=4,s.instance=m,xt(m);return}m=n.ownerDocument||n,o=Ux(o),(f=Yn.get(f))&&Dg(o,f),m=m.createElement("link"),xt(m);var _=m;_._p=new Promise(function(E,U){_.onload=E,_.onerror=U}),Xt(m,"link",o),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=dd.bind(u),n.addEventListener("load",s),n.addEventListener("error",s))}}function AE(){if(Wl===null)throw Error(a(475));var n=Wl;return n.stylesheets&&n.count===0&&jg(n,n.stylesheets),0<n.count?function(s){var o=setTimeout(function(){if(n.stylesheets&&jg(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(o)}}:null}function dd(){if(this.count--,this.count===0){if(this.stylesheets)jg(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var hd=null;function jg(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,hd=new Map,s.forEach(DE,n),hd=null,dd.call(n))}function DE(n,s){if(!(s.state.loading&4)){var o=hd.get(n);if(o)var u=o.get(null);else{o=new Map,hd.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=s.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,f),o.set(_,f),this.count++,u=dd.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var Ql={$$typeof:I,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function RE(n,s,o,u,f,m,_,E){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qr(0),this.hiddenUpdates=qr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Fx(n,s,o,u,f,m,_,E,U,ee,de,ge){return n=new RE(n,s,o,_,E,U,ee,ge),s=1,m===!0&&(s|=24),m=Nn(3,null,null,s),n.current=m,m.stateNode=n,s=hf(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},pf(m),n}function $x(n){return n?(n=Gi,n):Gi}function Gx(n,s,o,u,f,m){f=$x(f),u.context===null?u.context=f:u.pendingContext=f,u=Ps(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Vs(n,u,s),o!==null&&(In(o,n,s),kl(o,n,s))}function Yx(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Ig(n,s){Yx(n,s),(n=n.alternate)&&Yx(n,s)}function Wx(n){if(n.tag===13){var s=$i(n,67108864);s!==null&&In(s,n,67108864),Ig(n,67108864)}}var fd=!0;function jE(n,s,o,u){var f=W.T;W.T=null;var m=J.p;try{J.p=2,Cg(n,s,o,u)}finally{J.p=m,W.T=f}}function IE(n,s,o,u){var f=W.T;W.T=null;var m=J.p;try{J.p=8,Cg(n,s,o,u)}finally{J.p=m,W.T=f}}function Cg(n,s,o,u){if(fd){var f=Og(u);if(f===null)vg(n,s,u,gd,o),Kx(n,u);else if(OE(f,n,s,o,u))u.stopPropagation();else if(Kx(n,u),s&4&&-1<CE.indexOf(n)){for(;f!==null;){var m=hr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=er(m.pendingLanes);if(_!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var U=1<<31-nn(_);E.entanglements[1]|=U,_&=~U}Sr(m),(Je&6)===0&&(Xu=Mn()+500,Bl(0))}}break;case 13:E=$i(m,2),E!==null&&In(E,m,2),Zu(),Ig(m,2)}if(m=Og(u),m===null&&vg(n,s,u,gd,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else vg(n,s,u,null,o)}}function Og(n){return n=Ln(n),Mg(n)}var gd=null;function Mg(n){if(gd=null,n=$r(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=h(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return gd=n,null}function Qx(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vh()){case Yo:return 2;case Ei:return 8;case Na:case Lh:return 32;case ki:return 268435456;default:return 32}default:return 32}}var Pg=!1,Ks=null,Xs=null,Js=null,Kl=new Map,Xl=new Map,Zs=[],CE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kx(n,s){switch(n){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":Kl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(s.pointerId)}}function Jl(n,s,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=hr(s),s!==null&&Wx(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function OE(n,s,o,u,f){switch(s){case"focusin":return Ks=Jl(Ks,n,s,o,u,f),!0;case"dragenter":return Xs=Jl(Xs,n,s,o,u,f),!0;case"mouseover":return Js=Jl(Js,n,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return Kl.set(m,Jl(Kl.get(m)||null,n,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Xl.set(m,Jl(Xl.get(m)||null,n,s,o,u,f)),!0}return!1}function Xx(n){var s=$r(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=h(o),s!==null){n.blockedOn=s,Zc(n.priority,function(){if(o.tag===13){var u=jn();u=Ns(u);var f=$i(o,u);f!==null&&In(f,o,u),Ig(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function md(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Og(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Qr=u,o.target.dispatchEvent(u),Qr=null}else return s=hr(o),s!==null&&Wx(s),n.blockedOn=o,!1;s.shift()}return!0}function Jx(n,s,o){md(n)&&o.delete(s)}function ME(){Pg=!1,Ks!==null&&md(Ks)&&(Ks=null),Xs!==null&&md(Xs)&&(Xs=null),Js!==null&&md(Js)&&(Js=null),Kl.forEach(Jx),Xl.forEach(Jx)}function pd(n,s){n.blockedOn===s&&(n.blockedOn=null,Pg||(Pg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ME)))}var yd=null;function Zx(n){yd!==n&&(yd=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){yd===n&&(yd=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(Mg(u||o)===null)continue;break}var m=hr(o);m!==null&&(n.splice(s,3),s-=3,Mf(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Zl(n){function s(U){return pd(U,n)}Ks!==null&&pd(Ks,n),Xs!==null&&pd(Xs,n),Js!==null&&pd(Js,n),Kl.forEach(s),Xl.forEach(s);for(var o=0;o<Zs.length;o++){var u=Zs[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Zs.length&&(o=Zs[0],o.blockedOn===null);)Xx(o),o.blockedOn===null&&Zs.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],_=f[kt]||null;if(typeof m=="function")_||Zx(o);else if(_){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[kt]||null)E=_.formAction;else if(Mg(f)!==null)continue}else E=_.action;typeof E=="function"?o[u+1]=E:(o.splice(u,3),u-=3),Zx(o)}}}function Vg(n){this._internalRoot=n}xd.prototype.render=Vg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(a(409));var o=s.current,u=jn();Gx(o,u,n,s,null,null)},xd.prototype.unmount=Vg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Gx(n.current,2,null,n,null,null),Zu(),s[Pn]=null}};function xd(n){this._internalRoot=n}xd.prototype.unstable_scheduleHydration=function(n){if(n){var s=As();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Zs.length&&s!==0&&s<Zs[o].priority;o++);Zs.splice(o,0,n),o===0&&Xx(n)}};var eb=e.version;if(eb!=="19.1.0")throw Error(a(527,eb,"19.1.0"));J.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=p(s),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var PE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bd.isDisabled&&bd.supportsFiber)try{mt=bd.inject(PE),Xe=bd}catch{}}return tc.createRoot=function(n,s){if(!i(n))throw Error(a(299));var o=!1,u="",f=py,m=yy,_=xy,E=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(E=s.unstable_transitionCallbacks)),s=Fx(n,1,!1,null,null,o,u,f,m,_,E,null),n[Pn]=s.current,bg(n),new Vg(s)},tc.hydrateRoot=function(n,s,o){if(!i(n))throw Error(a(299));var u=!1,f="",m=py,_=yy,E=xy,U=null,ee=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(U=o.unstable_transitionCallbacks),o.formState!==void 0&&(ee=o.formState)),s=Fx(n,1,!0,s,o??null,u,f,m,_,E,U,ee),s.context=$x(null),o=s.current,u=jn(),u=Ns(u),f=Ps(u),f.callback=null,Vs(o,f,u),o=u,s.current.lanes=o,Fr(s,o),Sr(s),n[Pn]=s.current,bg(n),new xd(s)},tc.version="19.1.0",tc}var ub;function WE(){if(ub)return zg.exports;ub=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),zg.exports=YE(),zg.exports}var QE=WE();/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XE=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),db=r=>{const e=XE(r);return e.charAt(0).toUpperCase()+e.slice(1)},h_=(...r)=>r.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim(),JE=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=le.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:i="",children:l,iconNode:h,...g},p)=>le.createElement("svg",{ref:p,...ZE,width:e,height:e,stroke:r,strokeWidth:a?Number(t)*24/Number(e):t,className:h_("lucide",i),...!l&&!JE(g)&&{"aria-hidden":"true"},...g},[...h.map(([y,b])=>le.createElement(y,b)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(r,e)=>{const t=le.forwardRef(({className:a,...i},l)=>le.createElement(ek,{ref:l,iconNode:e,className:h_(`lucide-${KE(db(r))}`,`lucide-${r}`,a),...i}));return t.displayName=db(r),t};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],nk=ke("calendar-days",tk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Rt=ke("calendar",rk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],lm=ke("chart-column",sk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hb=ke("check",ak);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ok=ke("chevron-down",ik);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],dh=ke("chevron-left",lk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ao=ke("chevron-right",ck);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],dk=ke("circle-alert",uk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Dd=ke("circle-check-big",hk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],f_=ke("circle-check",fk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],mk=ke("circle",gk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ha=ke("clock",pk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],xk=ke("cloud-off",yk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],vk=ke("cloud",bk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Fg=ke("coffee",_k);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Tk=ke("copy",wk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],g_=ke("download",Ek);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],m_=ke("file-text",kk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],p_=ke("flag",Sk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],Ak=ke("flame",Nk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],y_=ke("folder-plus",Dk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],jk=ke("funnel",Rk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Ck=ke("globe",Ik);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Mk=ke("history",Ok);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fb=ke("lock",Pk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Lk=ke("log-out",Vk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],zk=ke("mail",Uk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Bk=ke("menu",Hk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=[["path",{d:"M5 12h14",key:"1ays0h"}]],hh=ke("minus",qk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],cm=ke("pause",Fk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],x_=ke("pen",$k);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],um=ke("play",Gk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Tn=ke("plus",Yk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],zd=ke("repeat",Wk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Kk=ke("rotate-ccw",Qk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],b_=ke("save",Xk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Zk=ke("search",Jk);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],v_=ke("settings",e2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],__=ke("square-pen",t2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],gb=ke("tag",n2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],dm=ke("target",r2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],a2=ke("timer",s2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],fi=ke("trash-2",i2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],mb=ke("trending-up",o2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],w_=ke("triangle-alert",l2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],T_=ke("upload",c2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hm=ke("user",u2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],h2=ke("volume-2",d2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],g2=ke("volume-x",f2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],pb=ke("wand-sparkles",m2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],y2=ke("wifi-off",p2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],yb=ke("wifi",x2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Tt=ke("x",b2);function dc(){return Date.now().toString(36)+Math.random().toString(36).substr(2,9)}function v2(r){const[e,t]=r.split(":"),a=parseInt(e),i=a>=12?"오후":"오전",l=a===0?12:a>12?a-12:a;return`${i} ${l}:${t}`}function _2(r){return r.toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}function w2(r,e){const t=new Date,a=new Date(r);if(e){const[i,l]=e.split(":");a.setHours(parseInt(i),parseInt(l))}else a.setHours(23,59,59,999);return a<t}function T2(r){switch(r){case"low":return"text-green-600 bg-green-50 border-green-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"urgent":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}}function E2(r){switch(r){case"low":return"낮음";case"medium":return"보통";case"high":return"높음";case"urgent":return"긴급";default:return"보통"}}function Ic(r){switch(r){case 1:return"첫째주";case 2:return"둘째주";case 3:return"셋째주";case 4:return"넷째주";case 5:return"마지막주";case-1:return"마지막주";default:return`${r}주차`}}function k2(r){return{2024:[{date:"2024-01-01",name:"신정",isHoliday:!0},{date:"2024-02-09",name:"설날연휴",isHoliday:!0},{date:"2024-02-10",name:"설날",isHoliday:!0},{date:"2024-02-11",name:"설날연휴",isHoliday:!0},{date:"2024-02-12",name:"대체공휴일",isHoliday:!0},{date:"2024-03-01",name:"삼일절",isHoliday:!0},{date:"2024-04-10",name:"국회의원선거",isHoliday:!0},{date:"2024-05-05",name:"어린이날",isHoliday:!0},{date:"2024-05-06",name:"대체공휴일",isHoliday:!0},{date:"2024-05-15",name:"부처님오신날",isHoliday:!0},{date:"2024-06-06",name:"현충일",isHoliday:!0},{date:"2024-08-15",name:"광복절",isHoliday:!0},{date:"2024-09-16",name:"추석연휴",isHoliday:!0},{date:"2024-09-17",name:"추석",isHoliday:!0},{date:"2024-09-18",name:"추석연휴",isHoliday:!0},{date:"2024-10-03",name:"개천절",isHoliday:!0},{date:"2024-10-09",name:"한글날",isHoliday:!0},{date:"2024-12-25",name:"크리스마스",isHoliday:!0}],2025:[{date:"2025-01-01",name:"신정",isHoliday:!0},{date:"2025-01-28",name:"설날연휴",isHoliday:!0},{date:"2025-01-29",name:"설날",isHoliday:!0},{date:"2025-01-30",name:"설날연휴",isHoliday:!0},{date:"2025-03-01",name:"삼일절",isHoliday:!0},{date:"2025-05-05",name:"어린이날",isHoliday:!0},{date:"2025-05-13",name:"부처님오신날",isHoliday:!0},{date:"2025-06-06",name:"현충일",isHoliday:!0},{date:"2025-08-15",name:"광복절",isHoliday:!0},{date:"2025-10-05",name:"추석연휴",isHoliday:!0},{date:"2025-10-06",name:"추석",isHoliday:!0},{date:"2025-10-07",name:"추석연휴",isHoliday:!0},{date:"2025-10-08",name:"대체공휴일",isHoliday:!0},{date:"2025-10-03",name:"개천절",isHoliday:!0},{date:"2025-10-09",name:"한글날",isHoliday:!0},{date:"2025-12-25",name:"크리스마스",isHoliday:!0}],2026:[{date:"2026-01-01",name:"신정",isHoliday:!0},{date:"2026-02-16",name:"설날연휴",isHoliday:!0},{date:"2026-02-17",name:"설날",isHoliday:!0},{date:"2026-02-18",name:"설날연휴",isHoliday:!0},{date:"2026-03-01",name:"삼일절",isHoliday:!0},{date:"2026-05-05",name:"어린이날",isHoliday:!0},{date:"2026-05-02",name:"부처님오신날",isHoliday:!0},{date:"2026-06-06",name:"현충일",isHoliday:!0},{date:"2026-08-15",name:"광복절",isHoliday:!0},{date:"2026-09-24",name:"추석연휴",isHoliday:!0},{date:"2026-09-25",name:"추석",isHoliday:!0},{date:"2026-09-26",name:"추석연휴",isHoliday:!0},{date:"2026-10-03",name:"개천절",isHoliday:!0},{date:"2026-10-09",name:"한글날",isHoliday:!0},{date:"2026-12-25",name:"크리스마스",isHoliday:!0}]}[r.toString()]||[]}function hc(r){const e=r.getDay();return e===0||e===6}function fc(r){const e=r.getFullYear(),t=(r.getMonth()+1).toString().padStart(2,"0"),a=r.getDate().toString().padStart(2,"0"),i=`${e}-${t}-${a}`;return k2(e).find(h=>h.date===i)||null}class S2{templates=[];setTemplates(e){this.templates=e}hasConflictingInstance(e,t,a){const i=this.templates.filter(l=>l.title===a.targetTemplateTitle&&l.id!==t&&l.isActive);console.log(`중복 검사 시작: ${e.toDateString()}, 범위: ${a.scope}, 대상: ${a.targetTemplateTitle}`);for(const l of i){const h=this.generateInstancesForTemplate(l);for(const g of h)if(this.checkDateConflict(e,g.date,a.scope))return console.log(`  중복 발견: ${l.title} - ${g.date.toDateString()}`),!0}return!1}checkDateConflict(e,t,a){switch(a){case"same_date":return e.toDateString()===t.toDateString();case"same_week":const i=new Date(e);i.setDate(e.getDate()-e.getDay());const l=new Date(t);return l.setDate(t.getDate()-t.getDay()),i.toDateString()===l.toDateString();case"same_month":return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth();default:return!1}}generateInstancesForTemplate(e){if(!e.isActive)return[];switch(e.recurrenceType){case"weekly":return this.generateWeeklyInstancesRaw(e);case"monthly":return this.generateMonthlyInstancesRaw(e);default:return[]}}calculateWeekOfMonth(e){const t=e.getFullYear(),a=e.getMonth(),i=e.getDate();console.log(`calculateWeekOfMonth: ${e.toDateString()}, year=${t}, month=${a+1}, day=${i}`);const l=new Date(t,a,1),h=new Date(t,a+1,0),g=l.getDay(),p=Math.ceil((i+g)/7),y=h.getDate(),b=Math.ceil((y+g)/7);return console.log(`  firstWeekday=${g}, weekOfMonth=${p}, totalWeeks=${b}`),p===b?(console.log("  마지막주로 판정: -1 반환"),-1):(console.log(`  일반 주차: ${p} 반환`),p)}isLastOccurrenceOfWeekdayInMonth(e){const t=e.getFullYear(),a=e.getMonth(),i=e.getDay(),l=new Date(t,a+1,0);for(let h=l.getDate();h>=1;h--){const g=new Date(t,a,h);if(g.getDay()===i){const p=e.getDate()===h;return console.log(`  ${e.toDateString()}: 같은 요일(${i})의 마지막 날은 ${g.toDateString()}, 일치: ${p}`),p}}return!1}adjustForHolidays(e,t="before"){let a=new Date(e),i=0;const l=10;for(;i<l;){const h=fc(a)!==null,g=hc(a);if(console.log(`공휴일 체크: ${a.toDateString()}, 공휴일=${h}, 주말=${g}`),!h&&!g)break;t==="before"?(a.setDate(a.getDate()-1),console.log(`  공휴일/주말이므로 하루 이전으로: ${a.toDateString()}`)):(a.setDate(a.getDate()+1),console.log(`  공휴일/주말이므로 하루 이후로: ${a.toDateString()}`)),i++}return i>=l?(console.warn("공휴일 조정에서 최대 시도 횟수 초과, 원래 날짜 유지"),e):(a.getTime()!==e.getTime()&&console.log(`공휴일 조정 완료: ${e.toDateString()} → ${a.toDateString()}`),a)}hasDuplicateOnDate(e,t,a){if(!a)return!1;const i=e.toDateString();for(const l of this.templates)if(!(t&&l.id===t)&&l.title===a&&l.isActive){const h=this.generateInstancesForTemplate(l);for(const g of h)if(g.date.toDateString()===i)return console.log(`🔍 중복 발견: "${a}" - ${i}`),!0}return!1}isExceptionDate(e,t,a){if(!t||t.length===0)return!1;for(const i of t)switch(i.type){case"date":const l=e.getDate();if(i.values.includes(l))return!0;break;case"weekday":const h=e.getDay();if(i.values.includes(h))return!0;break;case"week":const g=this.calculateWeekOfMonth(e);if(console.log("예외 체크:",e.toDateString(),"주차:",g,"예외 값들:",i.values),i.values.includes(-1)){const y=this.isLastOccurrenceOfWeekdayInMonth(e);if(console.log("마지막주 체크:",e.toDateString(),"해당 요일의 마지막 발생일:",y),y)return console.log("예외 날짜 제외 (마지막주):",e.toDateString()),!0}if(i.values.includes(g))return console.log("예외 날짜 제외:",e.toDateString(),"주차:",g),!0;break;case"month":const p=e.getMonth()+1;if(i.values.includes(p))return!0;break;case"conflict":if(a){const y=i.values;for(const b of y)if(console.log("중복 예외 검사:",e.toDateString(),b),this.hasConflictingInstance(e,a,b))return console.log("중복으로 인한 예외 처리:",e.toDateString()),!0}break}return!1}generateWeeklyInstancesRaw(e){if(e.recurrenceType!=="weekly"||e.weekday===void 0)return[];const t=[],a=new Date,i=new Date(a.getFullYear(),11,31),l=10080*60*1e3,h=Math.ceil((i.getTime()-a.getTime())/l);for(let g=0;g<=h;g++){const p=new Date(a);let y=(e.weekday-a.getDay()+7)%7;if(g===0&&y===0?y=0:g===0&&y===0&&(y=7),p.setDate(a.getDate()+y+g*7),p>i)break;if(!this.isExceptionDate(p,e.exceptions,e.id)){const b=e.holidayHandling||"before";console.log(`[${e.title}] 원본 날짜: ${p.toDateString()}, 공휴일 처리: ${b}`),console.log(`[${e.title}] 템플릿 전체 데이터:`,e);const w=fc(p)!==null,T=hc(p);console.log(`[${e.title}] 공휴일 여부: ${w}, 주말 여부: ${T}`);const O=this.adjustForHolidays(p,b);if(O.getTime()!==p.getTime()&&console.log(`[${e.title}] 공휴일 조정: ${p.toDateString()} → ${O.toDateString()}`),this.hasDuplicateOnDate(O,e.id,e.title)){console.log(`🚫 중복 할일 발견으로 생성 제외: "${e.title}" - ${O.toDateString()}`);continue}const F=`${e.id}_${O.toISOString().split("T")[0]}`;t.push({id:F,templateId:e.id,date:O,completed:!1,createdAt:new Date,updatedAt:new Date})}}return t}generateMonthlyInstancesRaw(e){if(e.recurrenceType!=="monthly")return[];const t=[],a=new Date,l=12-a.getMonth();for(let h=0;h<l;h++){const g=a.getFullYear(),p=(a.getMonth()+h)%12,y=p<a.getMonth()?g+1:g;let b=null;if(e.monthlyPattern==="weekday"&&e.monthlyWeek&&e.monthlyWeekday!==void 0)b=this.calculateMonthlyWeekday(y,p,e.monthlyWeek,e.monthlyWeekday);else if(e.monthlyDate!==void 0){if(e.monthlyDate===-1)b=new Date(y,p+1,0);else if(b=new Date(y,p,e.monthlyDate),b.getMonth()!==p)continue}if(b&&b>=a&&!this.isExceptionDate(b,e.exceptions,e.id)){const w=e.holidayHandling||"before";console.log(`[${e.title}] 원본 날짜: ${b.toDateString()}, 공휴일 처리: ${w}`),console.log(`[${e.title}] 템플릿 전체 데이터:`,e);const T=fc(b)!==null,O=hc(b);console.log(`[${e.title}] 공휴일 여부: ${T}, 주말 여부: ${O}`);const F=this.adjustForHolidays(b,w);if(F.getTime()!==b.getTime()&&console.log(`[${e.title}] 공휴일 조정: ${b.toDateString()} → ${F.toDateString()}`),this.hasDuplicateOnDate(F,e.id,e.title)){console.log(`🚫 중복 할일 발견으로 생성 제외: "${e.title}" - ${F.toDateString()}`);continue}const $=`${e.id}_${F.toISOString().split("T")[0]}`;t.push({id:$,templateId:e.id,date:F,completed:!1,createdAt:new Date,updatedAt:new Date})}}return t}calculateMonthlyWeekday(e,t,a,i){const l=new Date(e,t+1,0);if(a==="last")for(let h=l.getDate();h>=1;h--){const g=new Date(e,t,h);if(g.getDay()===i)return g}else{const g={first:1,second:2,third:3,fourth:4}[a];let p=0;for(let y=1;y<=l.getDate();y++){const b=new Date(e,t,y);if(b.getDay()===i&&(p++,p===g))return b}}return null}generateWeeklyInstances(e){return this.generateWeeklyInstancesRaw(e)}generateMonthlyInstances(e){return this.generateMonthlyInstancesRaw(e)}generateInstances(e){if(!e.isActive)return[];let t=[];switch(e.recurrenceType){case"weekly":t=this.generateWeeklyInstances(e);break;case"monthly":t=this.generateMonthlyInstances(e);break;default:return[]}return this.removeDuplicateInstances(t)}removeDuplicateInstances(e){const t=new Map;for(const a of e){const i=`${a.templateId}_${a.date.toDateString()}`;(!t.has(i)||t.get(i).createdAt<a.createdAt)&&(t.has(i)&&console.log(`🔧 중복 인스턴스 제거: ${a.date.toDateString()}`),t.set(i,a))}return Array.from(t.values()).sort((a,i)=>a.date.getTime()-i.date.getTime())}convertToTodo(e,t){return{id:`recurring_${e.id}`,title:t.title,description:t.description,completed:e.completed,priority:t.priority,type:t.type,dueDate:e.date,createdAt:e.createdAt,updatedAt:e.updatedAt,completedAt:e.completedAt,tags:[...t.tags||[]]}}getTodayInstances(e){const a=new Date().toDateString();return e.filter(i=>i.date.toDateString()===a)}getWeekInstances(e){const t=new Date,a=new Date(t);a.setDate(t.getDate()-t.getDay());const i=new Date(a);return i.setDate(a.getDate()+6),e.filter(l=>l.date>=a&&l.date<=i)}getMonthInstances(e){const t=new Date,a=new Date(t.getFullYear(),t.getMonth(),1),i=new Date(t.getFullYear(),t.getMonth()+1,0);return e.filter(l=>l.date>=a&&l.date<=i)}removeDuplicateTodos(e){const t=new Map,a=[];for(const h of e){if(!h._isRecurringInstance){a.push(h);continue}const g=`${h.title}_${h.dueDate?.toDateString()||"no-date"}`;t.has(g)?console.log(`🗑️ 중복 반복 할일 제거: "${h.title}" - ${h.dueDate?.toDateString()}`):(t.set(g,h),console.log(`📋 반복 할일 유지: "${h.title}" - ${h.dueDate?.toDateString()}`))}const i=Array.from(t.values()),l=[...a,...i];return console.log(`📊 중복 제거 결과: ${e.length} → ${l.length} (${e.length-l.length}개 제거)`),l.sort((h,g)=>{const p=h.dueDate||new Date(0),y=g.dueDate||new Date(0);return p.getTime()-y.getTime()})}}const xo=new S2,N2=()=>{};var xb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=function(r){const e=[];let t=0;for(let a=0;a<r.length;a++){let i=r.charCodeAt(a);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++a)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},A2=function(r){const e=[];let t=0,a=0;for(;t<r.length;){const i=r[t++];if(i<128)e[a++]=String.fromCharCode(i);else if(i>191&&i<224){const l=r[t++];e[a++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=r[t++],h=r[t++],g=r[t++],p=((i&7)<<18|(l&63)<<12|(h&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[a++]=String.fromCharCode((i&15)<<12|(l&63)<<6|h&63)}}return e.join("")},k_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let i=0;i<r.length;i+=3){const l=r[i],h=i+1<r.length,g=h?r[i+1]:0,p=i+2<r.length,y=p?r[i+2]:0,b=l>>2,w=(l&3)<<4|g>>4;let T=(g&15)<<2|y>>6,O=y&63;p||(O=64,h||(T=64)),a.push(t[b],t[w],t[T],t[O])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(E_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):A2(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let i=0;i<r.length;){const l=t[r.charAt(i++)],g=i<r.length?t[r.charAt(i)]:0;++i;const y=i<r.length?t[r.charAt(i)]:64;++i;const w=i<r.length?t[r.charAt(i)]:64;if(++i,l==null||g==null||y==null||w==null)throw new D2;const T=l<<2|g>>4;if(a.push(T),y!==64){const O=g<<4&240|y>>2;if(a.push(O),w!==64){const F=y<<6&192|w;a.push(F)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class D2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R2=function(r){const e=E_(r);return k_.encodeByteArray(e,!0)},Hd=function(r){return R2(r).replace(/\./g,"")},S_=function(r){try{return k_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=()=>j2().__FIREBASE_DEFAULTS__,C2=()=>{if(typeof process>"u"||typeof xb>"u")return;const r=xb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},O2=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&S_(r[1]);return e&&JSON.parse(e)},fh=()=>{try{return N2()||I2()||C2()||O2()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},N_=r=>fh()?.emulatorHosts?.[r],A_=r=>{const e=N_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},D_=()=>fh()?.config,R_=r=>fh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hm(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",i=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${a}`,aud:a,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Hd(JSON.stringify(t)),Hd(JSON.stringify(h)),""].join(".")}const gc={};function P2(){const r={prod:[],emulator:[]};for(const e of Object.keys(gc))gc[e]?r.emulator.push(e):r.prod.push(e);return r}function V2(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let bb=!1;function Bm(r,e){if(typeof window>"u"||typeof document>"u"||!bi(window.location.host)||gc[r]===e||gc[r]||bb)return;gc[r]=e;function t(T){return`__firebase__banner__${T}`}const a="__firebase__banner",l=P2().prod.length>0;function h(){const T=document.getElementById(a);T&&T.remove()}function g(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,O){T.setAttribute("width","24"),T.setAttribute("id",O),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{bb=!0,h()},T}function b(T,O){T.setAttribute("id",O),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=V2(a),O=t("text"),F=document.getElementById(O)||document.createElement("span"),$=t("learnmore"),P=document.getElementById($)||document.createElement("a"),S=t("preprendIcon"),L=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const I=T.element;g(I),b(P,$);const V=y();p(L,S),I.append(L,F,P,V),document.body.appendChild(I)}l?(F.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function U2(){const r=fh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function z2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function H2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function B2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function q2(){const r=un();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function F2(){return!U2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $2(){try{return typeof indexedDB=="object"}catch{return!1}}function G2(){return new Promise((r,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(a);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(a),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="FirebaseError";class Hr extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=Y2,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cc.prototype.create)}}class Cc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},i=`${this.service}/${e}`,l=this.errors[e],h=l?W2(l,a):"Error",g=`${this.serviceName}: ${h} (${i}).`;return new Hr(i,g,a)}}function W2(r,e){return r.replace(Q2,(t,a)=>{const i=e[a];return i!=null?String(i):`<${a}?>`})}const Q2=/\{\$([^}]+)}/g;function K2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function fa(r,e){if(r===e)return!0;const t=Object.keys(r),a=Object.keys(e);for(const i of t){if(!a.includes(i))return!1;const l=r[i],h=e[i];if(vb(l)&&vb(h)){if(!fa(l,h))return!1}else if(l!==h)return!1}for(const i of a)if(!t.includes(i))return!1;return!0}function vb(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(r){const e=[];for(const[t,a]of Object.entries(r))Array.isArray(a)?a.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function ac(r){const e={};return r.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[i,l]=a.split("=");e[decodeURIComponent(i)]=decodeURIComponent(l)}}),e}function ic(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function X2(r,e){const t=new J2(r,e);return t.subscribe.bind(t)}class J2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let i;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");Z2(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:a},i.next===void 0&&(i.next=$g),i.error===void 0&&(i.error=$g),i.complete===void 0&&(i.complete=$g);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z2(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function $g(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(r){return r&&r._delegate?r._delegate:r}class ga{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new M2;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&a.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nS(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:i});a.resolve(l)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(l);a===g&&h.resolve(i)}return i}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(a)??new Set;i.add(e),this.onInitCallbacks.set(a,i);const l=this.instances.get(a);return l&&e(l,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const i of a)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:tS(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tS(r){return r===oi?void 0:r}function nS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new eS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const sS={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},aS=Ue.INFO,iS={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},oS=(r,e,...t)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),i=iS[e];if(i)console[i](`[${a}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qm{constructor(e){this.name=e,this._logLevel=aS,this._logHandler=oS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const lS=(r,e)=>e.some(t=>r instanceof t);let _b,wb;function cS(){return _b||(_b=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uS(){return wb||(wb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I_=new WeakMap,fm=new WeakMap,C_=new WeakMap,Gg=new WeakMap,Fm=new WeakMap;function dS(r){const e=new Promise((t,a)=>{const i=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(la(r.result)),i()},h=()=>{a(r.error),i()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&I_.set(t,r)}).catch(()=>{}),Fm.set(e,r),e}function hS(r){if(fm.has(r))return;const e=new Promise((t,a)=>{const i=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),i()},h=()=>{a(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});fm.set(r,e)}let gm={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return fm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||C_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return la(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function fS(r){gm=r(gm)}function gS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=r.call(Yg(this),e,...t);return C_.set(a,e.sort?e.sort():[e]),la(a)}:uS().includes(r)?function(...e){return r.apply(Yg(this),e),la(I_.get(this))}:function(...e){return la(r.apply(Yg(this),e))}}function mS(r){return typeof r=="function"?gS(r):(r instanceof IDBTransaction&&hS(r),lS(r,cS())?new Proxy(r,gm):r)}function la(r){if(r instanceof IDBRequest)return dS(r);if(Gg.has(r))return Gg.get(r);const e=mS(r);return e!==r&&(Gg.set(r,e),Fm.set(e,r)),e}const Yg=r=>Fm.get(r);function pS(r,e,{blocked:t,upgrade:a,blocking:i,terminated:l}={}){const h=indexedDB.open(r,e),g=la(h);return a&&h.addEventListener("upgradeneeded",p=>{a(la(h.result),p.oldVersion,p.newVersion,la(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),g.then(p=>{l&&p.addEventListener("close",()=>l()),i&&p.addEventListener("versionchange",y=>i(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const yS=["get","getKey","getAll","getAllKeys","count"],xS=["put","add","delete","clear"],Wg=new Map;function Tb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Wg.get(e))return Wg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,i=xS.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(i||yS.includes(t)))return;const l=async function(h,...g){const p=this.transaction(h,i?"readwrite":"readonly");let y=p.store;return a&&(y=y.index(g.shift())),(await Promise.all([y[t](...g),i&&p.done]))[0]};return Wg.set(e,l),l}fS(r=>({...r,get:(e,t,a)=>Tb(e,t)||r.get(e,t,a),has:(e,t)=>!!Tb(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vS(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function vS(r){return r.getComponent()?.type==="VERSION"}const mm="@firebase/app",Eb="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new qm("@firebase/app"),_S="@firebase/app-compat",wS="@firebase/analytics-compat",TS="@firebase/analytics",ES="@firebase/app-check-compat",kS="@firebase/app-check",SS="@firebase/auth",NS="@firebase/auth-compat",AS="@firebase/database",DS="@firebase/data-connect",RS="@firebase/database-compat",jS="@firebase/functions",IS="@firebase/functions-compat",CS="@firebase/installations",OS="@firebase/installations-compat",MS="@firebase/messaging",PS="@firebase/messaging-compat",VS="@firebase/performance",LS="@firebase/performance-compat",US="@firebase/remote-config",zS="@firebase/remote-config-compat",HS="@firebase/storage",BS="@firebase/storage-compat",qS="@firebase/firestore",FS="@firebase/ai",$S="@firebase/firestore-compat",GS="firebase",YS="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]",WS={[mm]:"fire-core",[_S]:"fire-core-compat",[TS]:"fire-analytics",[wS]:"fire-analytics-compat",[kS]:"fire-app-check",[ES]:"fire-app-check-compat",[SS]:"fire-auth",[NS]:"fire-auth-compat",[AS]:"fire-rtdb",[DS]:"fire-data-connect",[RS]:"fire-rtdb-compat",[jS]:"fire-fn",[IS]:"fire-fn-compat",[CS]:"fire-iid",[OS]:"fire-iid-compat",[MS]:"fire-fcm",[PS]:"fire-fcm-compat",[VS]:"fire-perf",[LS]:"fire-perf-compat",[US]:"fire-rc",[zS]:"fire-rc-compat",[HS]:"fire-gcs",[BS]:"fire-gcs-compat",[qS]:"fire-fst",[$S]:"fire-fst-compat",[FS]:"fire-vertex","fire-js":"fire-js",[GS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new Map,QS=new Map,ym=new Map;function kb(r,e){try{r.container.addComponent(e)}catch(t){bs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function gi(r){const e=r.name;if(ym.has(e))return bs.debug(`There were multiple attempts to register component ${e}.`),!1;ym.set(e,r);for(const t of vc.values())kb(t,r);for(const t of QS.values())kb(t,r);return!0}function gh(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function pn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ca=new Cc("app","Firebase",KS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ca.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=YS;function O_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const a={name:pm,automaticDataCollectionEnabled:!0,...e},i=a.name;if(typeof i!="string"||!i)throw ca.create("bad-app-name",{appName:String(i)});if(t||(t=D_()),!t)throw ca.create("no-options");const l=vc.get(i);if(l){if(fa(t,l.options)&&fa(a,l.config))return l;throw ca.create("duplicate-app",{appName:i})}const h=new rS(i);for(const p of ym.values())h.addComponent(p);const g=new XS(t,a,h);return vc.set(i,g),g}function $m(r=pm){const e=vc.get(r);if(!e&&r===pm&&D_())return O_();if(!e)throw ca.create("no-app",{appName:r});return e}function JS(){return Array.from(vc.values())}function jr(r,e,t){let a=WS[r]??r;t&&(a+=`-${t}`);const i=a.match(/\s|\//),l=e.match(/\s|\//);if(i||l){const h=[`Unable to register library "${a}" with version "${e}":`];i&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bs.warn(h.join(" "));return}gi(new ga(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="firebase-heartbeat-database",eN=1,_c="firebase-heartbeat-store";let Qg=null;function M_(){return Qg||(Qg=pS(ZS,eN,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(_c)}catch(t){console.warn(t)}}}}).catch(r=>{throw ca.create("idb-open",{originalErrorMessage:r.message})})),Qg}async function tN(r){try{const t=(await M_()).transaction(_c),a=await t.objectStore(_c).get(P_(r));return await t.done,a}catch(e){if(e instanceof Hr)bs.warn(e.message);else{const t=ca.create("idb-get",{originalErrorMessage:e?.message});bs.warn(t.message)}}}async function Sb(r,e){try{const a=(await M_()).transaction(_c,"readwrite");await a.objectStore(_c).put(e,P_(r)),await a.done}catch(t){if(t instanceof Hr)bs.warn(t.message);else{const a=ca.create("idb-set",{originalErrorMessage:t?.message});bs.warn(a.message)}}}function P_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=1024,rN=30;class sN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new iN(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Nb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:t}),this._heartbeatsCache.heartbeats.length>rN){const i=oN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){bs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Nb(),{heartbeatsToSend:t,unsentEntries:a}=aN(this._heartbeatsCache.heartbeats),i=Hd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return bs.warn(e),""}}}function Nb(){return new Date().toISOString().substring(0,10)}function aN(r,e=nN){const t=[];let a=r.slice();for(const i of r){const l=t.find(h=>h.agent===i.agent);if(l){if(l.dates.push(i.date),Ab(t)>e){l.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Ab(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class iN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $2()?G2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Sb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Sb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Ab(r){return Hd(JSON.stringify({version:2,heartbeats:r})).length}function oN(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let a=1;a<r.length;a++)r[a].date<t&&(t=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(r){gi(new ga("platform-logger",e=>new bS(e),"PRIVATE")),gi(new ga("heartbeat",e=>new sN(e),"PRIVATE")),jr(mm,Eb,r),jr(mm,Eb,"esm2020"),jr("fire-js","")}lN("");function V_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cN=V_,L_=new Cc("auth","Firebase",V_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new qm("@firebase/auth");function uN(r,...e){Bd.logLevel<=Ue.WARN&&Bd.warn(`Auth (${vi}): ${r}`,...e)}function Rd(r,...e){Bd.logLevel<=Ue.ERROR&&Bd.error(`Auth (${vi}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(r,...e){throw Ym(r,...e)}function cr(r,...e){return Ym(r,...e)}function Gm(r,e,t){const a={...cN(),[e]:t};return new Cc("auth","Firebase",a).create(e,{appName:r.name})}function Ir(r){return Gm(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dN(r,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Jn(r,"argument-error"),Gm(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ym(r,...e){if(typeof r!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=r.name),r._errorFactory.create(t,...a)}return L_.create(r,...e)}function Ae(r,e,...t){if(!r)throw Ym(e,...t)}function ps(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Rd(e),new Error(e)}function vs(r,e){r||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(){return typeof self<"u"&&self.location?.href||""}function hN(){return Db()==="http:"||Db()==="https:"}function Db(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hN()||H2()||"connection"in navigator)?navigator.onLine:!0}function gN(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile=L2()||B2()}get(){return fN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(r,e){vs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yN=new Mc(3e4,6e4);function _a(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ks(r,e,t,a,i={}){return z_(r,i,async()=>{let l={},h={};a&&(e==="GET"?h=a:l={body:JSON.stringify(a)});const g=Oc({key:r.config.apiKey,...h}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:p,...l};return z2()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&bi(r.emulatorConfig.host)&&(y.credentials="include"),U_.fetch()(await H_(r,r.config.apiHost,t,g),y)})}async function z_(r,e,t){r._canInitEmulator=!1;const a={...mN,...e};try{const i=new bN(r),l=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw vd(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const g=l.ok?h.errorMessage:h.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw vd(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw vd(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw vd(r,"user-disabled",h);const b=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Gm(r,b,y);Jn(r,b)}}catch(i){if(i instanceof Hr)throw i;Jn(r,"network-request-failed",{message:String(i)})}}async function Pc(r,e,t,a,i={}){const l=await ks(r,e,t,a,i);return"mfaPendingCredential"in l&&Jn(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function H_(r,e,t,a){const i=`${e}${t}?${a}`,l=r,h=l.config.emulator?Wm(r.config,i):`${r.config.apiScheme}://${i}`;return pN.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function xN(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(cr(this.auth,"network-request-failed")),yN.get())})}}function vd(r,e,t){const a={appName:r.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const i=cr(r,e,a);return i.customData._tokenResponse=t,i}function Rb(r){return r!==void 0&&r.enterprise!==void 0}class vN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _N(r,e){return ks(r,"GET","/v2/recaptchaConfig",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(r,e){return ks(r,"POST","/v1/accounts:delete",e)}async function qd(r,e){return ks(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TN(r,e=!1){const t=ft(r),a=await t.getIdToken(e),i=Qm(a);Ae(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,h=l?.sign_in_provider;return{claims:i,token:a,authTime:mc(Kg(i.auth_time)),issuedAtTime:mc(Kg(i.iat)),expirationTime:mc(Kg(i.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Kg(r){return Number(r)*1e3}function Qm(r){const[e,t,a]=r.split(".");if(e===void 0||t===void 0||a===void 0)return Rd("JWT malformed, contained fewer than 3 sections"),null;try{const i=S_(t);return i?JSON.parse(i):(Rd("Failed to decode base64 JWT payload"),null)}catch(i){return Rd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function jb(r){const e=Qm(r);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(r,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Hr&&EN(a)&&r.auth.currentUser===r&&await r.auth.signOut(),a}}function EN({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(r){const e=r.auth,t=await r.getIdToken(),a=await Do(r,qd(e,{idToken:t}));Ae(a?.users.length,e,"internal-error");const i=a.users[0];r._notifyReloadListener(i);const l=i.providerUserInfo?.length?B_(i.providerUserInfo):[],h=NN(r.providerData,l),g=r.isAnonymous,p=!(r.email&&i.passwordHash)&&!h?.length,y=g?p:!1,b={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:h,metadata:new bm(i.createdAt,i.lastLoginAt),isAnonymous:y};Object.assign(r,b)}async function SN(r){const e=ft(r);await Fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NN(r,e){return[...r.filter(a=>!e.some(i=>i.providerId===a.providerId)),...e]}function B_(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(r,e){const t=await z_(r,{},async()=>{const a=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:l}=r.config,h=await H_(r,i,"/v1/token",`key=${l}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:a};return r.emulatorConfig&&bi(r.emulatorConfig.host)&&(p.credentials="include"),U_.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DN(r,e){return ks(r,"POST","/v2/accounts:revokeToken",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=jb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:i,expiresIn:l}=await AN(e,t);this.updateTokensAndExpiration(a,i,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:i,expirationTime:l}=t,h=new To;return a&&(Ae(typeof a=="string","internal-error",{appName:e}),h.refreshToken=a),i&&(Ae(typeof i=="string","internal-error",{appName:e}),h.accessToken=i),l&&(Ae(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(r,e){Ae(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class or{constructor({uid:e,auth:t,stsTokenManager:a,...i}){this.providerId="firebase",this.proactiveRefresh=new kN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new bm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Do(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return TN(this,e)}reload(){return SN(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new or({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await Fd(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(Ir(this.auth));const e=await this.getIdToken();return await Do(this,wN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,i=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,g=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:w,emailVerified:T,isAnonymous:O,providerData:F,stsTokenManager:$}=t;Ae(w&&$,e,"internal-error");const P=To.fromJSON(this.name,$);Ae(typeof w=="string",e,"internal-error"),ta(a,e.name),ta(i,e.name),Ae(typeof T=="boolean",e,"internal-error"),Ae(typeof O=="boolean",e,"internal-error"),ta(l,e.name),ta(h,e.name),ta(g,e.name),ta(p,e.name),ta(y,e.name),ta(b,e.name);const S=new or({uid:w,auth:e,email:i,emailVerified:T,displayName:a,isAnonymous:O,photoURL:h,phoneNumber:l,tenantId:g,stsTokenManager:P,createdAt:y,lastLoginAt:b});return F&&Array.isArray(F)&&(S.providerData=F.map(L=>({...L}))),p&&(S._redirectEventId=p),S}static async _fromIdTokenResponse(e,t,a=!1){const i=new To;i.updateFromServerResponse(t);const l=new or({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:a});return await Fd(l),l}static async _fromGetAccountInfoResponse(e,t,a){const i=t.users[0];Ae(i.localId!==void 0,"internal-error");const l=i.providerUserInfo!==void 0?B_(i.providerUserInfo):[],h=!(i.email&&i.passwordHash)&&!l?.length,g=new To;g.updateFromIdToken(a);const p=new or({uid:i.localId,auth:e,stsTokenManager:g,isAnonymous:h}),y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new bm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!l?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=new Map;function ys(r){vs(r instanceof Function,"Expected a class definition");let e=Ib.get(r);return e?(vs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ib.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}q_.type="NONE";const Cb=q_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(r,e,t){return`firebase:${r}:${e}:${t}`}class Eo{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:i,name:l}=this.auth;this.fullUserKey=jd(this.userKey,i.apiKey,l),this.fullPersistenceKey=jd("persistence",i.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await qd(this.auth,{idToken:e}).catch(()=>{});return t?or._fromGetAccountInfoResponse(this.auth,t,e):null}return or._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Eo(ys(Cb),e,a);const i=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=i[0]||ys(Cb);const h=jd(a,e.config.apiKey,e.name);let g=null;for(const y of t)try{const b=await y._get(h);if(b){let w;if(typeof b=="string"){const T=await qd(e,{idToken:b}).catch(()=>{});if(!T)break;w=await or._fromGetAccountInfoResponse(e,T,b)}else w=or._fromJSON(e,b);y!==l&&(g=w),l=y;break}}catch{}const p=i.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Eo(l,e,a):(l=p[0],g&&await l._set(h,g.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Eo(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q_(e))return"Blackberry";if(K_(e))return"Webos";if($_(e))return"Safari";if((e.includes("chrome/")||G_(e))&&!e.includes("edge/"))return"Chrome";if(W_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=r.match(t);if(a?.length===2)return a[1]}return"Other"}function F_(r=un()){return/firefox\//i.test(r)}function $_(r=un()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G_(r=un()){return/crios\//i.test(r)}function Y_(r=un()){return/iemobile/i.test(r)}function W_(r=un()){return/android/i.test(r)}function Q_(r=un()){return/blackberry/i.test(r)}function K_(r=un()){return/webos/i.test(r)}function Km(r=un()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function RN(r=un()){return Km(r)&&!!window.navigator?.standalone}function jN(){return q2()&&document.documentMode===10}function X_(r=un()){return Km(r)||W_(r)||K_(r)||Q_(r)||/windows phone/i.test(r)||Y_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(r,e=[]){let t;switch(r){case"Browser":t=Ob(un());break;case"Worker":t=`${Ob(un())}-${r}`;break;default:t=r}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vi}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((h,g)=>{try{const p=e(l);h(p)}catch(p){g(p)}});a.onAbort=t,this.queue.push(a);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(r,e={}){return ks(r,"GET","/v2/passwordPolicy",_a(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=6;class MN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ON,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let i=0;i<e.length;i++)a=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,i,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,t,a,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mb(this),this.idTokenSubscription=new Mb(this),this.beforeStateQueue=new IN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ys(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Eo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await qd(this,{idToken:e}),a=await or._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(pn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=a?._redirectEventId,g=await this.tryRedirectSignIn(e);(!l||l===h)&&g?.user&&(a=g.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(l){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(Ir(this));const t=e?ft(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(Ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(Ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CN(this),t=new MN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await DN(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ys(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await Eo.create(this,[ys(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,i){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(g,this,"internal-error"),g.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,a,i);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&uN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ss(r){return ft(r)}class Mb{constructor(e){this.auth=e,this.observer=null,this.addObserver=X2(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VN(r){mh=r}function Z_(r){return mh.loadJS(r)}function LN(){return mh.recaptchaEnterpriseScript}function UN(){return mh.gapiScript}function zN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class HN{constructor(){this.enterprise=new BN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class BN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const qN="recaptcha-enterprise",ew="NO_RECAPTCHA";class FN{constructor(e){this.type=qN,this.auth=Ss(e)}async verify(e="verify",t=!1){async function a(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,g)=>{_N(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new vN(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(p=>{g(p)})})}function i(l,h,g){const p=window.grecaptcha;Rb(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(ew)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HN().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{a(this.auth).then(g=>{if(!t&&Rb(window.grecaptcha))i(g,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=LN();p.length!==0&&(p+=g),Z_(p).then(()=>{i(g,l,h)}).catch(y=>{h(y)})}}).catch(g=>{h(g)})})}}async function Pb(r,e,t,a=!1,i=!1){const l=new FN(r);let h;if(i)h=ew;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const g={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:h}):Object.assign(g,{captchaResponse:h}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function vm(r,e,t,a,i){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Pb(r,e,t,t==="getOobCode");return a(r,l)}else return a(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Pb(r,e,t,t==="getOobCode");return a(r,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(r,e){const t=gh(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),l=t.getOptions();if(fa(l,e??{}))return i;Jn(i,"already-initialized")}return t.initialize({options:e})}function GN(r,e){const t=e?.persistence||[],a=(Array.isArray(t)?t:[t]).map(ys);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(a,e?.popupRedirectResolver)}function YN(r,e,t){const a=Ss(r);Ae(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const i=!1,l=tw(e),{host:h,port:g}=WN(e),p=g===null?"":`:${g}`,y={url:`${l}//${h}${p}/`},b=Object.freeze({host:h,port:g,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!a._canInitEmulator){Ae(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Ae(fa(y,a.config.emulator)&&fa(b,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=b,a.settings.appVerificationDisabledForTesting=!0,bi(h)?(Hm(`${l}//${h}${p}`),Bm("Auth",!0)):QN()}function tw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function WN(r){const e=tw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(a);if(i){const l=i[1];return{host:l,port:Vb(a.substr(l.length+1))}}else{const[l,h]=a.split(":");return{host:l,port:Vb(h)}}}function Vb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function QN(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,t){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function KN(r,e){return ks(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(r,e){return Pc(r,"POST","/v1/accounts:signInWithPassword",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(r,e){return Pc(r,"POST","/v1/accounts:signInWithEmailLink",_a(r,e))}async function ZN(r,e){return Pc(r,"POST","/v1/accounts:signInWithEmailLink",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends Xm{constructor(e,t,a,i=null){super("password",a),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new wc(e,t,"password")}static _fromEmailAndCode(e,t,a=null){return new wc(e,t,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,t,"signInWithPassword",XN);case"emailLink":return JN(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const a={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,a,"signUpPassword",KN);case"emailLink":return ZN(e,{idToken:t,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(r,e){return Pc(r,"POST","/v1/accounts:signInWithIdp",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="http://localhost";class mi extends Xm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:i,...l}=t;if(!a||!i)return null;const h=new mi(a,i);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return ko(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,ko(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ko(e,t)}buildRequest(){const e={requestUri:eA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nA(r){const e=ac(ic(r)).link,t=e?ac(ic(e)).deep_link_id:null,a=ac(ic(r)).deep_link_id;return(a?ac(ic(a)).link:null)||a||t||e||r}class Jm{constructor(e){const t=ac(ic(e)),a=t.apiKey??null,i=t.oobCode??null,l=tA(t.mode??null);Ae(a&&i&&l,"argument-error"),this.apiKey=a,this.operation=l,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=nA(e);try{return new Jm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.providerId=Lo.PROVIDER_ID}static credential(e,t){return wc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const a=Jm.parseLink(t);return Ae(a,"argument-error"),wc._fromEmailAndCode(e,a.code,a.tenantId)}}Lo.PROVIDER_ID="password";Lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends Zm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Vc{constructor(){super("facebook.com")}static credential(e){return mi._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sa.credential(e.oauthAccessToken)}catch{return null}}}sa.FACEBOOK_SIGN_IN_METHOD="facebook.com";sa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mi._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return ms.credential(t,a)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends Vc{constructor(){super("github.com")}static credential(e){return mi._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return aa.credential(e.oauthAccessToken)}catch{return null}}}aa.GITHUB_SIGN_IN_METHOD="github.com";aa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Vc{constructor(){super("twitter.com")}static credential(e,t){return mi._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return ia.credential(t,a)}catch{return null}}}ia.TWITTER_SIGN_IN_METHOD="twitter.com";ia.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nw(r,e){return Pc(r,"POST","/v1/accounts:signUp",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,i=!1){const l=await or._fromIdTokenResponse(e,a,i),h=Lb(a);return new _s({user:l,providerId:h,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const i=Lb(a);return new _s({user:e,providerId:i,_tokenResponse:a,operationType:t})}}function Lb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(r){if(pn(r.app))return Promise.reject(Ir(r));const e=Ss(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new _s({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await nw(e,{returnSecureToken:!0}),a=await _s._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends Hr{constructor(e,t,a,i){super(t.code,t.message),this.operationType=a,this.user=i,Object.setPrototypeOf(this,$d.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,i){return new $d(e,t,a,i)}}function rw(r,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?$d._fromErrorAndOperation(r,l,e,a):l})}async function sA(r,e,t=!1){const a=await Do(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return _s._forOperation(r,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(r,e,t=!1){const{auth:a}=r;if(pn(a.app))return Promise.reject(Ir(a));const i="reauthenticate";try{const l=await Do(r,rw(a,i,e,r),t);Ae(l.idToken,a,"internal-error");const h=Qm(l.idToken);Ae(h,a,"internal-error");const{sub:g}=h;return Ae(r.uid===g,a,"user-mismatch"),_s._forOperation(r,i,l)}catch(l){throw l?.code==="auth/user-not-found"&&Jn(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sw(r,e,t=!1){if(pn(r.app))return Promise.reject(Ir(r));const a="signIn",i=await rw(r,a,e),l=await _s._fromIdTokenResponse(r,a,i);return t||await r._updateCurrentUser(l.user),l}async function iA(r,e){return sw(Ss(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aw(r){const e=Ss(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function oA(r,e,t){if(pn(r.app))return Promise.reject(Ir(r));const a=Ss(r),h=await vm(a,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nw).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&aw(r),p}),g=await _s._fromIdTokenResponse(a,"signIn",h);return await a._updateCurrentUser(g.user),g}function lA(r,e,t){return pn(r.app)?Promise.reject(Ir(r)):iA(ft(r),Lo.credential(e,t)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&aw(r),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(r,e){return ks(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const a=ft(r),l={idToken:await a.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},h=await Do(a,cA(a.auth,l));a.displayName=h.displayName||null,a.photoURL=h.photoUrl||null;const g=a.providerData.find(({providerId:p})=>p==="password");g&&(g.displayName=a.displayName,g.photoURL=a.photoURL),await a._updateTokensIfNecessary(h)}function dA(r,e,t,a){return ft(r).onIdTokenChanged(e,t,a)}function hA(r,e,t){return ft(r).beforeAuthStateChanged(e,t)}function fA(r,e,t,a){return ft(r).onAuthStateChanged(e,t,a)}function gA(r){return ft(r).signOut()}const Gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gd,"1"),this.storage.removeItem(Gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=1e3,pA=10;class ow extends iw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=X_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),i=this.localCache[t];a!==i&&e(t,i,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,g,p)=>{this.notifyListeners(h,p)});return}const a=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const h=this.storage.getItem(a);!t&&this.localCache[a]===h||this.notifyListeners(a,h)},l=this.storage.getItem(a);jN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,pA):i()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const i of Array.from(a))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},mA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ow.type="LOCAL";const yA=ow;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw extends iw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lw.type="SESSION";const cw=lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const a=new ph(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:i,data:l}=t.data,h=this.handlersMap[i];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:i});const g=Array.from(h).map(async y=>y(t.origin,l)),p=await xA(g);t.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(r="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,h;return new Promise((g,p)=>{const y=ep("",20);i.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},a);h={messageChannel:i,onMessage(w){const T=w;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),g(T.data.response);break;default:clearTimeout(b),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),i.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[i.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(){return window}function vA(r){Cr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(){return typeof Cr().WorkerGlobalScope<"u"&&typeof Cr().importScripts=="function"}async function _A(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wA(){return navigator?.serviceWorker?.controller||null}function TA(){return uw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="firebaseLocalStorageDb",EA=1,Yd="firebaseLocalStorage",hw="fbase_key";class Lc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function yh(r,e){return r.transaction([Yd],e?"readwrite":"readonly").objectStore(Yd)}function kA(){const r=indexedDB.deleteDatabase(dw);return new Lc(r).toPromise()}function _m(){const r=indexedDB.open(dw,EA);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const a=r.result;try{a.createObjectStore(Yd,{keyPath:hw})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const a=r.result;a.objectStoreNames.contains(Yd)?e(a):(a.close(),await kA(),e(await _m()))})})}async function Ub(r,e,t){const a=yh(r,!0).put({[hw]:e,value:t});return new Lc(a).toPromise()}async function SA(r,e){const t=yh(r,!1).get(e),a=await new Lc(t).toPromise();return a===void 0?null:a.value}function zb(r,e){const t=yh(r,!0).delete(e);return new Lc(t).toPromise()}const NA=800,AA=3;class fw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _m(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>AA)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ph._getInstance(TA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _A(),!this.activeServiceWorker)return;this.sender=new bA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _m();return await Ub(e,Gd,"1"),await zb(e,Gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>Ub(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>SA(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>zb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const l=yh(i,!1).getAll();return new Lc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:i,value:l}of e)a.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!a.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const i of Array.from(a))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fw.type="LOCAL";const DA=fw;new Mc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(r,e){return e?ys(e):(Ae(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp extends Xm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function RA(r){return sw(r.auth,new tp(r),r.bypassAuthState)}function jA(r){const{auth:e,user:t}=r;return Ae(t,e,"internal-error"),aA(t,new tp(r),r.bypassAuthState)}async function IA(r){const{auth:e,user:t}=r;return Ae(t,e,"internal-error"),sA(t,new tp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,t,a,i,l=!1){this.auth=e,this.resolver=a,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:i,tenantId:l,error:h,type:g}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RA;case"linkViaPopup":case"linkViaRedirect":return IA;case"reauthViaPopup":case"reauthViaRedirect":return jA;default:Jn(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=new Mc(2e3,1e4);async function OA(r,e,t){if(pn(r.app))return Promise.reject(cr(r,"operation-not-supported-in-this-environment"));const a=Ss(r);dN(r,e,Zm);const i=gw(a,t);return new ci(a,"signInViaPopup",e,i).executeNotNull()}class ci extends mw{constructor(e,t,a,i,l){super(e,t,i,l),this.provider=a,this.authWindow=null,this.pollId=null,ci.currentPopupAction&&ci.currentPopupAction.cancel(),ci.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=ep();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ci.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CA.get())};e()}}ci.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="pendingRedirect",Id=new Map;class PA extends mw{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Id.get(this.auth._key());if(!e){try{const a=await VA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Id.set(this.auth._key(),e)}return this.bypassAuthState||Id.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VA(r,e){const t=zA(e),a=UA(r);if(!await a._isAvailable())return!1;const i=await a._get(t)==="true";return await a._remove(t),i}function LA(r,e){Id.set(r._key(),e)}function UA(r){return ys(r._redirectPersistence)}function zA(r){return jd(MA,r.config.apiKey,r.name)}async function HA(r,e,t=!1){if(pn(r.app))return Promise.reject(Ir(r));const a=Ss(r),i=gw(a,e),h=await new PA(a,i,t).execute();return h&&!t&&(delete h.user._redirectEventId,await a._persistUserIfCurrent(h.user),await a._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=600*1e3;class qA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!pw(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";t.onError(cr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hb(e))}saveEventToCache(e){this.cachedEventUids.add(Hb(e)),this.lastProcessedEventTime=Date.now()}}function Hb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function pw({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function FA(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(r,e={}){return ks(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YA=/^https?/;async function WA(r){if(r.config.emulator)return;const{authorizedDomains:e}=await $A(r);for(const t of e)try{if(QA(t))return}catch{}Jn(r,"unauthorized-domain")}function QA(r){const e=xm(),{protocol:t,hostname:a}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&a===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===a}if(!YA.test(t))return!1;if(GA.test(r))return a===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new Mc(3e4,6e4);function Bb(){const r=Cr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function XA(r){return new Promise((e,t)=>{function a(){Bb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bb(),t(cr(r,"network-request-failed"))},timeout:KA.get()})}if(Cr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Cr().gapi?.load)a();else{const i=zN("iframefcb");return Cr()[i]=()=>{gapi.load?a():t(cr(r,"network-request-failed"))},Z_(`${UN()}?onload=${i}`).catch(l=>t(l))}}).catch(e=>{throw Cd=null,e})}let Cd=null;function JA(r){return Cd=Cd||XA(r),Cd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=new Mc(5e3,15e3),eD="__/auth/iframe",tD="emulator/auth/iframe",nD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sD(r){const e=r.config;Ae(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Wm(e,tD):`https://${r.config.authDomain}/${eD}`,a={apiKey:e.apiKey,appName:r.name,v:vi},i=rD.get(r.config.apiHost);i&&(a.eid=i);const l=r._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${Oc(a).slice(1)}`}async function aD(r){const e=await JA(r),t=Cr().gapi;return Ae(t,r,"internal-error"),e.open({where:document.body,url:sD(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nD,dontclear:!0},a=>new Promise(async(i,l)=>{await a.restyle({setHideOnLeave:!1});const h=cr(r,"network-request-failed"),g=Cr().setTimeout(()=>{l(h)},ZA.get());function p(){Cr().clearTimeout(g),i(a)}a.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oD=500,lD=600,cD="_blank",uD="http://localhost";class qb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dD(r,e,t,a=oD,i=lD){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),h=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const p={...iD,width:a.toString(),height:i.toString(),top:l,left:h},y=un().toLowerCase();t&&(g=G_(y)?cD:t),F_(y)&&(e=e||uD,p.scrollbars="yes");const b=Object.entries(p).reduce((T,[O,F])=>`${T}${O}=${F},`,"");if(RN(y)&&g!=="_self")return hD(e||"",g),new qb(null);const w=window.open(e||"",g,b);Ae(w,r,"popup-blocked");try{w.focus()}catch{}return new qb(w)}function hD(r,e){const t=document.createElement("a");t.href=r,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="__/auth/handler",gD="emulator/auth/handler",mD=encodeURIComponent("fac");async function Fb(r,e,t,a,i,l){Ae(r.config.authDomain,r,"auth-domain-config-required"),Ae(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:a,v:vi,eventId:i};if(e instanceof Zm){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",K2(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))h[b]=w}if(e instanceof Vc){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(h.scopes=b.join(","))}r.tenantId&&(h.tid=r.tenantId);const g=h;for(const b of Object.keys(g))g[b]===void 0&&delete g[b];const p=await r._getAppCheckToken(),y=p?`#${mD}=${encodeURIComponent(p)}`:"";return`${pD(r)}?${Oc(g).slice(1)}${y}`}function pD({config:r}){return r.emulator?Wm(r,gD):`https://${r.authDomain}/${fD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="webStorageSupport";class yD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cw,this._completeRedirectFn=HA,this._overrideRedirectResult=LA}async _openPopup(e,t,a,i){vs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Fb(e,t,a,xm(),i);return dD(e,l,ep())}async _openRedirect(e,t,a,i){await this._originValidation(e);const l=await Fb(e,t,a,xm(),i);return vA(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:l}=this.eventManagers[t];return i?Promise.resolve(i):(vs(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await aD(e),a=new qA(e);return t.register("authEvent",i=>(Ae(i?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xg,{type:Xg},i=>{const l=i?.[0]?.[Xg];l!==void 0&&t(!!l),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=WA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return X_()||$_()||Km()}}const xD=yD;var $b="@firebase/auth",Gb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _D(r){gi(new ga("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=a.options;Ae(h&&!h.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:h,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J_(r)},y=new PN(a,i,l,p);return GN(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),gi(new ga("auth-internal",e=>{const t=Ss(e.getProvider("auth").getImmediate());return(a=>new bD(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr($b,Gb,vD(r)),jr($b,Gb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=300,TD=R_("authIdTokenMaxAge")||wD;let Yb=null;const ED=r=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>TD)return;const i=t?.token;Yb!==i&&(Yb=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function kD(r=$m()){const e=gh(r,"auth");if(e.isInitialized())return e.getImmediate();const t=$N(r,{popupRedirectResolver:xD,persistence:[DA,yA,cw]}),a=R_("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const h=ED(l.toString());hA(t,h,()=>h(t.currentUser)),dA(t,g=>h(g))}}const i=N_("auth");return i&&YN(t,`http://${i}`),t}function SD(){return document.getElementsByTagName("head")?.[0]??document}VN({loadJS(r){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",r),a.onload=e,a.onerror=i=>{const l=cr("internal-error");l.customData=i,t(l)},a.type="text/javascript",a.charset="UTF-8",SD().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_D("Browser");var ND="firebase",AD="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(ND,AD,"app");var Wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ua,yw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,k){function C(){}C.prototype=k.prototype,A.D=k.prototype,A.prototype=new C,A.prototype.constructor=A,A.C=function(z,M,B){for(var j=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)j[_e-2]=arguments[_e];return k.prototype[M].apply(z,j)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,t),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,k,C){C||(C=0);var z=Array(16);if(typeof k=="string")for(var M=0;16>M;++M)z[M]=k.charCodeAt(C++)|k.charCodeAt(C++)<<8|k.charCodeAt(C++)<<16|k.charCodeAt(C++)<<24;else for(M=0;16>M;++M)z[M]=k[C++]|k[C++]<<8|k[C++]<<16|k[C++]<<24;k=A.g[0],C=A.g[1],M=A.g[2];var B=A.g[3],j=k+(B^C&(M^B))+z[0]+3614090360&4294967295;k=C+(j<<7&4294967295|j>>>25),j=B+(M^k&(C^M))+z[1]+3905402710&4294967295,B=k+(j<<12&4294967295|j>>>20),j=M+(C^B&(k^C))+z[2]+606105819&4294967295,M=B+(j<<17&4294967295|j>>>15),j=C+(k^M&(B^k))+z[3]+3250441966&4294967295,C=M+(j<<22&4294967295|j>>>10),j=k+(B^C&(M^B))+z[4]+4118548399&4294967295,k=C+(j<<7&4294967295|j>>>25),j=B+(M^k&(C^M))+z[5]+1200080426&4294967295,B=k+(j<<12&4294967295|j>>>20),j=M+(C^B&(k^C))+z[6]+2821735955&4294967295,M=B+(j<<17&4294967295|j>>>15),j=C+(k^M&(B^k))+z[7]+4249261313&4294967295,C=M+(j<<22&4294967295|j>>>10),j=k+(B^C&(M^B))+z[8]+1770035416&4294967295,k=C+(j<<7&4294967295|j>>>25),j=B+(M^k&(C^M))+z[9]+2336552879&4294967295,B=k+(j<<12&4294967295|j>>>20),j=M+(C^B&(k^C))+z[10]+4294925233&4294967295,M=B+(j<<17&4294967295|j>>>15),j=C+(k^M&(B^k))+z[11]+2304563134&4294967295,C=M+(j<<22&4294967295|j>>>10),j=k+(B^C&(M^B))+z[12]+1804603682&4294967295,k=C+(j<<7&4294967295|j>>>25),j=B+(M^k&(C^M))+z[13]+4254626195&4294967295,B=k+(j<<12&4294967295|j>>>20),j=M+(C^B&(k^C))+z[14]+2792965006&4294967295,M=B+(j<<17&4294967295|j>>>15),j=C+(k^M&(B^k))+z[15]+1236535329&4294967295,C=M+(j<<22&4294967295|j>>>10),j=k+(M^B&(C^M))+z[1]+4129170786&4294967295,k=C+(j<<5&4294967295|j>>>27),j=B+(C^M&(k^C))+z[6]+3225465664&4294967295,B=k+(j<<9&4294967295|j>>>23),j=M+(k^C&(B^k))+z[11]+643717713&4294967295,M=B+(j<<14&4294967295|j>>>18),j=C+(B^k&(M^B))+z[0]+3921069994&4294967295,C=M+(j<<20&4294967295|j>>>12),j=k+(M^B&(C^M))+z[5]+3593408605&4294967295,k=C+(j<<5&4294967295|j>>>27),j=B+(C^M&(k^C))+z[10]+38016083&4294967295,B=k+(j<<9&4294967295|j>>>23),j=M+(k^C&(B^k))+z[15]+3634488961&4294967295,M=B+(j<<14&4294967295|j>>>18),j=C+(B^k&(M^B))+z[4]+3889429448&4294967295,C=M+(j<<20&4294967295|j>>>12),j=k+(M^B&(C^M))+z[9]+568446438&4294967295,k=C+(j<<5&4294967295|j>>>27),j=B+(C^M&(k^C))+z[14]+3275163606&4294967295,B=k+(j<<9&4294967295|j>>>23),j=M+(k^C&(B^k))+z[3]+4107603335&4294967295,M=B+(j<<14&4294967295|j>>>18),j=C+(B^k&(M^B))+z[8]+1163531501&4294967295,C=M+(j<<20&4294967295|j>>>12),j=k+(M^B&(C^M))+z[13]+2850285829&4294967295,k=C+(j<<5&4294967295|j>>>27),j=B+(C^M&(k^C))+z[2]+4243563512&4294967295,B=k+(j<<9&4294967295|j>>>23),j=M+(k^C&(B^k))+z[7]+1735328473&4294967295,M=B+(j<<14&4294967295|j>>>18),j=C+(B^k&(M^B))+z[12]+2368359562&4294967295,C=M+(j<<20&4294967295|j>>>12),j=k+(C^M^B)+z[5]+4294588738&4294967295,k=C+(j<<4&4294967295|j>>>28),j=B+(k^C^M)+z[8]+2272392833&4294967295,B=k+(j<<11&4294967295|j>>>21),j=M+(B^k^C)+z[11]+1839030562&4294967295,M=B+(j<<16&4294967295|j>>>16),j=C+(M^B^k)+z[14]+4259657740&4294967295,C=M+(j<<23&4294967295|j>>>9),j=k+(C^M^B)+z[1]+2763975236&4294967295,k=C+(j<<4&4294967295|j>>>28),j=B+(k^C^M)+z[4]+1272893353&4294967295,B=k+(j<<11&4294967295|j>>>21),j=M+(B^k^C)+z[7]+4139469664&4294967295,M=B+(j<<16&4294967295|j>>>16),j=C+(M^B^k)+z[10]+3200236656&4294967295,C=M+(j<<23&4294967295|j>>>9),j=k+(C^M^B)+z[13]+681279174&4294967295,k=C+(j<<4&4294967295|j>>>28),j=B+(k^C^M)+z[0]+3936430074&4294967295,B=k+(j<<11&4294967295|j>>>21),j=M+(B^k^C)+z[3]+3572445317&4294967295,M=B+(j<<16&4294967295|j>>>16),j=C+(M^B^k)+z[6]+76029189&4294967295,C=M+(j<<23&4294967295|j>>>9),j=k+(C^M^B)+z[9]+3654602809&4294967295,k=C+(j<<4&4294967295|j>>>28),j=B+(k^C^M)+z[12]+3873151461&4294967295,B=k+(j<<11&4294967295|j>>>21),j=M+(B^k^C)+z[15]+530742520&4294967295,M=B+(j<<16&4294967295|j>>>16),j=C+(M^B^k)+z[2]+3299628645&4294967295,C=M+(j<<23&4294967295|j>>>9),j=k+(M^(C|~B))+z[0]+4096336452&4294967295,k=C+(j<<6&4294967295|j>>>26),j=B+(C^(k|~M))+z[7]+1126891415&4294967295,B=k+(j<<10&4294967295|j>>>22),j=M+(k^(B|~C))+z[14]+2878612391&4294967295,M=B+(j<<15&4294967295|j>>>17),j=C+(B^(M|~k))+z[5]+4237533241&4294967295,C=M+(j<<21&4294967295|j>>>11),j=k+(M^(C|~B))+z[12]+1700485571&4294967295,k=C+(j<<6&4294967295|j>>>26),j=B+(C^(k|~M))+z[3]+2399980690&4294967295,B=k+(j<<10&4294967295|j>>>22),j=M+(k^(B|~C))+z[10]+4293915773&4294967295,M=B+(j<<15&4294967295|j>>>17),j=C+(B^(M|~k))+z[1]+2240044497&4294967295,C=M+(j<<21&4294967295|j>>>11),j=k+(M^(C|~B))+z[8]+1873313359&4294967295,k=C+(j<<6&4294967295|j>>>26),j=B+(C^(k|~M))+z[15]+4264355552&4294967295,B=k+(j<<10&4294967295|j>>>22),j=M+(k^(B|~C))+z[6]+2734768916&4294967295,M=B+(j<<15&4294967295|j>>>17),j=C+(B^(M|~k))+z[13]+1309151649&4294967295,C=M+(j<<21&4294967295|j>>>11),j=k+(M^(C|~B))+z[4]+4149444226&4294967295,k=C+(j<<6&4294967295|j>>>26),j=B+(C^(k|~M))+z[11]+3174756917&4294967295,B=k+(j<<10&4294967295|j>>>22),j=M+(k^(B|~C))+z[2]+718787259&4294967295,M=B+(j<<15&4294967295|j>>>17),j=C+(B^(M|~k))+z[9]+3951481745&4294967295,A.g[0]=A.g[0]+k&4294967295,A.g[1]=A.g[1]+(M+(j<<21&4294967295|j>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+B&4294967295}a.prototype.u=function(A,k){k===void 0&&(k=A.length);for(var C=k-this.blockSize,z=this.B,M=this.h,B=0;B<k;){if(M==0)for(;B<=C;)i(this,A,B),B+=this.blockSize;if(typeof A=="string"){for(;B<k;)if(z[M++]=A.charCodeAt(B++),M==this.blockSize){i(this,z),M=0;break}}else for(;B<k;)if(z[M++]=A[B++],M==this.blockSize){i(this,z),M=0;break}}this.h=M,this.o+=k},a.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var k=1;k<A.length-8;++k)A[k]=0;var C=8*this.o;for(k=A.length-8;k<A.length;++k)A[k]=C&255,C/=256;for(this.u(A),A=Array(16),k=C=0;4>k;++k)for(var z=0;32>z;z+=8)A[C++]=this.g[k]>>>z&255;return A};function l(A,k){var C=g;return Object.prototype.hasOwnProperty.call(C,A)?C[A]:C[A]=k(A)}function h(A,k){this.h=k;for(var C=[],z=!0,M=A.length-1;0<=M;M--){var B=A[M]|0;z&&B==k||(C[M]=B,z=!1)}this.g=C}var g={};function p(A){return-128<=A&&128>A?l(A,function(k){return new h([k|0],0>k?-1:0)}):new h([A|0],0>A?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return w;if(0>A)return P(y(-A));for(var k=[],C=1,z=0;A>=C;z++)k[z]=A/C|0,C*=4294967296;return new h(k,0)}function b(A,k){if(A.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(A.charAt(0)=="-")return P(b(A.substring(1),k));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(k,8)),z=w,M=0;M<A.length;M+=8){var B=Math.min(8,A.length-M),j=parseInt(A.substring(M,M+B),k);8>B?(B=y(Math.pow(k,B)),z=z.j(B).add(y(j))):(z=z.j(C),z=z.add(y(j)))}return z}var w=p(0),T=p(1),O=p(16777216);r=h.prototype,r.m=function(){if($(this))return-P(this).m();for(var A=0,k=1,C=0;C<this.g.length;C++){var z=this.i(C);A+=(0<=z?z:4294967296+z)*k,k*=4294967296}return A},r.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(F(this))return"0";if($(this))return"-"+P(this).toString(A);for(var k=y(Math.pow(A,6)),C=this,z="";;){var M=V(C,k).g;C=S(C,M.j(k));var B=((0<C.g.length?C.g[0]:C.h)>>>0).toString(A);if(C=M,F(C))return B+z;for(;6>B.length;)B="0"+B;z=B+z}},r.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function F(A){if(A.h!=0)return!1;for(var k=0;k<A.g.length;k++)if(A.g[k]!=0)return!1;return!0}function $(A){return A.h==-1}r.l=function(A){return A=S(this,A),$(A)?-1:F(A)?0:1};function P(A){for(var k=A.g.length,C=[],z=0;z<k;z++)C[z]=~A.g[z];return new h(C,~A.h).add(T)}r.abs=function(){return $(this)?P(this):this},r.add=function(A){for(var k=Math.max(this.g.length,A.g.length),C=[],z=0,M=0;M<=k;M++){var B=z+(this.i(M)&65535)+(A.i(M)&65535),j=(B>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);z=j>>>16,B&=65535,j&=65535,C[M]=j<<16|B}return new h(C,C[C.length-1]&-2147483648?-1:0)};function S(A,k){return A.add(P(k))}r.j=function(A){if(F(this)||F(A))return w;if($(this))return $(A)?P(this).j(P(A)):P(P(this).j(A));if($(A))return P(this.j(P(A)));if(0>this.l(O)&&0>A.l(O))return y(this.m()*A.m());for(var k=this.g.length+A.g.length,C=[],z=0;z<2*k;z++)C[z]=0;for(z=0;z<this.g.length;z++)for(var M=0;M<A.g.length;M++){var B=this.i(z)>>>16,j=this.i(z)&65535,_e=A.i(M)>>>16,Ee=A.i(M)&65535;C[2*z+2*M]+=j*Ee,L(C,2*z+2*M),C[2*z+2*M+1]+=B*Ee,L(C,2*z+2*M+1),C[2*z+2*M+1]+=j*_e,L(C,2*z+2*M+1),C[2*z+2*M+2]+=B*_e,L(C,2*z+2*M+2)}for(z=0;z<k;z++)C[z]=C[2*z+1]<<16|C[2*z];for(z=k;z<2*k;z++)C[z]=0;return new h(C,0)};function L(A,k){for(;(A[k]&65535)!=A[k];)A[k+1]+=A[k]>>>16,A[k]&=65535,k++}function I(A,k){this.g=A,this.h=k}function V(A,k){if(F(k))throw Error("division by zero");if(F(A))return new I(w,w);if($(A))return k=V(P(A),k),new I(P(k.g),P(k.h));if($(k))return k=V(A,P(k)),new I(P(k.g),k.h);if(30<A.g.length){if($(A)||$(k))throw Error("slowDivide_ only works with positive integers.");for(var C=T,z=k;0>=z.l(A);)C=Y(C),z=Y(z);var M=te(C,1),B=te(z,1);for(z=te(z,2),C=te(C,2);!F(z);){var j=B.add(z);0>=j.l(A)&&(M=M.add(C),B=j),z=te(z,1),C=te(C,1)}return k=S(A,M.j(k)),new I(M,k)}for(M=w;0<=A.l(k);){for(C=Math.max(1,Math.floor(A.m()/k.m())),z=Math.ceil(Math.log(C)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),B=y(C),j=B.j(k);$(j)||0<j.l(A);)C-=z,B=y(C),j=B.j(k);F(B)&&(B=T),M=M.add(B),A=S(A,j)}return new I(M,A)}r.A=function(A){return V(this,A).h},r.and=function(A){for(var k=Math.max(this.g.length,A.g.length),C=[],z=0;z<k;z++)C[z]=this.i(z)&A.i(z);return new h(C,this.h&A.h)},r.or=function(A){for(var k=Math.max(this.g.length,A.g.length),C=[],z=0;z<k;z++)C[z]=this.i(z)|A.i(z);return new h(C,this.h|A.h)},r.xor=function(A){for(var k=Math.max(this.g.length,A.g.length),C=[],z=0;z<k;z++)C[z]=this.i(z)^A.i(z);return new h(C,this.h^A.h)};function Y(A){for(var k=A.g.length+1,C=[],z=0;z<k;z++)C[z]=A.i(z)<<1|A.i(z-1)>>>31;return new h(C,A.h)}function te(A,k){var C=k>>5;k%=32;for(var z=A.g.length-C,M=[],B=0;B<z;B++)M[B]=0<k?A.i(B+C)>>>k|A.i(B+C+1)<<32-k:A.i(B+C);return new h(M,A.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,yw=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=b,ua=h}).apply(typeof Wb<"u"?Wb:typeof self<"u"?self:typeof window<"u"?window:{});var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xw,oc,bw,Od,wm,vw,_w,ww;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,x,v){return d==Array.prototype||d==Object.prototype||(d[x]=v.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof _d=="object"&&_d];for(var x=0;x<d.length;++x){var v=d[x];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var a=t(this);function i(d,x){if(x)e:{var v=a;d=d.split(".");for(var N=0;N<d.length-1;N++){var X=d[N];if(!(X in v))break e;v=v[X]}d=d[d.length-1],N=v[d],x=x(N),x!=N&&x!=null&&e(v,d,{configurable:!0,writable:!0,value:x})}}function l(d,x){d instanceof String&&(d+="");var v=0,N=!1,X={next:function(){if(!N&&v<d.length){var oe=v++;return{value:x(oe,d[oe]),done:!1}}return N=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}i("Array.prototype.values",function(d){return d||function(){return l(this,function(x,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},g=this||self;function p(d){var x=typeof d;return x=x!="object"?x:d?Array.isArray(d)?"array":x:"null",x=="array"||x=="object"&&typeof d.length=="number"}function y(d){var x=typeof d;return x=="object"&&d!=null||x=="function"}function b(d,x,v){return d.call.apply(d.bind,arguments)}function w(d,x,v){if(!d)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,N),d.apply(x,X)}}return function(){return d.apply(x,arguments)}}function T(d,x,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:w,T.apply(null,arguments)}function O(d,x){var v=Array.prototype.slice.call(arguments,1);return function(){var N=v.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function F(d,x){function v(){}v.prototype=x.prototype,d.aa=x.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(N,X,oe){for(var pe=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)pe[Be-2]=arguments[Be];return x.prototype[X].apply(N,pe)}}function $(d){const x=d.length;if(0<x){const v=Array(x);for(let N=0;N<x;N++)v[N]=d[N];return v}return[]}function P(d,x){for(let v=1;v<arguments.length;v++){const N=arguments[v];if(p(N)){const X=d.length||0,oe=N.length||0;d.length=X+oe;for(let pe=0;pe<oe;pe++)d[X+pe]=N[pe]}else d.push(N)}}class S{constructor(x,v){this.i=x,this.j=v,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function L(d){return/^[\s\xa0]*$/.test(d)}function I(){var d=g.navigator;return d&&(d=d.userAgent)?d:""}function V(d){return V[" "](d),d}V[" "]=function(){};var Y=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function te(d,x,v){for(const N in d)x.call(v,d[N],N,d)}function A(d,x){for(const v in d)x.call(void 0,d[v],v,d)}function k(d){const x={};for(const v in d)x[v]=d[v];return x}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(d,x){let v,N;for(let X=1;X<arguments.length;X++){N=arguments[X];for(v in N)d[v]=N[v];for(let oe=0;oe<C.length;oe++)v=C[oe],Object.prototype.hasOwnProperty.call(N,v)&&(d[v]=N[v])}}function M(d){var x=1;d=d.split(":");const v=[];for(;0<x&&d.length;)v.push(d.shift()),x--;return d.length&&v.push(d.join(":")),v}function B(d){g.setTimeout(()=>{throw d},0)}function j(){var d=ue;let x=null;return d.g&&(x=d.g,d.g=d.g.next,d.g||(d.h=null),x.next=null),x}class _e{constructor(){this.h=this.g=null}add(x,v){const N=Ee.get();N.set(x,v),this.h?this.h.next=N:this.g=N,this.h=N}}var Ee=new S(()=>new W,d=>d.reset());class W{constructor(){this.next=this.g=this.h=null}set(x,v){this.h=x,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let J,H=!1,ue=new _e,D=()=>{const d=g.Promise.resolve(void 0);J=()=>{d.then(re)}};var re=()=>{for(var d;d=j();){try{d.h.call(d.g)}catch(v){B(v)}var x=Ee;x.j(d),100>x.h&&(x.h++,d.next=x.g,x.g=d)}H=!1};function R(){this.s=this.s,this.C=this.C}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(d,x){this.type=d,this.g=this.target=x,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var d=!1,x=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const v=()=>{};g.addEventListener("test",v,x),g.removeEventListener("test",v,x)}catch{}return d}();function se(d,x){if(q.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=x,x=d.relatedTarget){if(Y){e:{try{V(x.nodeName);var X=!0;break e}catch{}X=!1}X||(x=null)}}else v=="mouseover"?x=d.fromElement:v=="mouseout"&&(x=d.toElement);this.relatedTarget=x,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ae[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&se.aa.h.call(this)}}F(se,q);var ae={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),xe=0;function Ke(d,x,v,N,X){this.listener=d,this.proxy=null,this.src=x,this.type=v,this.capture=!!N,this.ha=X,this.key=++xe,this.da=this.fa=!1}function Me(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function at(d){this.src=d,this.g={},this.h=0}at.prototype.add=function(d,x,v,N,X){var oe=d.toString();d=this.g[oe],d||(d=this.g[oe]=[],this.h++);var pe=ka(d,x,N,X);return-1<pe?(x=d[pe],v||(x.fa=!1)):(x=new Ke(x,this.src,oe,!!N,X),x.fa=v,d.push(x)),x};function Zn(d,x){var v=x.type;if(v in d.g){var N=d.g[v],X=Array.prototype.indexOf.call(N,x,void 0),oe;(oe=0<=X)&&Array.prototype.splice.call(N,X,1),oe&&(Me(x),d.g[v].length==0&&(delete d.g[v],d.h--))}}function ka(d,x,v,N){for(var X=0;X<d.length;++X){var oe=d[X];if(!oe.da&&oe.listener==x&&oe.capture==!!v&&oe.ha==N)return X}return-1}var Sa="closure_lm_"+(1e6*Math.random()|0),Go={};function Kc(d,x,v,N,X){if(Array.isArray(x)){for(var oe=0;oe<x.length;oe++)Kc(d,x[oe],v,N,X);return null}return v=Xc(v),d&&d[ce]?d.K(x,v,y(N)?!!N.capture:!1,X):Mn(d,x,v,!1,N,X)}function Mn(d,x,v,N,X,oe){if(!x)throw Error("Invalid event type");var pe=y(X)?!!X.capture:!!X,Be=ki(d);if(Be||(d[Sa]=Be=new at(d)),v=Be.add(x,v,N,pe,oe),v.proxy)return v;if(N=Vh(),v.proxy=N,N.src=d,N.listener=v,d.addEventListener)K||(X=pe),X===void 0&&(X=!1),d.addEventListener(x.toString(),N,X);else if(d.attachEvent)d.attachEvent(Na(x.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Vh(){function d(v){return x.call(d.src,d.listener,v)}const x=Lh;return d}function Yo(d,x,v,N,X){if(Array.isArray(x))for(var oe=0;oe<x.length;oe++)Yo(d,x[oe],v,N,X);else N=y(N)?!!N.capture:!!N,v=Xc(v),d&&d[ce]?(d=d.i,x=String(x).toString(),x in d.g&&(oe=d.g[x],v=ka(oe,v,N,X),-1<v&&(Me(oe[v]),Array.prototype.splice.call(oe,v,1),oe.length==0&&(delete d.g[x],d.h--)))):d&&(d=ki(d))&&(x=d.g[x.toString()],d=-1,x&&(d=ka(x,v,N,X)),(v=-1<d?x[d]:null)&&Ei(v))}function Ei(d){if(typeof d!="number"&&d&&!d.da){var x=d.src;if(x&&x[ce])Zn(x.i,d);else{var v=d.type,N=d.proxy;x.removeEventListener?x.removeEventListener(v,N,d.capture):x.detachEvent?x.detachEvent(Na(v),N):x.addListener&&x.removeListener&&x.removeListener(N),(v=ki(x))?(Zn(v,d),v.h==0&&(v.src=null,x[Sa]=null)):Me(d)}}}function Na(d){return d in Go?Go[d]:Go[d]="on"+d}function Lh(d,x){if(d.da)d=!0;else{x=new se(x,this);var v=d.listener,N=d.ha||d.src;d.fa&&Ei(d),d=v.call(N,x)}return d}function ki(d){return d=d[Sa],d instanceof at?d:null}var Wo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xc(d){return typeof d=="function"?d:(d[Wo]||(d[Wo]=function(x){return d.handleEvent(x)}),d[Wo])}function mt(){R.call(this),this.i=new at(this),this.M=this,this.F=null}F(mt,R),mt.prototype[ce]=!0,mt.prototype.removeEventListener=function(d,x,v,N){Yo(this,d,x,v,N)};function Xe(d,x){var v,N=d.F;if(N)for(v=[];N;N=N.F)v.push(N);if(d=d.M,N=x.type||x,typeof x=="string")x=new q(x,d);else if(x instanceof q)x.target=x.target||d;else{var X=x;x=new q(N,d),z(x,X)}if(X=!0,v)for(var oe=v.length-1;0<=oe;oe--){var pe=x.g=v[oe];X=En(pe,N,!0,x)&&X}if(pe=x.g=d,X=En(pe,N,!0,x)&&X,X=En(pe,N,!1,x)&&X,v)for(oe=0;oe<v.length;oe++)pe=x.g=v[oe],X=En(pe,N,!1,x)&&X}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var d=this.i,x;for(x in d.g){for(var v=d.g[x],N=0;N<v.length;N++)Me(v[N]);delete d.g[x],d.h--}}this.F=null},mt.prototype.K=function(d,x,v,N){return this.i.add(String(d),x,!1,v,N)},mt.prototype.L=function(d,x,v,N){return this.i.add(String(d),x,!0,v,N)};function En(d,x,v,N){if(x=d.i.g[String(x)],!x)return!0;x=x.concat();for(var X=!0,oe=0;oe<x.length;++oe){var pe=x[oe];if(pe&&!pe.da&&pe.capture==v){var Be=pe.listener,Ot=pe.ha||pe.src;pe.fa&&Zn(d.i,pe),X=Be.call(Ot,N)!==!1&&X}}return X&&!N.defaultPrevented}function nn(d,x,v){if(typeof d=="function")v&&(d=T(d,v));else if(d&&typeof d.handleEvent=="function")d=T(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:g.setTimeout(d,x||0)}function Jc(d){d.g=nn(()=>{d.g=null,d.i&&(d.i=!1,Jc(d))},d.l);const x=d.h;d.h=null,d.m.apply(null,x)}class Uh extends R{constructor(x,v){super(),this.m=x,this.l=v,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Jc(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aa(d){R.call(this),this.h=d,this.g={}}F(Aa,R);var Da=[];function Ra(d){te(d.g,function(x,v){this.g.hasOwnProperty(v)&&Ei(x)},d),d.g={}}Aa.prototype.N=function(){Aa.aa.N.call(this),Ra(this)},Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var er=g.JSON.stringify,Si=g.JSON.parse,ja=class{stringify(d){return g.JSON.stringify(d,void 0)}parse(d){return g.JSON.parse(d,void 0)}};function Qo(){}Qo.prototype.h=null;function Ko(d){return d.h||(d.h=d.i())}function Xo(){}var qr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fr(){q.call(this,"d")}F(Fr,q);function Jo(){q.call(this,"c")}F(Jo,q);var dr={},Zo=null;function Ns(){return Zo=Zo||new mt}dr.La="serverreachability";function Ni(d){q.call(this,dr.La,d)}F(Ni,q);function As(d){const x=Ns();Xe(x,new Ni(x))}dr.STAT_EVENT="statevent";function Zc(d,x){q.call(this,dr.STAT_EVENT,d),this.stat=x}F(Zc,q);function ut(d){const x=Ns();Xe(x,new Zc(x,d))}dr.Ma="timingevent";function Ct(d,x){q.call(this,dr.Ma,d),this.size=x}F(Ct,q);function kt(d,x){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){d()},x)}function Pn(){this.g=!0}Pn.prototype.xa=function(){this.g=!1};function el(d,x,v,N,X,oe){d.info(function(){if(d.g)if(oe)for(var pe="",Be=oe.split("&"),Ot=0;Ot<Be.length;Ot++){var qe=Be[Ot].split("=");if(1<qe.length){var Bt=qe[0];qe=qe[1];var Mt=Bt.split("_");pe=2<=Mt.length&&Mt[1]=="type"?pe+(Bt+"="+qe+"&"):pe+(Bt+"=redacted&")}}else pe=null;else pe=oe;return"XMLHTTP REQ ("+N+") [attempt "+X+"]: "+x+`
`+v+`
`+pe})}function zh(d,x,v,N,X,oe,pe){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+X+"]: "+x+`
`+v+`
`+oe+" "+pe})}function Ds(d,x,v,N){d.info(function(){return"XMLHTTP TEXT ("+x+"): "+Ia(d,v)+(N?" "+N:"")})}function eu(d,x){d.info(function(){return"TIMEOUT: "+x})}Pn.prototype.info=function(){};function Ia(d,x){if(!d.g)return x;if(!x)return null;try{var v=JSON.parse(x);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var N=v[d];if(!(2>N.length)){var X=N[1];if(Array.isArray(X)&&!(1>X.length)){var oe=X[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var pe=1;pe<X.length;pe++)X[pe]=""}}}}return er(v)}catch{return x}}var Rs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$r={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hr;function fr(){}F(fr,Qo),fr.prototype.g=function(){return new XMLHttpRequest},fr.prototype.i=function(){return{}},hr=new fr;function hn(d,x,v,N){this.j=d,this.i=x,this.l=v,this.R=N||1,this.U=new Aa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xt}function xt(){this.i=null,this.g="",this.h=!1}var tl={},Ai={};function tr(d,x,v){d.L=1,d.v=Va(kn(x)),d.m=v,d.P=!0,Gr(d,null)}function Gr(d,x){d.F=Date.now(),Ca(d),d.A=kn(d.v);var v=d.A,N=d.R;Array.isArray(N)||(N=[String(N)]),ol(v.i,"t",N),d.C=0,v=d.j.J,d.h=new xt,d.g=pu(d.j,v?x:null,!d.m),0<d.O&&(d.M=new Uh(T(d.Y,d,d.g),d.O)),x=d.U,v=d.g,N=d.ca;var X="readystatechange";Array.isArray(X)||(X&&(Da[0]=X.toString()),X=Da);for(var oe=0;oe<X.length;oe++){var pe=Kc(v,X[oe],N||x.handleEvent,!1,x.h||x);if(!pe)break;x.g[pe.key]=pe}x=d.H?k(d.H):{},d.m?(d.u||(d.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,x)):(d.u="GET",d.g.ea(d.A,d.u,null,x)),As(),el(d.i,d.u,d.A,d.l,d.R,d.m)}hn.prototype.ca=function(d){d=d.target;const x=this.M;x&&zn(d)==3?x.j():this.Y(d)},hn.prototype.Y=function(d){try{if(d==this.g)e:{const Mt=zn(this.g);var x=this.g.Ba();const es=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||lu(this.g)))){this.J||Mt!=4||x==7||(x==8||0>=es?As(3):As(2)),js(this);var v=this.g.Z();this.X=v;t:if(tu(this)){var N=lu(this.g);d="";var X=N.length,oe=zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),gr(this);var pe="";break t}this.h.i=new g.TextDecoder}for(x=0;x<X;x++)this.h.h=!0,d+=this.h.i.decode(N[x],{stream:!(oe&&x==X-1)});N.length=0,this.h.g+=d,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=v==200,zh(this.i,this.u,this.A,this.l,this.R,Mt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,Ot=this.g;if((Be=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Be)){var qe=Be;break t}}qe=null}if(v=qe)Ds(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oa(this,v);else{this.o=!1,this.s=3,ut(12),Yt(this),gr(this);break e}}if(this.P){v=!0;let Wt;for(;!this.J&&this.C<pe.length;)if(Wt=nu(this,pe),Wt==Ai){Mt==4&&(this.s=4,ut(14),v=!1),Ds(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==tl){this.s=4,ut(15),Ds(this.i,this.l,pe,"[Invalid Chunk]"),v=!1;break}else Ds(this.i,this.l,Wt,null),Oa(this,Wt);if(tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||pe.length!=0||this.h.h||(this.s=1,ut(16),v=!1),this.o=this.o&&v,!v)Ds(this.i,this.l,pe,"[Invalid Chunked Response]"),Yt(this),gr(this);else if(0<pe.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),$a(Bt),Bt.M=!0,ut(11))}}else Ds(this.i,this.l,pe,null),Oa(this,pe);Mt==4&&Yt(this),this.o&&!this.J&&(Mt==4?fu(this.j,this):(this.o=!1,Ca(this)))}else $h(this.g),v==400&&0<pe.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),Yt(this),gr(this)}}}catch{}finally{}};function tu(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function nu(d,x){var v=d.C,N=x.indexOf(`
`,v);return N==-1?Ai:(v=Number(x.substring(v,N)),isNaN(v)?tl:(N+=1,N+v>x.length?Ai:(x=x.slice(N,N+v),d.C=N+v,x)))}hn.prototype.cancel=function(){this.J=!0,Yt(this)};function Ca(d){d.S=Date.now()+d.I,ru(d,d.I)}function ru(d,x){if(d.B!=null)throw Error("WatchDog timer not null");d.B=kt(T(d.ba,d),x)}function js(d){d.B&&(g.clearTimeout(d.B),d.B=null)}hn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(eu(this.i,this.A),this.L!=2&&(As(),ut(17)),Yt(this),this.s=2,gr(this)):ru(this,this.S-d)};function gr(d){d.j.G==0||d.J||fu(d.j,d)}function Yt(d){js(d);var x=d.M;x&&typeof x.ma=="function"&&x.ma(),d.M=null,Ra(d.U),d.g&&(x=d.g,d.g=null,x.abort(),x.ma())}function Oa(d,x){try{var v=d.j;if(v.G!=0&&(v.g==d||nl(v.h,d))){if(!d.K&&nl(v.h,d)&&v.G==3){try{var N=v.Da.g.parse(x)}catch{N=null}if(Array.isArray(N)&&N.length==3){var X=N;if(X[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)zi(v),Li(v);else break e;hl(v),ut(18)}}else v.za=X[1],0<v.za-v.T&&37500>X[2]&&v.F&&v.v==0&&!v.C&&(v.C=kt(T(v.Za,v),6e3));if(1>=Ri(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Zr(v,11)}else if((d.K||v.g==d)&&zi(v),!L(x))for(X=v.Da.g.parse(x),x=0;x<X.length;x++){let qe=X[x];if(v.T=qe[0],qe=qe[1],v.G==2)if(qe[0]=="c"){v.K=qe[1],v.ia=qe[2];const Bt=qe[3];Bt!=null&&(v.la=Bt,v.j.info("VER="+v.la));const Mt=qe[4];Mt!=null&&(v.Aa=Mt,v.j.info("SVER="+v.Aa));const es=qe[5];es!=null&&typeof es=="number"&&0<es&&(N=1.5*es,v.L=N,v.j.info("backChannelRequestTimeoutMs_="+N)),N=v;const Wt=d.g;if(Wt){const _r=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_r){var oe=N.h;oe.g||_r.indexOf("spdy")==-1&&_r.indexOf("quic")==-1&&_r.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(ji(oe,oe.h),oe.h=null))}if(N.D){const gl=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;gl&&(N.ya=gl,tt(N.I,N.D,gl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),N=v;var pe=d;if(N.qa=mu(N,N.J?N.ia:null,N.W),pe.K){fn(N.h,pe);var Be=pe,Ot=N.L;Ot&&(Be.I=Ot),Be.B&&(js(Be),Ca(Be)),N.g=pe}else du(N);0<v.i.length&&Ui(v)}else qe[0]!="stop"&&qe[0]!="close"||Zr(v,7);else v.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Zr(v,7):ul(v):qe[0]!="noop"&&v.l&&v.l.ta(qe),v.v=0)}}As(4)}catch{}}var su=class{constructor(d,x){this.g=d,this.map=x}};function Yr(d){this.l=d||10,g.PerformanceNavigationTiming?(d=g.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Di(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ri(d){return d.h?1:d.g?d.g.size:0}function nl(d,x){return d.h?d.h==x:d.g?d.g.has(x):!1}function ji(d,x){d.g?d.g.add(x):d.h=x}function fn(d,x){d.h&&d.h==x?d.h=null:d.g&&d.g.has(x)&&d.g.delete(x)}Yr.prototype.cancel=function(){if(this.i=rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function rl(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let x=d.i;for(const v of d.g.values())x=x.concat(v.D);return x}return $(d.i)}function Hh(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(p(d)){for(var x=[],v=d.length,N=0;N<v;N++)x.push(d[N]);return x}x=[],v=0;for(N in d)x[v++]=d[N];return x}function Ii(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(p(d)||typeof d=="string"){var x=[];d=d.length;for(var v=0;v<d;v++)x.push(v);return x}x=[],v=0;for(const N in d)x[v++]=N;return x}}}function sl(d,x){if(d.forEach&&typeof d.forEach=="function")d.forEach(x,void 0);else if(p(d)||typeof d=="string")Array.prototype.forEach.call(d,x,void 0);else for(var v=Ii(d),N=Hh(d),X=N.length,oe=0;oe<X;oe++)x.call(void 0,N[oe],v&&v[oe],d)}var Ma=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bh(d,x){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var N=d[v].indexOf("="),X=null;if(0<=N){var oe=d[v].substring(0,N);X=d[v].substring(N+1)}else oe=d[v];x(oe,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function St(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof St){this.h=d.h,Pa(this,d.j),this.o=d.o,this.g=d.g,Is(this,d.s),this.l=d.l;var x=d.i,v=new Qr;v.i=x.i,x.g&&(v.g=new Map(x.g),v.h=x.h),Wr(this,v),this.m=d.m}else d&&(x=String(d).match(Ma))?(this.h=!1,Pa(this,x[1]||"",!0),this.o=Vn(x[2]||""),this.g=Vn(x[3]||"",!0),Is(this,x[4]),this.l=Vn(x[5]||"",!0),Wr(this,x[6]||"",!0),this.m=Vn(x[7]||"")):(this.h=!1,this.i=new Qr(null,this.h))}St.prototype.toString=function(){var d=[],x=this.j;x&&d.push(La(x,al,!0),":");var v=this.g;return(v||x=="file")&&(d.push("//"),(x=this.o)&&d.push(La(x,al,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(La(v,v.charAt(0)=="/"?qh:il,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",La(v,Ci)),d.join("")};function kn(d){return new St(d)}function Pa(d,x,v){d.j=v?Vn(x,!0):x,d.j&&(d.j=d.j.replace(/:$/,""))}function Is(d,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);d.s=x}else d.s=null}function Wr(d,x,v){x instanceof Qr?(d.i=x,iu(d.i,d.h)):(v||(x=La(x,Fh)),d.i=new Qr(x,d.h))}function tt(d,x,v){d.i.set(x,v)}function Va(d){return tt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Vn(d,x){return d?x?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function La(d,x,v){return typeof d=="string"?(d=encodeURI(d).replace(x,au),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function au(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var al=/[#\/\?@]/g,il=/[#\?:]/g,qh=/[#\?]/g,Fh=/[#\?@]/g,Ci=/#/g;function Qr(d,x){this.h=this.g=null,this.i=d||null,this.j=!!x}function Ln(d){d.g||(d.g=new Map,d.h=0,d.i&&Bh(d.i,function(x,v){d.add(decodeURIComponent(x.replace(/\+/g," ")),v)}))}r=Qr.prototype,r.add=function(d,x){Ln(this),this.i=null,d=mr(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(x),this.h+=1,this};function Kr(d,x){Ln(d),x=mr(d,x),d.g.has(x)&&(d.i=null,d.h-=d.g.get(x).length,d.g.delete(x))}function Xr(d,x){return Ln(d),x=mr(d,x),d.g.has(x)}r.forEach=function(d,x){Ln(this),this.g.forEach(function(v,N){v.forEach(function(X){d.call(x,X,N,this)},this)},this)},r.na=function(){Ln(this);const d=Array.from(this.g.values()),x=Array.from(this.g.keys()),v=[];for(let N=0;N<x.length;N++){const X=d[N];for(let oe=0;oe<X.length;oe++)v.push(x[N])}return v},r.V=function(d){Ln(this);let x=[];if(typeof d=="string")Xr(this,d)&&(x=x.concat(this.g.get(mr(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)x=x.concat(d[v])}return x},r.set=function(d,x){return Ln(this),this.i=null,d=mr(this,d),Xr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[x]),this.h+=1,this},r.get=function(d,x){return d?(d=this.V(d),0<d.length?String(d[0]):x):x};function ol(d,x,v){Kr(d,x),0<v.length&&(d.i=null,d.g.set(mr(d,x),$(v)),d.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],x=Array.from(this.g.keys());for(var v=0;v<x.length;v++){var N=x[v];const oe=encodeURIComponent(String(N)),pe=this.V(N);for(N=0;N<pe.length;N++){var X=oe;pe[N]!==""&&(X+="="+encodeURIComponent(String(pe[N]))),d.push(X)}}return this.i=d.join("&")};function mr(d,x){return x=String(x),d.j&&(x=x.toLowerCase()),x}function iu(d,x){x&&!d.j&&(Ln(d),d.i=null,d.g.forEach(function(v,N){var X=N.toLowerCase();N!=X&&(Kr(this,N),ol(this,X,v))},d)),d.j=x}function Ua(d,x){const v=new Pn;if(g.Image){const N=new Image;N.onload=O(Un,v,"TestLoadImage: loaded",!0,x,N),N.onerror=O(Un,v,"TestLoadImage: error",!1,x,N),N.onabort=O(Un,v,"TestLoadImage: abort",!1,x,N),N.ontimeout=O(Un,v,"TestLoadImage: timeout",!1,x,N),g.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else x(!1)}function nr(d,x){const v=new Pn,N=new AbortController,X=setTimeout(()=>{N.abort(),Un(v,"TestPingServer: timeout",!1,x)},1e4);fetch(d,{signal:N.signal}).then(oe=>{clearTimeout(X),oe.ok?Un(v,"TestPingServer: ok",!0,x):Un(v,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(X),Un(v,"TestPingServer: error",!1,x)})}function Un(d,x,v,N,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),N(v)}catch{}}function za(){this.g=new ja}function pr(d,x,v){const N=v||"";try{sl(d,function(X,oe){let pe=X;y(X)&&(pe=er(X)),x.push(N+oe+"="+encodeURIComponent(pe))})}catch(X){throw x.push(N+"type="+encodeURIComponent("_badmap")),X}}function Cs(d){this.l=d.Ub||null,this.j=d.eb||!1}F(Cs,Qo),Cs.prototype.g=function(){return new Jr(this.l,this.j)},Cs.prototype.i=function(d){return function(){return d}}({});function Jr(d,x){mt.call(this),this.D=d,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(Jr,mt),r=Jr.prototype,r.open=function(d,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=x,this.readyState=1,xr(this)},r.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(x.body=d),(this.D||g).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yr(this)),this.readyState=0},r.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,xr(this)),this.g&&(this.readyState=3,xr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ll(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function ll(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}r.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var x=d.value?d.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!d.done}))&&(this.response=this.responseText+=x)}d.done?yr(this):xr(this),this.readyState==3&&ll(this)}},r.Ra=function(d){this.g&&(this.response=this.responseText=d,yr(this))},r.Qa=function(d){this.g&&(this.response=d,yr(this))},r.ga=function(){this.g&&yr(this)};function yr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,xr(d)}r.setRequestHeader=function(d,x){this.u.append(d,x)},r.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],x=this.h.entries();for(var v=x.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=x.next();return d.join(`\r
`)};function xr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Jr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function cl(d){let x="";return te(d,function(v,N){x+=N,x+=":",x+=v,x+=`\r
`}),x}function Ht(d,x,v){e:{for(N in v){var N=!1;break e}N=!0}N||(v=cl(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):tt(d,x,v))}function We(d){mt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(We,mt);var Oi=/^https?$/i,Ha=["POST","PUT"];r=We.prototype,r.Ha=function(d){this.J=d},r.ea=function(d,x,v,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);x=x?x.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hr.g(),this.v=this.o?Ko(this.o):Ko(hr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(x,String(d),!0),this.B=!1}catch(oe){ou(this,oe);return}if(d=v||"",v=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var X in N)v.set(X,N[X]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const oe of N.keys())v.set(oe,N.get(oe));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(v.keys()).find(oe=>oe.toLowerCase()=="content-type"),X=g.FormData&&d instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Ha,x,void 0))||N||X||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,pe]of v)this.g.setRequestHeader(oe,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ba(this),this.u=!0,this.g.send(d),this.u=!1}catch(oe){ou(this,oe)}};function ou(d,x){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=x,d.m=5,Mi(d),br(d)}function Mi(d){d.A||(d.A=!0,Xe(d,"complete"),Xe(d,"error"))}r.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Xe(this,"complete"),Xe(this,"abort"),br(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),br(this,!0)),We.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Pi(this):this.bb())},r.bb=function(){Pi(this)};function Pi(d){if(d.h&&typeof h<"u"&&(!d.v[1]||zn(d)!=4||d.Z()!=2)){if(d.u&&zn(d)==4)nn(d.Ea,0,d);else if(Xe(d,"readystatechange"),zn(d)==4){d.h=!1;try{const pe=d.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var v;if(!(v=x)){var N;if(N=pe===0){var X=String(d.D).match(Ma)[1]||null;!X&&g.self&&g.self.location&&(X=g.self.location.protocol.slice(0,-1)),N=!Oi.test(X?X.toLowerCase():"")}v=N}if(v)Xe(d,"complete"),Xe(d,"success");else{d.m=6;try{var oe=2<zn(d)?d.g.statusText:""}catch{oe=""}d.l=oe+" ["+d.Z()+"]",Mi(d)}}finally{br(d)}}}}function br(d,x){if(d.g){Ba(d);const v=d.g,N=d.v[0]?()=>{}:null;d.g=null,d.v=null,x||Xe(d,"ready");try{v.onreadystatechange=N}catch{}}}function Ba(d){d.I&&(g.clearTimeout(d.I),d.I=null)}r.isActive=function(){return!!this.g};function zn(d){return d.g?d.g.readyState:0}r.Z=function(){try{return 2<zn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(d){if(this.g){var x=this.g.responseText;return d&&x.indexOf(d)==0&&(x=x.substring(d.length)),Si(x)}};function lu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function $h(d){const x={};d=(d.g&&2<=zn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(L(d[N]))continue;var v=M(d[N]);const X=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const oe=x[X]||[];x[X]=oe,oe.push(v)}A(x,function(N){return N.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qa(d,x,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||x}function Vi(d){this.Aa=0,this.i=[],this.j=new Pn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qa("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qa("baseRetryDelayMs",5e3,d),this.cb=qa("retryDelaySeedMs",1e4,d),this.Wa=qa("forwardChannelMaxRetries",2,d),this.wa=qa("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Yr(d&&d.concurrentRequestLimit),this.Da=new za,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Vi.prototype,r.la=8,r.G=1,r.connect=function(d,x,v,N){ut(0),this.W=d,this.H=x||{},v&&N!==void 0&&(this.H.OSID=v,this.H.OAID=N),this.F=this.X,this.I=mu(this,null,this.W),Ui(this)};function ul(d){if(cu(d),d.G==3){var x=d.U++,v=kn(d.I);if(tt(v,"SID",d.K),tt(v,"RID",x),tt(v,"TYPE","terminate"),Fa(d,v),x=new hn(d,d.j,x),x.L=2,x.v=Va(kn(v)),v=!1,g.navigator&&g.navigator.sendBeacon)try{v=g.navigator.sendBeacon(x.v.toString(),"")}catch{}!v&&g.Image&&(new Image().src=x.v,v=!0),v||(x.g=pu(x.j,null),x.g.ea(x.v)),x.F=Date.now(),Ca(x)}gu(d)}function Li(d){d.g&&($a(d),d.g.cancel(),d.g=null)}function cu(d){Li(d),d.u&&(g.clearTimeout(d.u),d.u=null),zi(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&g.clearTimeout(d.s),d.s=null)}function Ui(d){if(!Di(d.h)&&!d.s){d.s=!0;var x=d.Ga;J||D(),H||(J(),H=!0),ue.add(x,d),d.B=0}}function Gh(d,x){return Ri(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=x.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=kt(T(d.Ga,d,x),fl(d,d.B)),d.B++,!0)}r.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const X=new hn(this,this.j,d);let oe=this.o;if(this.S&&(oe?(oe=k(oe),z(oe,this.S)):oe=this.S),this.m!==null||this.O||(X.H=oe,oe=null),this.P)e:{for(var x=0,v=0;v<this.i.length;v++){t:{var N=this.i[v];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(x+=N,4096<x){x=v;break e}if(x===4096||v===this.i.length-1){x=v+1;break e}}x=1e3}else x=1e3;x=uu(this,X,x),v=kn(this.I),tt(v,"RID",d),tt(v,"CVER",22),this.D&&tt(v,"X-HTTP-Session-Id",this.D),Fa(this,v),oe&&(this.O?x="headers="+encodeURIComponent(String(cl(oe)))+"&"+x:this.m&&Ht(v,this.m,oe)),ji(this.h,X),this.Ua&&tt(v,"TYPE","init"),this.P?(tt(v,"$req",x),tt(v,"SID","null"),X.T=!0,tr(X,v,null)):tr(X,v,x),this.G=2}}else this.G==3&&(d?dl(this,d):this.i.length==0||Di(this.h)||dl(this))};function dl(d,x){var v;x?v=x.l:v=d.U++;const N=kn(d.I);tt(N,"SID",d.K),tt(N,"RID",v),tt(N,"AID",d.T),Fa(d,N),d.m&&d.o&&Ht(N,d.m,d.o),v=new hn(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),x&&(d.i=x.D.concat(d.i)),x=uu(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),ji(d.h,v),tr(v,N,x)}function Fa(d,x){d.H&&te(d.H,function(v,N){tt(x,N,v)}),d.l&&sl({},function(v,N){tt(x,N,v)})}function uu(d,x,v){v=Math.min(d.i.length,v);var N=d.l?T(d.l.Na,d.l,d):null;e:{var X=d.i;let oe=-1;for(;;){const pe=["count="+v];oe==-1?0<v?(oe=X[0].g,pe.push("ofs="+oe)):oe=0:pe.push("ofs="+oe);let Be=!0;for(let Ot=0;Ot<v;Ot++){let qe=X[Ot].g;const Bt=X[Ot].map;if(qe-=oe,0>qe)oe=Math.max(0,X[Ot].g-100),Be=!1;else try{pr(Bt,pe,"req"+qe+"_")}catch{N&&N(Bt)}}if(Be){N=pe.join("&");break e}}}return d=d.i.splice(0,v),x.D=d,N}function du(d){if(!d.g&&!d.u){d.Y=1;var x=d.Fa;J||D(),H||(J(),H=!0),ue.add(x,d),d.v=0}}function hl(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=kt(T(d.Fa,d),fl(d,d.v)),d.v++,!0)}r.Fa=function(){if(this.u=null,hu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=kt(T(this.ab,this),d)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Li(this),hu(this))};function $a(d){d.A!=null&&(g.clearTimeout(d.A),d.A=null)}function hu(d){d.g=new hn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var x=kn(d.qa);tt(x,"RID","rpc"),tt(x,"SID",d.K),tt(x,"AID",d.T),tt(x,"CI",d.F?"0":"1"),!d.F&&d.ja&&tt(x,"TO",d.ja),tt(x,"TYPE","xmlhttp"),Fa(d,x),d.m&&d.o&&Ht(x,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=Va(kn(x)),v.m=null,v.P=!0,Gr(v,d)}r.Za=function(){this.C!=null&&(this.C=null,Li(this),hl(this),ut(19))};function zi(d){d.C!=null&&(g.clearTimeout(d.C),d.C=null)}function fu(d,x){var v=null;if(d.g==x){zi(d),$a(d),d.g=null;var N=2}else if(nl(d.h,x))v=x.D,fn(d.h,x),N=1;else return;if(d.G!=0){if(x.o)if(N==1){v=x.m?x.m.length:0,x=Date.now()-x.F;var X=d.B;N=Ns(),Xe(N,new Ct(N,v)),Ui(d)}else du(d);else if(X=x.s,X==3||X==0&&0<x.X||!(N==1&&Gh(d,x)||N==2&&hl(d)))switch(v&&0<v.length&&(x=d.h,x.i=x.i.concat(v)),X){case 1:Zr(d,5);break;case 4:Zr(d,10);break;case 3:Zr(d,6);break;default:Zr(d,2)}}}function fl(d,x){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*x}function Zr(d,x){if(d.j.info("Error code "+x),x==2){var v=T(d.fb,d),N=d.Xa;const X=!N;N=new St(N||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Pa(N,"https"),Va(N),X?Ua(N.toString(),v):nr(N.toString(),v)}else ut(2);d.G=0,d.l&&d.l.sa(x),gu(d),cu(d)}r.fb=function(d){d?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function gu(d){if(d.G=0,d.ka=[],d.l){const x=rl(d.h);(x.length!=0||d.i.length!=0)&&(P(d.ka,x),P(d.ka,d.i),d.h.i.length=0,$(d.i),d.i.length=0),d.l.ra()}}function mu(d,x,v){var N=v instanceof St?kn(v):new St(v);if(N.g!="")x&&(N.g=x+"."+N.g),Is(N,N.s);else{var X=g.location;N=X.protocol,x=x?x+"."+X.hostname:X.hostname,X=+X.port;var oe=new St(null);N&&Pa(oe,N),x&&(oe.g=x),X&&Is(oe,X),v&&(oe.l=v),N=oe}return v=d.D,x=d.ya,v&&x&&tt(N,v,x),tt(N,"VER",d.la),Fa(d,N),N}function pu(d,x,v){if(x&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=d.Ca&&!d.pa?new We(new Cs({eb:v})):new We(d.pa),x.Ha(d.J),x}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function yu(){}r=yu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Hi(){}Hi.prototype.g=function(d,x){return new gn(d,x)};function gn(d,x){mt.call(this),this.g=new Vi(x),this.l=d,this.h=x&&x.messageUrlParams||null,d=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(d?d["X-WebChannel-Content-Type"]=x.messageContentType:d={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(d?d["X-WebChannel-Client-Profile"]=x.va:d={"X-WebChannel-Client-Profile":x.va}),this.g.S=d,(d=x&&x.Sb)&&!L(d)&&(this.g.m=d),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!L(x)&&(this.g.D=x,d=this.h,d!==null&&x in d&&(d=this.h,x in d&&delete d[x])),this.j=new vr(this)}F(gn,mt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){ul(this.g)},gn.prototype.o=function(d){var x=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=er(d),d=v);x.i.push(new su(x.Ya++,d)),x.G==3&&Ui(x)},gn.prototype.N=function(){this.g.l=null,delete this.j,ul(this.g),delete this.g,gn.aa.N.call(this)};function xu(d){Fr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var x=d.__sm__;if(x){e:{for(const v in x){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,x=x!==null&&d in x?x[d]:void 0),this.data=x}else this.data=d}F(xu,Fr);function bu(){Jo.call(this),this.status=1}F(bu,Jo);function vr(d){this.g=d}F(vr,yu),vr.prototype.ua=function(){Xe(this.g,"a")},vr.prototype.ta=function(d){Xe(this.g,new xu(d))},vr.prototype.sa=function(d){Xe(this.g,new bu)},vr.prototype.ra=function(){Xe(this.g,"b")},Hi.prototype.createWebChannel=Hi.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,ww=function(){return new Hi},_w=function(){return Ns()},vw=dr,wm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rs.NO_ERROR=0,Rs.TIMEOUT=8,Rs.HTTP_ERROR=6,Od=Rs,$r.COMPLETE="complete",bw=$r,Xo.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",mt.prototype.listen=mt.prototype.K,oc=Xo,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,xw=We}).apply(typeof _d<"u"?_d:typeof self<"u"?self:typeof window<"u"?window:{});const Qb="@firebase/firestore",Kb="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new qm("@firebase/firestore");function bo(){return pi.logLevel}function be(r,...e){if(pi.logLevel<=Ue.DEBUG){const t=e.map(np);pi.debug(`Firestore (${Uo}): ${r}`,...t)}}function ws(r,...e){if(pi.logLevel<=Ue.ERROR){const t=e.map(np);pi.error(`Firestore (${Uo}): ${r}`,...t)}}function Ro(r,...e){if(pi.logLevel<=Ue.WARN){const t=e.map(np);pi.warn(`Firestore (${Uo}): ${r}`,...t)}}function np(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(r,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,Tw(r,a,t)}function Tw(r,e,t){let a=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw ws(a),new Error(a)}function Qe(r,e,t,a){let i="Unexpected state";typeof t=="string"?i=t:a=t,r||Tw(e,i,a)}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ln.UNAUTHENTICATED))}shutdown(){}}class RD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class jD{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let a=this.i;const i=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let l=new xs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new xs,e.enqueueRetryable(()=>i(this.currentUser))};const h=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await i(this.currentUser)})},g=p=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>g(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new xs)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Qe(typeof a.accessToken=="string",31837,{l:a}),new Ew(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class ID{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CD{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new ID(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const a=l=>{l.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,be("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>a(l))};const i=l=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?i(l):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Xb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Xb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<r;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const i=MD(40);for(let l=0;l<i.length;++l)a.length<20&&i[l]<t&&(a+=e.charAt(i[l]%62))}return a}}function ze(r,e){return r<e?-1:r>e?1:0}function Tm(r,e){const t=Math.min(r.length,e.length);for(let a=0;a<t;a++){const i=r.charAt(a),l=e.charAt(a);if(i!==l)return Jg(i)===Jg(l)?ze(i,l):Jg(i)?1:-1}return ze(r.length,e.length)}const PD=55296,VD=57343;function Jg(r){const e=r.charCodeAt(0);return e>=PD&&e<=VD}function jo(r,e,t){return r.length===e.length&&r.every((a,i)=>t(a,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="__name__";class Nr{constructor(e,t,a){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&De(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Nr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Nr?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let i=0;i<a;i++){const l=Nr.compareSegments(e.get(i),t.get(i));if(l!==0)return l}return ze(e.length,t.length)}static compareSegments(e,t){const a=Nr.isNumericId(e),i=Nr.isNumericId(t);return a&&!i?-1:!a&&i?1:a&&i?Nr.extractNumericId(e).compare(Nr.extractNumericId(t)):Tm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ua.fromString(e.substring(4,e.length-2))}}class lt extends Nr{construct(e,t,a){return new lt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new ye(he.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(i=>i.length>0))}return new lt(t)}static emptyPath(){return new lt([])}}const LD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Nr{construct(e,t,a){return new Zt(e,t,a)}static isValidIdentifier(e){return LD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jb}static keyField(){return new Zt([Jb])}static fromServerFormat(e){const t=[];let a="",i=0;const l=()=>{if(a.length===0)throw new ye(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let h=!1;for(;i<e.length;){const g=e[i];if(g==="\\"){if(i+1===e.length)throw new ye(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ye(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,i+=2}else g==="`"?(h=!h,i++):g!=="."||h?(a+=g,i++):(l(),i++)}if(l(),h)throw new ye(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(lt.fromString(e))}static fromName(e){return new Te(lt.fromString(e).popFirst(5))}static empty(){return new Te(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(r,e,t){if(!t)throw new ye(he.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function UD(r,e,t,a){if(e===!0&&a===!0)throw new ye(he.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Zb(r){if(!Te.isDocumentKey(r))throw new ye(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ev(r){if(Te.isDocumentKey(r))throw new ye(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Sw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function xh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":De(12329,{type:typeof r})}function On(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ye(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xh(r);throw new ye(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(r,e){const t={typeString:r};return e&&(t.value=e),t}function Uc(r,e){if(!Sw(r))throw new ye(he.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const i=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){t=`JSON missing required field: '${a}'`;break}const h=r[a];if(i&&typeof h!==i){t=`JSON field '${a}' must be a ${i}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new ye(he.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=-62135596800,nv=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*nv);return new ct(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<tv)throw new ye(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nv}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Uc(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-tv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:It("string",ct._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new ct(0,0))}static max(){return new je(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=-1;function zD(r,e){const t=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,i=je.fromTimestamp(a===1e9?new ct(t+1,0):new ct(t,a));return new ma(i,Te.empty(),e)}function HD(r){return new ma(r.readTime,r.key,Tc)}class ma{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new ma(je.min(),Te.empty(),Tc)}static max(){return new ma(je.max(),Te.empty(),Tc)}}function BD(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(r.documentKey,e.documentKey),t!==0?t:ze(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(r){if(r.code!==he.FAILED_PRECONDITION||r.message!==qD)throw r;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((a,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,a)=>{t(e)})}static reject(e){return new me((t,a)=>{a(e)})}static waitFor(e){return new me((t,a)=>{let i=0,l=0,h=!1;e.forEach(g=>{++i,g.next(()=>{++l,h&&l===i&&t()},p=>a(p))}),h=!0,l===i&&t()})}static or(e){let t=me.resolve(!1);for(const a of e)t=t.next(i=>i?me.resolve(i):a());return t}static forEach(e,t){const a=[];return e.forEach((i,l)=>{a.push(t.call(this,i,l))}),this.waitFor(a)}static mapArray(e,t){return new me((a,i)=>{const l=e.length,h=new Array(l);let g=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(b=>{h[y]=b,++g,g===l&&a(h)},b=>i(b))}})}static doWhile(e,t){return new me((a,i)=>{const l=()=>{e()===!0?t().next(()=>{l()},i):a()};l()})}}function $D(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ho(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=-1;function vh(r){return r==null}function Wd(r){return r===0&&1/r==-1/0}function GD(r){return typeof r=="number"&&Number.isInteger(r)&&!Wd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="";function YD(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=rv(e)),e=WD(r.get(t),e);return rv(e)}function WD(r,e){let t=e;const a=r.length;for(let i=0;i<a;i++){const l=r.charAt(i);switch(l){case"\0":t+="";break;case Nw:t+="";break;default:t+=l}}return t}function rv(r){return r+Nw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function wa(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Aw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||Jt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const i=this.comparator(e,a.key);if(i===0)return t+a.left.size;i<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wd(this.root,e,this.comparator,!0)}}class wd{constructor(e,t,a,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,t,a,i,l){this.key=e,this.value=t,this.color=a??Jt.RED,this.left=i??Jt.EMPTY,this.right=l??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,i,l){return new Jt(e??this.key,t??this.value,a??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let i=this;const l=a(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,a),null):l===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,a)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Jt.EMPTY;a=i.right.min(),i=i.copy(a.key,a.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,a,i,l){return this}insert(e,t,a){return new Jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const i=a.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new av(this.data.getIterator())}getIteratorFrom(e){return new av(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=a.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class av{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new Ut(Zt.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(t,a)=>t.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Dw("Invalid base64 string: "+l):l}}(e);return new en(t)}static fromUint8Array(e){const t=function(i){let l="";for(let h=0;h<i.length;++h)l+=String.fromCharCode(i[h]);return l}(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const a=new Uint8Array(t.length);for(let i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const QD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pa(r){if(Qe(!!r,39018),typeof r=="string"){let e=0;const t=QD.exec(r);if(Qe(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:_t(r.seconds),nanos:_t(r.nanos)}}function _t(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ya(r){return typeof r=="string"?en.fromBase64String(r):en.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="server_timestamp",jw="__type__",Iw="__previous_value__",Cw="__local_write_time__";function ap(r){return(r?.mapValue?.fields||{})[jw]?.stringValue===Rw}function _h(r){const e=r.mapValue.fields[Iw];return ap(e)?_h(e):e}function Ec(r){const e=pa(r.mapValue.fields[Cw].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,t,a,i,l,h,g,p,y,b){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=i,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=b}}const Qd="(default)";class kc{constructor(e,t){this.projectId=e,this.database=t||Qd}static empty(){return new kc("","")}get isDefaultDatabase(){return this.database===Qd}isEqual(e){return e instanceof kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="__type__",XD="__max__",Td={mapValue:{}},Mw="__vector__",Kd="value";function xa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ap(r)?4:ZD(r)?9007199254740991:JD(r)?10:11:De(28295,{value:r})}function Lr(r,e){if(r===e)return!0;const t=xa(r);if(t!==xa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ec(r).isEqual(Ec(e));case 3:return function(i,l){if(typeof i.timestampValue=="string"&&typeof l.timestampValue=="string"&&i.timestampValue.length===l.timestampValue.length)return i.timestampValue===l.timestampValue;const h=pa(i.timestampValue),g=pa(l.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,l){return ya(i.bytesValue).isEqual(ya(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,l){return _t(i.geoPointValue.latitude)===_t(l.geoPointValue.latitude)&&_t(i.geoPointValue.longitude)===_t(l.geoPointValue.longitude)}(r,e);case 2:return function(i,l){if("integerValue"in i&&"integerValue"in l)return _t(i.integerValue)===_t(l.integerValue);if("doubleValue"in i&&"doubleValue"in l){const h=_t(i.doubleValue),g=_t(l.doubleValue);return h===g?Wd(h)===Wd(g):isNaN(h)&&isNaN(g)}return!1}(r,e);case 9:return jo(r.arrayValue.values||[],e.arrayValue.values||[],Lr);case 10:case 11:return function(i,l){const h=i.mapValue.fields||{},g=l.mapValue.fields||{};if(sv(h)!==sv(g))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(g[p]===void 0||!Lr(h[p],g[p])))return!1;return!0}(r,e);default:return De(52216,{left:r})}}function Sc(r,e){return(r.values||[]).find(t=>Lr(t,e))!==void 0}function Io(r,e){if(r===e)return 0;const t=xa(r),a=xa(e);if(t!==a)return ze(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(r.booleanValue,e.booleanValue);case 2:return function(l,h){const g=_t(l.integerValue||l.doubleValue),p=_t(h.integerValue||h.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1}(r,e);case 3:return iv(r.timestampValue,e.timestampValue);case 4:return iv(Ec(r),Ec(e));case 5:return Tm(r.stringValue,e.stringValue);case 6:return function(l,h){const g=ya(l),p=ya(h);return g.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const g=l.split("/"),p=h.split("/");for(let y=0;y<g.length&&y<p.length;y++){const b=ze(g[y],p[y]);if(b!==0)return b}return ze(g.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const g=ze(_t(l.latitude),_t(h.latitude));return g!==0?g:ze(_t(l.longitude),_t(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return ov(r.arrayValue,e.arrayValue);case 10:return function(l,h){const g=l.fields||{},p=h.fields||{},y=g[Kd]?.arrayValue,b=p[Kd]?.arrayValue,w=ze(y?.values?.length||0,b?.values?.length||0);return w!==0?w:ov(y,b)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===Td.mapValue&&h===Td.mapValue)return 0;if(l===Td.mapValue)return 1;if(h===Td.mapValue)return-1;const g=l.fields||{},p=Object.keys(g),y=h.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let w=0;w<p.length&&w<b.length;++w){const T=Tm(p[w],b[w]);if(T!==0)return T;const O=Io(g[p[w]],y[b[w]]);if(O!==0)return O}return ze(p.length,b.length)}(r.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function iv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ze(r,e);const t=pa(r),a=pa(e),i=ze(t.seconds,a.seconds);return i!==0?i:ze(t.nanos,a.nanos)}function ov(r,e){const t=r.values||[],a=e.values||[];for(let i=0;i<t.length&&i<a.length;++i){const l=Io(t[i],a[i]);if(l)return l}return ze(t.length,a.length)}function Co(r){return Em(r)}function Em(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const a=pa(t);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return ya(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Te.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let a="[",i=!0;for(const l of t.values||[])i?i=!1:a+=",",a+=Em(l);return a+"]"}(r.arrayValue):"mapValue"in r?function(t){const a=Object.keys(t.fields||{}).sort();let i="{",l=!0;for(const h of a)l?l=!1:i+=",",i+=`${h}:${Em(t.fields[h])}`;return i+"}"}(r.mapValue):De(61005,{value:r})}function Md(r){switch(xa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_h(r);return e?16+Md(e):16;case 5:return 2*r.stringValue.length;case 6:return ya(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((i,l)=>i+Md(l),0)}(r.arrayValue);case 10:case 11:return function(a){let i=0;return wa(a.fields,(l,h)=>{i+=l.length+Md(h)}),i}(r.mapValue);default:throw De(13486,{value:r})}}function lv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function km(r){return!!r&&"integerValue"in r}function ip(r){return!!r&&"arrayValue"in r}function cv(r){return!!r&&"nullValue"in r}function uv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Pd(r){return!!r&&"mapValue"in r}function JD(r){return(r?.mapValue?.fields||{})[Ow]?.stringValue===Mw}function pc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return wa(r.mapValue.fields,(t,a)=>e.mapValue.fields[t]=pc(a)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pc(r.arrayValue.values[t]);return e}return{...r}}function ZD(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===XD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!Pd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(t)}setAll(e){let t=Zt.emptyPath(),a={},i=[];e.forEach((h,g)=>{if(!t.isImmediateParentOf(g)){const p=this.getFieldsMap(t);this.applyChanges(p,a,i),a={},i=[],t=g.popLast()}h?a[g.lastSegment()]=pc(h):i.push(g.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,a,i)}delete(e){const t=this.field(e.popLast());Pd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let i=t.mapValue.fields[e.get(a)];Pd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,a){wa(t,(i,l)=>e[i]=l);for(const i of a)delete e[i]}clone(){return new _n(pc(this.value))}}function Pw(r){const e=[];return wa(r.fields,(t,a)=>{const i=new Zt([t]);if(Pd(a)){const l=Pw(a.mapValue).fields;if(l.length===0)e.push(i);else for(const h of l)e.push(i.child(h))}else e.push(i)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,a,i,l,h,g){this.key=e,this.documentType=t,this.version=a,this.readTime=i,this.createTime=l,this.data=h,this.documentState=g}static newInvalidDocument(e){return new cn(e,0,je.min(),je.min(),je.min(),_n.empty(),0)}static newFoundDocument(e,t,a,i){return new cn(e,1,t,je.min(),a,i,0)}static newNoDocument(e,t){return new cn(e,2,t,je.min(),je.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,je.min(),je.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t){this.position=e,this.inclusive=t}}function dv(r,e,t){let a=0;for(let i=0;i<r.position.length;i++){const l=e[i],h=r.position[i];if(l.field.isKeyField()?a=Te.comparator(Te.fromName(h.referenceValue),t.key):a=Io(h,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function hv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Lr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t="asc"){this.field=e,this.dir=t}}function eR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{}class jt extends Vw{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new nR(e,t,a):t==="array-contains"?new aR(e,a):t==="in"?new iR(e,a):t==="not-in"?new oR(e,a):t==="array-contains-any"?new lR(e,a):new jt(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new rR(e,a):new sR(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Io(t,this.value)):t!==null&&xa(this.value)===xa(t)&&this.matchesComparison(Io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ur extends Vw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ur(e,t)}matches(e){return Lw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Lw(r){return r.op==="and"}function Uw(r){return tR(r)&&Lw(r)}function tR(r){for(const e of r.filters)if(e instanceof ur)return!1;return!0}function Sm(r){if(r instanceof jt)return r.field.canonicalString()+r.op.toString()+Co(r.value);if(Uw(r))return r.filters.map(e=>Sm(e)).join(",");{const e=r.filters.map(t=>Sm(t)).join(",");return`${r.op}(${e})`}}function zw(r,e){return r instanceof jt?function(a,i){return i instanceof jt&&a.op===i.op&&a.field.isEqual(i.field)&&Lr(a.value,i.value)}(r,e):r instanceof ur?function(a,i){return i instanceof ur&&a.op===i.op&&a.filters.length===i.filters.length?a.filters.reduce((l,h,g)=>l&&zw(h,i.filters[g]),!0):!1}(r,e):void De(19439)}function Hw(r){return r instanceof jt?function(t){return`${t.field.canonicalString()} ${t.op} ${Co(t.value)}`}(r):r instanceof ur?function(t){return t.op.toString()+" {"+t.getFilters().map(Hw).join(" ,")+"}"}(r):"Filter"}class nR extends jt{constructor(e,t,a){super(e,t,a),this.key=Te.fromName(a.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class rR extends jt{constructor(e,t){super(e,"in",t),this.keys=Bw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sR extends jt{constructor(e,t){super(e,"not-in",t),this.keys=Bw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Bw(r,e){return(e.arrayValue?.values||[]).map(t=>Te.fromName(t.referenceValue))}class aR extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ip(t)&&Sc(t.arrayValue,this.value)}}class iR extends jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Sc(this.value.arrayValue,t)}}class oR extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Sc(this.value.arrayValue,t)}}class lR extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ip(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>Sc(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t=null,a=[],i=[],l=null,h=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=i,this.limit=l,this.startAt=h,this.endAt=g,this.Te=null}}function fv(r,e=null,t=[],a=[],i=null,l=null,h=null){return new cR(r,e,t,a,i,l,h)}function op(r){const e=Ie(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>Sm(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>function(l){return l.field.canonicalString()+l.dir}(a)).join(","),vh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>Co(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>Co(a)).join(",")),e.Te=t}return e.Te}function lp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!eR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!zw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!hv(r.startAt,e.startAt)&&hv(r.endAt,e.endAt)}function Nm(r){return Te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t=null,a=[],i=[],l=null,h="F",g=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=i,this.limit=l,this.limitType=h,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uR(r,e,t,a,i,l,h,g){return new Bo(r,e,t,a,i,l,h,g)}function wh(r){return new Bo(r)}function gv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function qw(r){return r.collectionGroup!==null}function yc(r){const e=Ie(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new Ut(Zt.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(g=g.add(y.field))})}),g})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Nc(l,a))}),t.has(Zt.keyField().canonicalString())||e.Ie.push(new Nc(Zt.keyField(),a))}return e.Ie}function Or(r){const e=Ie(r);return e.Ee||(e.Ee=dR(e,yc(r))),e.Ee}function dR(r,e){if(r.limitType==="F")return fv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const l=i.dir==="desc"?"asc":"desc";return new Nc(i.field,l)});const t=r.endAt?new Xd(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new Xd(r.startAt.position,r.startAt.inclusive):null;return fv(r.path,r.collectionGroup,e,r.filters,r.limit,t,a)}}function Am(r,e){const t=r.filters.concat([e]);return new Bo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Dm(r,e,t){return new Bo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Th(r,e){return lp(Or(r),Or(e))&&r.limitType===e.limitType}function Fw(r){return`${op(Or(r))}|lt:${r.limitType}`}function vo(r){return`Query(target=${function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map(i=>Hw(i)).join(", ")}]`),vh(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map(i=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(i)).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map(i=>Co(i)).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map(i=>Co(i)).join(",")),`Target(${a})`}(Or(r))}; limitType=${r.limitType})`}function Eh(r,e){return e.isFoundDocument()&&function(a,i){const l=i.key.path;return a.collectionGroup!==null?i.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):Te.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)}(r,e)&&function(a,i){for(const l of yc(a))if(!l.field.isKeyField()&&i.data.field(l.field)===null)return!1;return!0}(r,e)&&function(a,i){for(const l of a.filters)if(!l.matches(i))return!1;return!0}(r,e)&&function(a,i){return!(a.startAt&&!function(h,g,p){const y=dv(h,g,p);return h.inclusive?y<=0:y<0}(a.startAt,yc(a),i)||a.endAt&&!function(h,g,p){const y=dv(h,g,p);return h.inclusive?y>=0:y>0}(a.endAt,yc(a),i))}(r,e)}function hR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function $w(r){return(e,t)=>{let a=!1;for(const i of yc(r)){const l=fR(i,e,t);if(l!==0)return l;a=a||i.field.isKeyField()}return 0}}function fR(r,e,t){const a=r.field.isKeyField()?Te.comparator(e.key,t.key):function(l,h,g){const p=h.data.field(l),y=g.data.field(l);return p!==null&&y!==null?Io(p,y):De(42886)}(r.field,e,t);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return De(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[i,l]of a)if(this.equalsFn(i,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),i=this.inner[a];if(i===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return a.length===1?delete this.inner[t]:a.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wa(this.inner,(t,a)=>{for(const[i,l]of a)e(i,l)})}isEmpty(){return Aw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=new gt(Te.comparator);function Ts(){return gR}const Gw=new gt(Te.comparator);function lc(...r){let e=Gw;for(const t of r)e=e.insert(t.key,t);return e}function Yw(r){let e=Gw;return r.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function ui(){return xc()}function Ww(){return xc()}function xc(){return new _i(r=>r.toString(),(r,e)=>r.isEqual(e))}const mR=new gt(Te.comparator),pR=new Ut(Te.comparator);function He(...r){let e=pR;for(const t of r)e=e.add(t);return e}const yR=new Ut(ze);function xR(){return yR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wd(e)?"-0":e}}function Qw(r){return{integerValue:""+r}}function bR(r,e){return GD(e)?Qw(e):cp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this._=void 0}}function vR(r,e,t){return r instanceof Ac?function(i,l){const h={fields:{[jw]:{stringValue:Rw},[Cw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return l&&ap(l)&&(l=_h(l)),l&&(h.fields[Iw]=l),{mapValue:h}}(t,e):r instanceof Oo?Xw(r,e):r instanceof Dc?Jw(r,e):function(i,l){const h=Kw(i,l),g=mv(h)+mv(i.Ae);return km(h)&&km(i.Ae)?Qw(g):cp(i.serializer,g)}(r,e)}function _R(r,e,t){return r instanceof Oo?Xw(r,e):r instanceof Dc?Jw(r,e):t}function Kw(r,e){return r instanceof Jd?function(a){return km(a)||function(l){return!!l&&"doubleValue"in l}(a)}(e)?e:{integerValue:0}:null}class Ac extends kh{}class Oo extends kh{constructor(e){super(),this.elements=e}}function Xw(r,e){const t=Zw(e);for(const a of r.elements)t.some(i=>Lr(i,a))||t.push(a);return{arrayValue:{values:t}}}class Dc extends kh{constructor(e){super(),this.elements=e}}function Jw(r,e){let t=Zw(e);for(const a of r.elements)t=t.filter(i=>!Lr(i,a));return{arrayValue:{values:t}}}class Jd extends kh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function mv(r){return _t(r.integerValue||r.doubleValue)}function Zw(r){return ip(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,t){this.field=e,this.transform=t}}function wR(r,e){return r.field.isEqual(e.field)&&function(a,i){return a instanceof Oo&&i instanceof Oo||a instanceof Dc&&i instanceof Dc?jo(a.elements,i.elements,Lr):a instanceof Jd&&i instanceof Jd?Lr(a.Ae,i.Ae):a instanceof Ac&&i instanceof Ac}(r.transform,e.transform)}class TR{constructor(e,t){this.version=e,this.transformResults=t}}class wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Sh{}function tT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Nh(r.key,wn.none()):new zc(r.key,r.data,wn.none());{const t=r.data,a=_n.empty();let i=new Ut(Zt.comparator);for(let l of e.fields)if(!i.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?a.delete(l):a.set(l,h),i=i.add(l)}return new Ta(r.key,a,new Cn(i.toArray()),wn.none())}}function ER(r,e,t){r instanceof zc?function(i,l,h){const g=i.value.clone(),p=yv(i.fieldTransforms,l,h.transformResults);g.setAll(p),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(r,e,t):r instanceof Ta?function(i,l,h){if(!Vd(i.precondition,l))return void l.convertToUnknownDocument(h.version);const g=yv(i.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(nT(i)),p.setAll(g),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,t):function(i,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function bc(r,e,t,a){return r instanceof zc?function(l,h,g,p){if(!Vd(l.precondition,h))return g;const y=l.value.clone(),b=xv(l.fieldTransforms,p,h);return y.setAll(b),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(r,e,t,a):r instanceof Ta?function(l,h,g,p){if(!Vd(l.precondition,h))return g;const y=xv(l.fieldTransforms,p,h),b=h.data;return b.setAll(nT(l)),b.setAll(y),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),g===null?null:g.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(w=>w.field))}(r,e,t,a):function(l,h,g){return Vd(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g}(r,e,t)}function kR(r,e){let t=null;for(const a of r.fieldTransforms){const i=e.data.field(a.field),l=Kw(a.transform,i||null);l!=null&&(t===null&&(t=_n.empty()),t.set(a.field,l))}return t||null}function pv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(a,i){return a===void 0&&i===void 0||!(!a||!i)&&jo(a,i,(l,h)=>wR(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class zc extends Sh{constructor(e,t,a,i=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ta extends Sh{constructor(e,t,a,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function nT(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=r.data.field(t);e.set(t,a)}}),e}function yv(r,e,t){const a=new Map;Qe(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const l=r[i],h=l.transform,g=e.data.field(l.field);a.set(l.field,_R(h,g,t[i]))}return a}function xv(r,e,t){const a=new Map;for(const i of r){const l=i.transform,h=t.data.field(i.field);a.set(i.field,vR(l,h,e))}return a}class Nh extends Sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SR extends Sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,t,a,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=i}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&ER(l,e,a[i])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=bc(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=bc(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=Ww();return this.mutations.forEach(i=>{const l=e.get(i.key),h=l.overlayedDocument;let g=this.applyToLocalView(h,l.mutatedFields);g=t.has(i.key)?null:g;const p=tT(h,g);p!==null&&a.set(i.key,p),h.isValidDocument()||h.convertToNoDocument(je.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),He())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(t,a)=>pv(t,a))&&jo(this.baseMutations,e.baseMutations,(t,a)=>pv(t,a))}}class up{constructor(e,t,a,i){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=i}static from(e,t,a){Qe(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let i=function(){return mR}();const l=e.mutations;for(let h=0;h<l.length;h++)i=i.insert(l[h].key,a[h].version);return new up(e,t,a,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,$e;function RR(r){switch(r){case he.OK:return De(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return De(15467,{code:r})}}function rT(r){if(r===void 0)return ws("GRPC error has no .code"),he.UNKNOWN;switch(r){case Dt.OK:return he.OK;case Dt.CANCELLED:return he.CANCELLED;case Dt.UNKNOWN:return he.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return he.INTERNAL;case Dt.UNAVAILABLE:return he.UNAVAILABLE;case Dt.UNAUTHENTICATED:return he.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case Dt.NOT_FOUND:return he.NOT_FOUND;case Dt.ALREADY_EXISTS:return he.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return he.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case Dt.ABORTED:return he.ABORTED;case Dt.OUT_OF_RANGE:return he.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return he.UNIMPLEMENTED;case Dt.DATA_LOSS:return he.DATA_LOSS;default:return De(39323,{code:r})}}($e=Dt||(Dt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=new ua([4294967295,4294967295],0);function bv(r){const e=jR().encode(r),t=new yw;return t.update(e),new Uint8Array(t.digest())}function vv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ua([t,a],0),new ua([i,l],0)]}class dp{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new cc(`Invalid padding: ${t}`);if(a<0)throw new cc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new cc(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new cc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ua.fromNumber(this.ge)}ye(e,t,a){let i=e.add(t.multiply(ua.fromNumber(a)));return i.compare(IR)===1&&(i=new ua([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=bv(e),[a,i]=vv(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(a,i,l);if(!this.we(h))return!1}return!0}static create(e,t,a){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new dp(l,i,t);return a.forEach(g=>h.insert(g)),h}insert(e){if(this.ge===0)return;const t=bv(e),[a,i]=vv(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(a,i,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,t,a,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const i=new Map;return i.set(e,Hc.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Ah(je.min(),i,new gt(ze),Ts(),He())}}class Hc{constructor(e,t,a,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Hc(a,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t,a,i){this.be=e,this.removedTargetIds=t,this.key=a,this.De=i}}class sT{constructor(e,t){this.targetId=e,this.Ce=t}}class aT{constructor(e,t,a=en.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=i}}class _v{constructor(){this.ve=0,this.Fe=wv(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),a=He();return this.Fe.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:a=a.add(i);break;default:De(38017,{changeType:l})}}),new Hc(this.Me,this.xe,e,t,a)}qe(){this.Oe=!1,this.Fe=wv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ts(),this.Je=Ed(),this.He=Ed(),this.Ye=new gt(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:De(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((a,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,a=e.Ce.count,i=this.ot(t);if(i){const l=i.target;if(Nm(l))if(a===0){const h=new Te(l.path);this.et(t,h,cn.newNoDocument(h,je.min()))}else Qe(a===1,20013,{expectedCount:a});else{const h=this._t(t);if(h!==a){const g=this.ut(e),p=g?this.ct(g,e,h):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:i=0},hashCount:l=0}=t;let h,g;try{h=ya(a).toUint8Array()}catch(p){if(p instanceof Dw)return Ro("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new dp(h,i,l)}catch(p){return Ro(p instanceof cc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let i=0;return a.forEach(l=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(g)||(this.et(t,l,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((l,h)=>{const g=this.ot(h);if(g){if(l.current&&Nm(g.target)){const p=new Te(g.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,cn.newNoDocument(p,e))}l.Be&&(t.set(h,l.ke()),l.qe())}});let a=He();this.He.forEach((l,h)=>{let g=!0;h.forEachWhile(p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(a=a.add(l))}),this.je.forEach((l,h)=>h.setReadTime(e));const i=new Ah(e,t,this.Ye,this.je,a);return this.je=Ts(),this.Je=Ed(),this.He=Ed(),this.Ye=new gt(ze),i}Xe(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,a),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new _v,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ut(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ut(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||be("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _v),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ed(){return new gt(Te.comparator)}function wv(){return new gt(Te.comparator)}const OR={asc:"ASCENDING",desc:"DESCENDING"},MR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PR={and:"AND",or:"OR"};class VR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rm(r,e){return r.useProto3Json||vh(e)?e:{value:e}}function Zd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function LR(r,e){return Zd(r,e.toTimestamp())}function Mr(r){return Qe(!!r,49232),je.fromTimestamp(function(t){const a=pa(t);return new ct(a.seconds,a.nanos)}(r))}function hp(r,e){return jm(r,e).canonicalString()}function jm(r,e){const t=function(i){return new lt(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function oT(r){const e=lt.fromString(r);return Qe(hT(e),10190,{key:e.toString()}),e}function Im(r,e){return hp(r.databaseId,e.path)}function Zg(r,e){const t=oT(e);if(t.get(1)!==r.databaseId.projectId)throw new ye(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ye(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Te(cT(t))}function lT(r,e){return hp(r.databaseId,e)}function UR(r){const e=oT(r);return e.length===4?lt.emptyPath():cT(e)}function Cm(r){return new lt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function cT(r){return Qe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Tv(r,e,t){return{name:Im(r,e),fields:t.value.mapValue.fields}}function zR(r,e){let t;if("targetChange"in e){e.targetChange;const a=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:De(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],l=function(y,b){return y.useProto3Json?(Qe(b===void 0||typeof b=="string",58123),en.fromBase64String(b||"")):(Qe(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),en.fromUint8Array(b||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&function(y){const b=y.code===void 0?he.UNKNOWN:rT(y.code);return new ye(b,y.message||"")}(h);t=new aT(a,i,l,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const i=Zg(r,a.document.name),l=Mr(a.document.updateTime),h=a.document.createTime?Mr(a.document.createTime):je.min(),g=new _n({mapValue:{fields:a.document.fields}}),p=cn.newFoundDocument(i,l,h,g),y=a.targetIds||[],b=a.removedTargetIds||[];t=new Ld(y,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const i=Zg(r,a.document),l=a.readTime?Mr(a.readTime):je.min(),h=cn.newNoDocument(i,l),g=a.removedTargetIds||[];t=new Ld([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const i=Zg(r,a.document),l=a.removedTargetIds||[];t=new Ld([],l,i,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:i=0,unchangedNames:l}=a,h=new DR(i,l),g=a.targetId;t=new sT(g,h)}}return t}function HR(r,e){let t;if(e instanceof zc)t={update:Tv(r,e.key,e.value)};else if(e instanceof Nh)t={delete:Im(r,e.key)};else if(e instanceof Ta)t={update:Tv(r,e.key,e.data),updateMask:KR(e.fieldMask)};else{if(!(e instanceof SR))return De(16599,{Vt:e.type});t={verify:Im(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(l,h){const g=h.transform;if(g instanceof Ac)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Oo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Dc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Jd)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw De(20930,{transform:h.transform})}(0,a))),e.precondition.isNone||(t.currentDocument=function(i,l){return l.updateTime!==void 0?{updateTime:LR(i,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:De(27497)}(r,e.precondition)),t}function BR(r,e){return r&&r.length>0?(Qe(e!==void 0,14353),r.map(t=>function(i,l){let h=i.updateTime?Mr(i.updateTime):Mr(l);return h.isEqual(je.min())&&(h=Mr(l)),new TR(h,i.transformResults||[])}(t,e))):[]}function qR(r,e){return{documents:[lT(r,e.path)]}}function FR(r,e){const t={structuredQuery:{}},a=e.path;let i;e.collectionGroup!==null?(i=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=lT(r,i);const l=function(y){if(y.length!==0)return dT(ur.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(y){if(y.length!==0)return y.map(b=>function(T){return{field:_o(T.field),direction:YR(T.dir)}}(b))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const g=Rm(r,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ft:t,parent:i}}function $R(r){let e=UR(r.parent);const t=r.structuredQuery,a=t.from?t.from.length:0;let i=null;if(a>0){Qe(a===1,65062);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=function(w){const T=uT(w);return T instanceof ur&&Uw(T)?T.getFilters():[T]}(t.where));let h=[];t.orderBy&&(h=function(w){return w.map(T=>function(F){return new Nc(wo(F.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(T))}(t.orderBy));let g=null;t.limit&&(g=function(w){let T;return T=typeof w=="object"?w.value:w,vh(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(w){const T=!!w.before,O=w.values||[];return new Xd(O,T)}(t.startAt));let y=null;return t.endAt&&(y=function(w){const T=!w.before,O=w.values||[];return new Xd(O,T)}(t.endAt)),uR(e,i,h,l,g,"F",p,y)}function GR(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uT(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=wo(t.unaryFilter.field);return jt.create(a,"==",{doubleValue:NaN});case"IS_NULL":const i=wo(t.unaryFilter.field);return jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wo(t.unaryFilter.field);return jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=wo(t.unaryFilter.field);return jt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}}(r):r.fieldFilter!==void 0?function(t){return jt.create(wo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return ur.create(t.compositeFilter.filters.map(a=>uT(a)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De(1026)}}(t.compositeFilter.op))}(r):De(30097,{filter:r})}function YR(r){return OR[r]}function WR(r){return MR[r]}function QR(r){return PR[r]}function _o(r){return{fieldPath:r.canonicalString()}}function wo(r){return Zt.fromServerFormat(r.fieldPath)}function dT(r){return r instanceof jt?function(t){if(t.op==="=="){if(uv(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(cv(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(uv(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(cv(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:WR(t.op),value:t.value}}}(r):r instanceof ur?function(t){const a=t.getFilters().map(i=>dT(i));return a.length===1?a[0]:{compositeFilter:{op:QR(t.op),filters:a}}}(r):De(54877,{filter:r})}function KR(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,t,a,i,l=je.min(),h=je.min(),g=en.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.yt=e}}function JR(r){const e=$R({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Dm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.Cn=new ej}addToCollectionParentIndex(e,t){return this.Cn.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(ma.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(ma.min())}updateCollectionGroup(e,t,a){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class ej{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),i=this.index[t]||new Ut(lt.comparator),l=!i.has(a);return this.index[t]=i.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),i=this.index[t];return i&&i.has(a)}getEntries(e){return(this.index[e]||new Ut(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fT=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(fT,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mo(0)}static cr(){return new Mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="LruGarbageCollector",tj=1048576;function Sv([r,e],[t,a]){const i=ze(r,t);return i===0?ze(e,a):i}class nj{constructor(e){this.Ir=e,this.buffer=new Ut(Sv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Sv(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rj{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){be(kv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ho(t)?be(kv,"Ignoring IndexedDB error during garbage collection: ",t):await zo(t)}await this.Vr(3e5)})}}class sj{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(t===0)return me.resolve(bh.ce);const a=new nj(t);return this.mr.forEachTarget(e,i=>a.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>a.Ar(i))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.mr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(Ev)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ev):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let a,i,l,h,g,p,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,h=Date.now(),this.nthSequenceNumber(e,i))).next(w=>(a=w,g=Date.now(),this.removeTargets(e,a,t))).next(w=>(l=w,p=Date.now(),this.removeOrphanedDocuments(e,a))).next(w=>(y=Date.now(),bo()<=Ue.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-b}ms
	Determined least recently used ${i} in `+(g-h)+`ms
	Removed ${l} targets in `+(p-g)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-b}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:w})))}}function aj(r,e){return new sj(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.changes=new _i(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?me.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,t,a,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=i}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(a=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(a!==null&&bc(a.mutation,i,Cn.empty(),ct.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,He()).next(()=>a))}getLocalViewOfDocuments(e,t,a=He()){const i=ui();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,a).next(l=>{let h=lc();return l.forEach((g,p)=>{h=h.insert(g,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const a=ui();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,He()))}populateOverlays(e,t,a){const i=[];return a.forEach(l=>{t.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(e,i).next(l=>{l.forEach((h,g)=>{t.set(h,g)})})}computeViews(e,t,a,i){let l=Ts();const h=xc(),g=function(){return xc()}();return t.forEach((p,y)=>{const b=a.get(y.key);i.has(y.key)&&(b===void 0||b.mutation instanceof Ta)?l=l.insert(y.key,y):b!==void 0?(h.set(y.key,b.mutation.getFieldMask()),bc(b.mutation,y,b.mutation.getFieldMask(),ct.now())):h.set(y.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,b)=>h.set(y,b)),t.forEach((y,b)=>g.set(y,new oj(b,h.get(y)??null))),g))}recalculateAndSaveOverlays(e,t){const a=xc();let i=new gt((h,g)=>h-g),l=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const g of h)g.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let b=a.get(p)||Cn.empty();b=g.applyToLocalView(y,b),a.set(p,b);const w=(i.get(g.batchId)||He()).add(p);i=i.insert(g.batchId,w)})}).next(()=>{const h=[],g=i.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,b=p.value,w=Ww();b.forEach(T=>{if(!l.has(T)){const O=tT(t.get(T),a.get(T));O!==null&&w.set(T,O),l=l.add(T)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,w))}return me.waitFor(h)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a,i){return function(h){return Te.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,i):this.getDocumentsMatchingCollectionQuery(e,t,a,i)}getNextDocuments(e,t,a,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,i).next(l=>{const h=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,i-l.size):me.resolve(ui());let g=Tc,p=l;return h.next(y=>me.forEach(y,(b,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),l.get(b)?me.resolve():this.remoteDocumentCache.getEntry(e,b).next(T=>{p=p.insert(b,T)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,He())).next(b=>({batchId:g,changes:Yw(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(a=>{let i=lc();return a.isFoundDocument()&&(i=i.insert(a.key,a)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,a,i){const l=t.collectionGroup;let h=lc();return this.indexManager.getCollectionParents(e,l).next(g=>me.forEach(g,p=>{const y=function(w,T){return new Bo(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,a,i).next(b=>{b.forEach((w,T)=>{h=h.insert(w,T)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,a,i){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,i))).next(h=>{l.forEach((p,y)=>{const b=y.getKey();h.get(b)===null&&(h=h.insert(b,cn.newInvalidDocument(b)))});let g=lc();return h.forEach((p,y)=>{const b=l.get(p);b!==void 0&&bc(b.mutation,y,Cn.empty(),ct.now()),Eh(t,y)&&(g=g.insert(p,y))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return me.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Mr(i.createTime)}}(t)),me.resolve()}getNamedQuery(e,t){return me.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:JR(i.bundledQuery),readTime:Mr(i.readTime)}}(t)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(){this.overlays=new gt(Te.comparator),this.qr=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const a=ui();return me.forEach(t,i=>this.getOverlay(e,i).next(l=>{l!==null&&a.set(i,l)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((i,l)=>{this.St(e,t,l)}),me.resolve()}removeOverlaysForBatchId(e,t,a){const i=this.qr.get(a);return i!==void 0&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.qr.delete(a)),me.resolve()}getOverlaysForCollection(e,t,a){const i=ui(),l=t.length+1,h=new Te(t.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>a&&i.set(p.getKey(),p)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,a,i){let l=new gt((y,b)=>y-b);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>a){let b=l.get(y.largestBatchId);b===null&&(b=ui(),l=l.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const g=ui(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,b)=>g.set(y,b)),!(g.size()>=i)););return me.resolve(g)}St(e,t,a){const i=this.overlays.get(a.key);if(i!==null){const h=this.qr.get(i.largestBatchId).delete(a.key);this.qr.set(i.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new AR(t,a));let l=this.qr.get(t);l===void 0&&(l=He(),this.qr.set(t,l)),this.qr.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this.Qr=new Ut(Gt.$r),this.Ur=new Ut(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const a=new Gt(e,t);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.Gr(new Gt(e,t))}zr(e,t){e.forEach(a=>this.removeReference(a,t))}jr(e){const t=new Te(new lt([])),a=new Gt(t,e),i=new Gt(t,e+1),l=[];return this.Ur.forEachInRange([a,i],h=>{this.Gr(h),l.push(h.key)}),l}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new lt([])),a=new Gt(t,e),i=new Gt(t,e+1);let l=He();return this.Ur.forEachInRange([a,i],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Gt(e,0),a=this.Qr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Gt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(Gt.$r)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,i){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new NR(l,t,a,i);this.mutationQueue.push(h);for(const g of i)this.Zr=this.Zr.add(new Gt(g.key,l)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return me.resolve(h)}lookupMutationBatch(e,t){return me.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,i=this.ei(a),l=i<0?0:i;return me.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?sp:this.tr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Gt(t,0),i=new Gt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([a,i],h=>{const g=this.Xr(h.Yr);l.push(g)}),me.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Ut(ze);return t.forEach(i=>{const l=new Gt(i,0),h=new Gt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],g=>{a=a.add(g.Yr)})}),me.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,i=a.length+1;let l=a;Te.isDocumentKey(l)||(l=l.child(""));const h=new Gt(new Te(l),0);let g=new Ut(ze);return this.Zr.forEachWhile(p=>{const y=p.key.path;return!!a.isPrefixOf(y)&&(y.length===i&&(g=g.add(p.Yr)),!0)},h),me.resolve(this.ti(g))}ti(e){const t=[];return e.forEach(a=>{const i=this.Xr(a);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return me.forEach(t.mutations,i=>{const l=new Gt(i.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=a})}ir(e){}containsKey(e,t){const a=new Gt(t,0),i=this.Zr.firstAfterOrEqual(a);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.ri=e,this.docs=function(){return new gt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,i=this.docs.get(a),l=i?i.size:0,h=this.ri(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return me.resolve(a?a.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let a=Ts();return t.forEach(i=>{const l=this.docs.get(i);a=a.insert(i,l?l.document.mutableCopy():cn.newInvalidDocument(i))}),me.resolve(a)}getDocumentsMatchingQuery(e,t,a,i){let l=Ts();const h=t.path,g=new Te(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:b}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||BD(HD(b),a)<=0||(i.has(b.key)||Eh(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return me.resolve(l)}getAllFromCollectionGroup(e,t,a,i){De(9500)}ii(e,t){return me.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new gj(this)}getSize(e){return me.resolve(this.size)}}class gj extends ij{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((a,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(a)}),me.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.persistence=e,this.si=new _i(t=>op(t),lp),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.oi=0,this._i=new fp,this.targetCount=0,this.ai=Mo.ur()}forEachTarget(e,t){return this.si.forEach((a,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.oi&&(this.oi=t),me.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Pr(t),me.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,a){let i=0;const l=[];return this.si.forEach((h,g)=>{g.sequenceNumber<=t&&a.get(g.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,g.targetId)),i++)}),me.waitFor(l).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const a=this.si.get(t)||null;return me.resolve(a)}addMatchingKeys(e,t,a){return this._i.Wr(t,a),me.resolve()}removeMatchingKeys(e,t,a){this._i.zr(t,a);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach(h=>{l.push(i.markPotentiallyOrphaned(e,h))}),me.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),me.resolve()}getMatchingKeysForTargetId(e,t){const a=this._i.Hr(t);return me.resolve(a)}containsKey(e,t){return me.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,t){this.ui={},this.overlays={},this.ci=new bh(0),this.li=!1,this.li=!0,this.hi=new dj,this.referenceDelegate=e(this),this.Pi=new mj(this),this.indexManager=new ZR,this.remoteDocumentCache=function(i){return new fj(i)}(a=>this.referenceDelegate.Ti(a)),this.serializer=new XR(t),this.Ii=new cj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.ui[e.toKey()];return a||(a=new hj(t,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,a){be("MemoryPersistence","Starting transaction:",e);const i=new pj(this.ci.next());return this.referenceDelegate.Ei(),a(i).next(l=>this.referenceDelegate.di(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Ai(e,t){return me.or(Object.values(this.ui).map(a=>()=>a.containsKey(e,t)))}}class pj extends FD{constructor(e){super(),this.currentSequenceNumber=e}}class gp{constructor(e){this.persistence=e,this.Ri=new fp,this.Vi=null}static mi(e){return new gp(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.fi.delete(a.toString()),me.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.fi.add(a.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(l=>this.fi.add(l.toString()))}).next(()=>a.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.fi,a=>{const i=Te.fromPath(a);return this.gi(e,i).next(l=>{l||t.removeEntry(i,je.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(a=>{a?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return me.or([()=>me.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class eh{constructor(e,t){this.persistence=e,this.pi=new _i(a=>YD(a.path),(a,i)=>a.isEqual(i)),this.garbageCollector=aj(this,t)}static mi(e,t){return new eh(e,t)}Ei(){}di(e){return me.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>t.next(i=>a+i))}wr(e){let t=0;return this.pr(e,a=>{t++}).next(()=>t)}pr(e,t){return me.forEach(this.pi,(a,i)=>this.br(e,a,i).next(l=>l?me.resolve():t(i)))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const i=this.persistence.getRemoteDocumentCache(),l=i.newChangeBuffer();return i.ii(e,h=>this.br(e,h,t).next(g=>{g||(a++,l.removeEntry(h,je.min()))})).next(()=>l.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),me.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),me.resolve()}removeReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),me.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Md(e.data.value)),t}br(e,t,a){return me.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return me.resolve(i!==void 0&&i>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t,a,i){this.targetId=e,this.fromCache=t,this.Es=a,this.ds=i}static As(e,t){let a=He(),i=He();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new mp(e,t.fromCache,a,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return F2()?8:$D(un())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,i){const l={result:null};return this.ys(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.ws(e,t,i,a).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new yj;return this.Ss(e,t,h).next(g=>{if(l.result=g,this.Vs)return this.bs(e,t,h,g.size)})}).next(()=>l.result)}bs(e,t,a,i){return a.documentReadCount<this.fs?(bo()<=Ue.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),me.resolve()):(bo()<=Ue.DEBUG&&be("QueryEngine","Query:",vo(t),"scans",a.documentReadCount,"local documents and returns",i,"documents as results."),a.documentReadCount>this.gs*i?(bo()<=Ue.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(t))):me.resolve())}ys(e,t){if(gv(t))return me.resolve(null);let a=Or(t);return this.indexManager.getIndexType(e,a).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Dm(t,null,"F"),a=Or(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(l=>{const h=He(...l);return this.ps.getDocuments(e,h).next(g=>this.indexManager.getMinOffset(e,a).next(p=>{const y=this.Ds(t,g);return this.Cs(t,y,h,p.readTime)?this.ys(e,Dm(t,null,"F")):this.vs(e,y,t,p)}))})))}ws(e,t,a,i){return gv(t)||i.isEqual(je.min())?me.resolve(null):this.ps.getDocuments(e,a).next(l=>{const h=this.Ds(t,l);return this.Cs(t,h,a,i)?me.resolve(null):(bo()<=Ue.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vo(t)),this.vs(e,h,t,zD(i,Tc)).next(g=>g))})}Ds(e,t){let a=new Ut($w(e));return t.forEach((i,l)=>{Eh(e,l)&&(a=a.add(l))}),a}Cs(e,t,a,i){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Ss(e,t,a){return bo()<=Ue.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",vo(t)),this.ps.getDocumentsMatchingQuery(e,t,ma.min(),a)}vs(e,t,a,i){return this.ps.getDocumentsMatchingQuery(e,a,i).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="LocalStore",bj=3e8;class vj{constructor(e,t,a,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new gt(ze),this.xs=new _i(l=>op(l),lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function _j(r,e,t,a){return new vj(r,e,t,a)}async function mT(r,e){const t=Ie(r);return await t.persistence.runTransaction("Handle user change","readonly",a=>{let i;return t.mutationQueue.getAllMutationBatches(a).next(l=>(i=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(a))).next(l=>{const h=[],g=[];let p=He();for(const y of i){h.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}for(const y of l){g.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}return t.localDocuments.getDocuments(a,p).next(y=>({Ls:y,removedBatchIds:h,addedBatchIds:g}))})})}function wj(r,e){const t=Ie(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const i=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return function(g,p,y,b){const w=y.batch,T=w.keys();let O=me.resolve();return T.forEach(F=>{O=O.next(()=>b.getEntry(p,F)).next($=>{const P=y.docVersions.get(F);Qe(P!==null,48541),$.version.compareTo(P)<0&&(w.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),b.addEntry($)))})}),O.next(()=>g.mutationQueue.removeMutationBatch(p,w))}(t,a,e,l).next(()=>l.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(g){let p=He();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(a,i))})}function pT(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Tj(r,e){const t=Ie(r),a=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const g=[];e.targetChanges.forEach((b,w)=>{const T=i.get(w);if(!T)return;g.push(t.Pi.removeMatchingKeys(l,b.removedDocuments,w).next(()=>t.Pi.addMatchingKeys(l,b.addedDocuments,w)));let O=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?O=O.withResumeToken(en.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):b.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(b.resumeToken,a)),i=i.insert(w,O),function($,P,S){return $.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=bj?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(T,O,b)&&g.push(t.Pi.updateTargetData(l,O))});let p=Ts(),y=He();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))}),g.push(Ej(l,h,e.documentUpdates).next(b=>{p=b.ks,y=b.qs})),!a.isEqual(je.min())){const b=t.Pi.getLastRemoteSnapshotVersion(l).next(w=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,a));g.push(b)}return me.waitFor(g).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.Ms=i,l))}function Ej(r,e,t){let a=He(),i=He();return t.forEach(l=>a=a.add(l)),e.getEntries(r,a).next(l=>{let h=Ts();return t.forEach((g,p)=>{const y=l.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(g)),p.isNoDocument()&&p.version.isEqual(je.min())?(e.removeEntry(g,p.readTime),h=h.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(g,p)):be(pp,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)}),{ks:h,qs:i}})}function kj(r,e){const t=Ie(r);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=sp),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function Sj(r,e){const t=Ie(r);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let i;return t.Pi.getTargetData(a,e).next(l=>l?(i=l,me.resolve(i)):t.Pi.allocateTargetId(a).next(h=>(i=new oa(e,h,"TargetPurposeListen",a.currentSequenceNumber),t.Pi.addTargetData(a,i).next(()=>i))))}).then(a=>{const i=t.Ms.get(a.targetId);return(i===null||a.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(a.targetId,a),t.xs.set(e,a.targetId)),a})}async function Om(r,e,t){const a=Ie(r),i=a.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,h=>a.persistence.referenceDelegate.removeTarget(h,i))}catch(h){if(!Ho(h))throw h;be(pp,`Failed to update sequence numbers for target ${e}: ${h}`)}a.Ms=a.Ms.remove(e),a.xs.delete(i.target)}function Nv(r,e,t){const a=Ie(r);let i=je.min(),l=He();return a.persistence.runTransaction("Execute query","readwrite",h=>function(p,y,b){const w=Ie(p),T=w.xs.get(b);return T!==void 0?me.resolve(w.Ms.get(T)):w.Pi.getTargetData(y,b)}(a,h,Or(e)).next(g=>{if(g)return i=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(h,g.targetId).next(p=>{l=p})}).next(()=>a.Fs.getDocumentsMatchingQuery(h,e,t?i:je.min(),t?l:He())).next(g=>(Nj(a,hR(e),g),{documents:g,Qs:l})))}function Nj(r,e,t){let a=r.Os.get(e)||je.min();t.forEach((i,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)}),r.Os.set(e,a)}class Av{constructor(){this.activeTargetIds=xR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Aj{constructor(){this.Mo=new Av,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,a){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Av,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="ConnectivityMonitor";class Rv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){be(Dv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){be(Dv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd=null;function Mm(){return kd===null?kd=function(){return 268435456+Math.round(2147483648*Math.random())}():kd++,"0x"+kd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="RestConnection",Rj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${a}/databases/${i}`,this.Wo=this.databaseId.database===Qd?`project_id=${a}`:`project_id=${a}&database_id=${i}`}Go(e,t,a,i,l){const h=Mm(),g=this.zo(e,t.toUriEncodedString());be(em,`Sending RPC '${e}' ${h}:`,g,a);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,i,l);const{host:y}=new URL(g),b=bi(y);return this.Jo(e,g,p,a,b).then(w=>(be(em,`Received RPC '${e}' ${h}: `,w),w),w=>{throw Ro(em,`RPC '${e}' ${h} failed with error: `,w,"url: ",g,"request:",a),w})}Ho(e,t,a,i,l,h){return this.Go(e,t,a,i,l)}jo(e,t,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,l)=>e[l]=i),a&&a.headers.forEach((i,l)=>e[l]=i)}zo(e,t){const a=Rj[e];return`${this.Uo}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class Cj extends jj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,a,i,l){const h=Mm();return new Promise((g,p)=>{const y=new xw;y.setWithCredentials(!0),y.listenOnce(bw.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Od.NO_ERROR:const w=y.getResponseJson();be(an,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),g(w);break;case Od.TIMEOUT:be(an,`RPC '${e}' ${h} timed out`),p(new ye(he.DEADLINE_EXCEEDED,"Request time out"));break;case Od.HTTP_ERROR:const T=y.getStatus();if(be(an,`RPC '${e}' ${h} failed with status:`,T,"response text:",y.getResponseText()),T>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const F=O?.error;if(F&&F.status&&F.message){const $=function(S){const L=S.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(L)>=0?L:he.UNKNOWN}(F.status);p(new ye($,F.message))}else p(new ye(he.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ye(he.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{be(an,`RPC '${e}' ${h} completed.`)}});const b=JSON.stringify(i);be(an,`RPC '${e}' ${h} sending request:`,i),y.send(t,"POST",b,a,15)})}T_(e,t,a){const i=Mm(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=ww(),g=_w(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,a),p.encodeInitMessageHeaders=!0;const b=l.join("");be(an,`Creating RPC '${e}' stream ${i}: ${b}`,p);const w=h.createWebChannel(b,p);this.I_(w);let T=!1,O=!1;const F=new Ij({Yo:P=>{O?be(an,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(T||(be(an,`Opening RPC '${e}' stream ${i} transport.`),w.open(),T=!0),be(an,`RPC '${e}' stream ${i} sending:`,P),w.send(P))},Zo:()=>w.close()}),$=(P,S,L)=>{P.listen(S,I=>{try{L(I)}catch(V){setTimeout(()=>{throw V},0)}})};return $(w,oc.EventType.OPEN,()=>{O||(be(an,`RPC '${e}' stream ${i} transport opened.`),F.o_())}),$(w,oc.EventType.CLOSE,()=>{O||(O=!0,be(an,`RPC '${e}' stream ${i} transport closed`),F.a_(),this.E_(w))}),$(w,oc.EventType.ERROR,P=>{O||(O=!0,Ro(an,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),F.a_(new ye(he.UNAVAILABLE,"The operation could not be completed")))}),$(w,oc.EventType.MESSAGE,P=>{if(!O){const S=P.data[0];Qe(!!S,16349);const L=S,I=L?.error||L[0]?.error;if(I){be(an,`RPC '${e}' stream ${i} received error:`,I);const V=I.status;let Y=function(k){const C=Dt[k];if(C!==void 0)return rT(C)}(V),te=I.message;Y===void 0&&(Y=he.INTERNAL,te="Unknown error status: "+V+" with message "+I.message),O=!0,F.a_(new ye(Y,te)),w.close()}else be(an,`RPC '${e}' stream ${i} received:`,S),F.u_(S)}}),$(g,vw.STAT_EVENT,P=>{P.stat===wm.PROXY?be(an,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===wm.NOPROXY&&be(an,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{F.__()},0),F}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function tm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(r){return new VR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,t,a=1e3,i=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=a,this.A_=i,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-a);i>0&&be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="PersistentStream";class xT{constructor(e,t,a,i,l,h,g,p){this.Mi=e,this.S_=a,this.b_=i,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(ws(t.toString()),ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,i])=>{this.D_===t&&this.G_(a,i)},a=>{e(()=>{const i=new ye(he.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(i)})})}G_(e,t){const a=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{a(()=>this.listener.Xo())}),this.stream.t_(()=>{a(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{a(()=>this.z_(i))}),this.stream.onMessage(i=>{a(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return be(jv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(be(jv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Oj extends xT{constructor(e,t,a,i,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,i,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=zR(this.serializer,e),a=function(l){if(!("targetChange"in l))return je.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?je.min():h.readTime?Mr(h.readTime):je.min()}(e);return this.listener.H_(t,a)}Y_(e){const t={};t.database=Cm(this.serializer),t.addTarget=function(l,h){let g;const p=h.target;if(g=Nm(p)?{documents:qR(l,p)}:{query:FR(l,p).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=iT(l,h.resumeToken);const y=Rm(l,h.expectedCount);y!==null&&(g.expectedCount=y)}else if(h.snapshotVersion.compareTo(je.min())>0){g.readTime=Zd(l,h.snapshotVersion.toTimestamp());const y=Rm(l,h.expectedCount);y!==null&&(g.expectedCount=y)}return g}(this.serializer,e);const a=GR(this.serializer,e);a&&(t.labels=a),this.q_(t)}Z_(e){const t={};t.database=Cm(this.serializer),t.removeTarget=e,this.q_(t)}}class Mj extends xT{constructor(e,t,a,i,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,i,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=BR(e.writeResults,e.commitTime),a=Mr(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=Cm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>HR(this.serializer,a))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{}class Vj extends Pj{constructor(e,t,a,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ye(he.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Go(e,jm(t,a),i,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(he.UNKNOWN,l.toString())})}Ho(e,t,a,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,g])=>this.connection.Ho(e,jm(t,a),i,h,g,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ye(he.UNKNOWN,h.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Lj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ws(t),this.aa=!1):be("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi="RemoteStore";class Uj{constructor(e,t,a,i,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo(h=>{a.enqueueAndForget(async()=>{wi(this)&&(be(yi,"Restarting streams for network reachability change."),await async function(p){const y=Ie(p);y.Ea.add(4),await Bc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Rh(y)}(this))})}),this.Ra=new Lj(a,i)}}async function Rh(r){if(wi(r))for(const e of r.da)await e(!0)}async function Bc(r){for(const e of r.da)await e(!1)}function bT(r,e){const t=Ie(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),vp(t)?bp(t):qo(t).O_()&&xp(t,e))}function yp(r,e){const t=Ie(r),a=qo(t);t.Ia.delete(e),a.O_()&&vT(t,e),t.Ia.size===0&&(a.O_()?a.L_():wi(t)&&t.Ra.set("Unknown"))}function xp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qo(r).Y_(e)}function vT(r,e){r.Va.Ue(e),qo(r).Z_(e)}function bp(r){r.Va=new CR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),qo(r).start(),r.Ra.ua()}function vp(r){return wi(r)&&!qo(r).x_()&&r.Ia.size>0}function wi(r){return Ie(r).Ea.size===0}function _T(r){r.Va=void 0}async function zj(r){r.Ra.set("Online")}async function Hj(r){r.Ia.forEach((e,t)=>{xp(r,e)})}async function Bj(r,e){_T(r),vp(r)?(r.Ra.ha(e),bp(r)):r.Ra.set("Unknown")}async function qj(r,e,t){if(r.Ra.set("Online"),e instanceof aT&&e.state===2&&e.cause)try{await async function(i,l){const h=l.cause;for(const g of l.targetIds)i.Ia.has(g)&&(await i.remoteSyncer.rejectListen(g,h),i.Ia.delete(g),i.Va.removeTarget(g))}(r,e)}catch(a){be(yi,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await th(r,a)}else if(e instanceof Ld?r.Va.Ze(e):e instanceof sT?r.Va.st(e):r.Va.tt(e),!t.isEqual(je.min()))try{const a=await pT(r.localStore);t.compareTo(a)>=0&&await function(l,h){const g=l.Va.Tt(h);return g.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=l.Ia.get(y);b&&l.Ia.set(y,b.withResumeToken(p.resumeToken,h))}}),g.targetMismatches.forEach((p,y)=>{const b=l.Ia.get(p);if(!b)return;l.Ia.set(p,b.withResumeToken(en.EMPTY_BYTE_STRING,b.snapshotVersion)),vT(l,p);const w=new oa(b.target,p,y,b.sequenceNumber);xp(l,w)}),l.remoteSyncer.applyRemoteEvent(g)}(r,t)}catch(a){be(yi,"Failed to raise snapshot:",a),await th(r,a)}}async function th(r,e,t){if(!Ho(e))throw e;r.Ea.add(1),await Bc(r),r.Ra.set("Offline"),t||(t=()=>pT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{be(yi,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Rh(r)})}function wT(r,e){return e().catch(t=>th(r,t,e))}async function jh(r){const e=Ie(r),t=ba(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sp;for(;Fj(e);)try{const i=await kj(e.localStore,a);if(i===null){e.Ta.length===0&&t.L_();break}a=i.batchId,$j(e,i)}catch(i){await th(e,i)}TT(e)&&ET(e)}function Fj(r){return wi(r)&&r.Ta.length<10}function $j(r,e){r.Ta.push(e);const t=ba(r);t.O_()&&t.X_&&t.ea(e.mutations)}function TT(r){return wi(r)&&!ba(r).x_()&&r.Ta.length>0}function ET(r){ba(r).start()}async function Gj(r){ba(r).ra()}async function Yj(r){const e=ba(r);for(const t of r.Ta)e.ea(t.mutations)}async function Wj(r,e,t){const a=r.Ta.shift(),i=up.from(a,e,t);await wT(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await jh(r)}async function Qj(r,e){e&&ba(r).X_&&await async function(a,i){if(function(h){return RR(h)&&h!==he.ABORTED}(i.code)){const l=a.Ta.shift();ba(a).B_(),await wT(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,i)),await jh(a)}}(r,e),TT(r)&&ET(r)}async function Iv(r,e){const t=Ie(r);t.asyncQueue.verifyOperationInProgress(),be(yi,"RemoteStore received new credentials");const a=wi(t);t.Ea.add(3),await Bc(t),a&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Rh(t)}async function Kj(r,e){const t=Ie(r);e?(t.Ea.delete(2),await Rh(t)):e||(t.Ea.add(2),await Bc(t),t.Ra.set("Unknown"))}function qo(r){return r.ma||(r.ma=function(t,a,i){const l=Ie(t);return l.sa(),new Oj(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(r.datastore,r.asyncQueue,{Xo:zj.bind(null,r),t_:Hj.bind(null,r),r_:Bj.bind(null,r),H_:qj.bind(null,r)}),r.da.push(async e=>{e?(r.ma.B_(),vp(r)?bp(r):r.Ra.set("Unknown")):(await r.ma.stop(),_T(r))})),r.ma}function ba(r){return r.fa||(r.fa=function(t,a,i){const l=Ie(t);return l.sa(),new Mj(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Gj.bind(null,r),r_:Qj.bind(null,r),ta:Yj.bind(null,r),na:Wj.bind(null,r)}),r.da.push(async e=>{e?(r.fa.B_(),await jh(r)):(await r.fa.stop(),r.Ta.length>0&&(be(yi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t,a,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=i,this.removalCallback=l,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,i,l){const h=Date.now()+a,g=new _p(e,t,h,i,l);return g.start(a),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wp(r,e){if(ws("AsyncQueue",`${e}: ${r}`),Ho(r))return new ye(he.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{static emptySet(e){return new So(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Te.comparator(t.key,a.key):(t,a)=>Te.comparator(t.key,a.key),this.keyedMap=lc(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof So)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=a.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new So;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.ga=new gt(Te.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,a)=>{e.push(a)}),e}}class Po{constructor(e,t,a,i,l,h,g,p,y){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=i,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,a,i,l){const h=[];return t.forEach(g=>{h.push({type:0,doc:g})}),new Po(e,t,So.emptySet(t),h,a,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==a[i].type||!t[i].doc.isEqual(a[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Jj{constructor(){this.queries=Ov(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const i=Ie(t),l=i.queries;i.queries=Ov(),l.forEach((h,g)=>{for(const p of g.Sa)p.onError(a)})})(this,new ye(he.ABORTED,"Firestore shutting down"))}}function Ov(){return new _i(r=>Fw(r),Th)}async function Tp(r,e){const t=Ie(r);let a=3;const i=e.query;let l=t.queries.get(i);l?!l.ba()&&e.Da()&&(a=2):(l=new Xj,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(i,!0);break;case 1:l.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(h){const g=wp(h,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(g)}t.queries.set(i,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&kp(t)}async function Ep(r,e){const t=Ie(r),a=e.query;let i=3;const l=t.queries.get(a);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?i=e.Da()?0:1:!l.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function Zj(r,e){const t=Ie(r);let a=!1;for(const i of e){const l=i.query,h=t.queries.get(l);if(h){for(const g of h.Sa)g.Fa(i)&&(a=!0);h.wa=i}}a&&kp(t)}function eI(r,e,t){const a=Ie(r),i=a.queries.get(e);if(i)for(const l of i.Sa)l.onError(t);a.queries.delete(e)}function kp(r){r.Ca.forEach(e=>{e.next()})}var Pm,Mv;(Mv=Pm||(Pm={})).Ma="default",Mv.Cache="cache";class Sp{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const i of e.docChanges)i.type!==3&&a.push(i);e=new Po(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this.key=e}}class ST{constructor(e){this.key=e}}class tI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=$w(e),this.tu=new So(this.eu)}get nu(){return this.Ya}ru(e,t){const a=t?t.iu:new Cv,i=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=i,g=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,y=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,w)=>{const T=i.get(b),O=Eh(this.query,w)?w:null,F=!!T&&this.mutatedKeys.has(T.key),$=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let P=!1;T&&O?T.data.isEqual(O.data)?F!==$&&(a.track({type:3,doc:O}),P=!0):this.su(T,O)||(a.track({type:2,doc:O}),P=!0,(p&&this.eu(O,p)>0||y&&this.eu(O,y)<0)&&(g=!0)):!T&&O?(a.track({type:0,doc:O}),P=!0):T&&!O&&(a.track({type:1,doc:T}),P=!0,(p||y)&&(g=!0)),P&&(O?(h=h.add(O),l=$?l.add(b):l.delete(b)):(h=h.delete(b),l=l.delete(b)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),l=l.delete(b.key),a.track({type:1,doc:b})}return{tu:h,iu:a,Cs:g,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,i){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort((b,w)=>function(O,F){const $=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:P})}};return $(O)-$(F)}(b.type,w.type)||this.eu(b.doc,w.doc)),this.ou(a),i=i??!1;const g=t&&!i?this._u():[],p=this.Xa.size===0&&this.current&&!i?1:0,y=p!==this.Za;return this.Za=p,h.length!==0||y?{snapshot:new Po(this.query,e.tu,l,h,e.mutatedKeys,p===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Cv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach(a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))});const t=[];return e.forEach(a=>{this.Xa.has(a)||t.push(new ST(a))}),this.Xa.forEach(a=>{e.has(a)||t.push(new kT(a))}),t}cu(e){this.Ya=e.Qs,this.Xa=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Po.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Np="SyncEngine";class nI{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class rI{constructor(e){this.key=e,this.hu=!1}}class sI{constructor(e,t,a,i,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new _i(g=>Fw(g),Th),this.Iu=new Map,this.Eu=new Set,this.du=new gt(Te.comparator),this.Au=new Map,this.Ru=new fp,this.Vu={},this.mu=new Map,this.fu=Mo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aI(r,e,t=!0){const a=IT(r);let i;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.lu()):i=await NT(a,e,t,!0),i}async function iI(r,e){const t=IT(r);await NT(t,e,!0,!1)}async function NT(r,e,t,a){const i=await Sj(r.localStore,Or(e)),l=i.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let g;return a&&(g=await oI(r,e,l,h==="current",i.resumeToken)),r.isPrimaryClient&&t&&bT(r.remoteStore,i),g}async function oI(r,e,t,a,i){r.pu=(w,T,O)=>async function($,P,S,L){let I=P.view.ru(S);I.Cs&&(I=await Nv($.localStore,P.query,!1).then(({documents:A})=>P.view.ru(A,I)));const V=L&&L.targetChanges.get(P.targetId),Y=L&&L.targetMismatches.get(P.targetId)!=null,te=P.view.applyChanges(I,$.isPrimaryClient,V,Y);return Vv($,P.targetId,te.au),te.snapshot}(r,w,T,O);const l=await Nv(r.localStore,e,!0),h=new tI(e,l.Qs),g=h.ru(l.documents),p=Hc.createSynthesizedTargetChangeForCurrentChange(t,a&&r.onlineState!=="Offline",i),y=h.applyChanges(g,r.isPrimaryClient,p);Vv(r,t,y.au);const b=new nI(e,t,h);return r.Tu.set(e,b),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function lI(r,e,t){const a=Ie(r),i=a.Tu.get(e),l=a.Iu.get(i.targetId);if(l.length>1)return a.Iu.set(i.targetId,l.filter(h=>!Th(h,e))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(i.targetId),a.sharedClientState.isActiveQueryTarget(i.targetId)||await Om(a.localStore,i.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(i.targetId),t&&yp(a.remoteStore,i.targetId),Vm(a,i.targetId)}).catch(zo)):(Vm(a,i.targetId),await Om(a.localStore,i.targetId,!0))}async function cI(r,e){const t=Ie(r),a=t.Tu.get(e),i=t.Iu.get(a.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),yp(t.remoteStore,a.targetId))}async function uI(r,e,t){const a=yI(r);try{const i=await function(h,g){const p=Ie(h),y=ct.now(),b=g.reduce((O,F)=>O.add(F.key),He());let w,T;return p.persistence.runTransaction("Locally write mutations","readwrite",O=>{let F=Ts(),$=He();return p.Ns.getEntries(O,b).next(P=>{F=P,F.forEach((S,L)=>{L.isValidDocument()||($=$.add(S))})}).next(()=>p.localDocuments.getOverlayedDocuments(O,F)).next(P=>{w=P;const S=[];for(const L of g){const I=kR(L,w.get(L.key).overlayedDocument);I!=null&&S.push(new Ta(L.key,I,Pw(I.value.mapValue),wn.exists(!0)))}return p.mutationQueue.addMutationBatch(O,y,S,g)}).next(P=>{T=P;const S=P.applyToLocalDocumentSet(w,$);return p.documentOverlayCache.saveOverlays(O,P.batchId,S)})}).then(()=>({batchId:T.batchId,changes:Yw(w)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(i.batchId),function(h,g,p){let y=h.Vu[h.currentUser.toKey()];y||(y=new gt(ze)),y=y.insert(g,p),h.Vu[h.currentUser.toKey()]=y}(a,i.batchId,t),await qc(a,i.changes),await jh(a.remoteStore)}catch(i){const l=wp(i,"Failed to persist write");t.reject(l)}}async function AT(r,e){const t=Ie(r);try{const a=await Tj(t.localStore,e);e.targetChanges.forEach((i,l)=>{const h=t.Au.get(l);h&&(Qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?h.hu=!0:i.modifiedDocuments.size>0?Qe(h.hu,14607):i.removedDocuments.size>0&&(Qe(h.hu,42227),h.hu=!1))}),await qc(t,a,e)}catch(a){await zo(a)}}function Pv(r,e,t){const a=Ie(r);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const i=[];a.Tu.forEach((l,h)=>{const g=h.view.va(e);g.snapshot&&i.push(g.snapshot)}),function(h,g){const p=Ie(h);p.onlineState=g;let y=!1;p.queries.forEach((b,w)=>{for(const T of w.Sa)T.va(g)&&(y=!0)}),y&&kp(p)}(a.eventManager,e),i.length&&a.Pu.H_(i),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function dI(r,e,t){const a=Ie(r);a.sharedClientState.updateQueryState(e,"rejected",t);const i=a.Au.get(e),l=i&&i.key;if(l){let h=new gt(Te.comparator);h=h.insert(l,cn.newNoDocument(l,je.min()));const g=He().add(l),p=new Ah(je.min(),new Map,new gt(ze),h,g);await AT(a,p),a.du=a.du.remove(l),a.Au.delete(e),Ap(a)}else await Om(a.localStore,e,!1).then(()=>Vm(a,e,t)).catch(zo)}async function hI(r,e){const t=Ie(r),a=e.batch.batchId;try{const i=await wj(t.localStore,e);RT(t,a,null),DT(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await qc(t,i)}catch(i){await zo(i)}}async function fI(r,e,t){const a=Ie(r);try{const i=await function(h,g){const p=Ie(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.mutationQueue.lookupMutationBatch(y,g).next(w=>(Qe(w!==null,37113),b=w.keys(),p.mutationQueue.removeMutationBatch(y,w))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,b,g)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b)).next(()=>p.localDocuments.getDocuments(y,b))})}(a.localStore,e);RT(a,e,t),DT(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await qc(a,i)}catch(i){await zo(i)}}function DT(r,e){(r.mu.get(e)||[]).forEach(t=>{t.resolve()}),r.mu.delete(e)}function RT(r,e,t){const a=Ie(r);let i=a.Vu[a.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),a.Vu[a.currentUser.toKey()]=i}}function Vm(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.Iu.get(e))r.Tu.delete(a),t&&r.Pu.yu(a,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach(a=>{r.Ru.containsKey(a)||jT(r,a)})}function jT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(yp(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Ap(r))}function Vv(r,e,t){for(const a of t)a instanceof kT?(r.Ru.addReference(a.key,e),gI(r,a)):a instanceof ST?(be(Np,"Document no longer in limbo: "+a.key),r.Ru.removeReference(a.key,e),r.Ru.containsKey(a.key)||jT(r,a.key)):De(19791,{wu:a})}function gI(r,e){const t=e.key,a=t.path.canonicalString();r.du.get(t)||r.Eu.has(a)||(be(Np,"New document in limbo: "+t),r.Eu.add(a),Ap(r))}function Ap(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Te(lt.fromString(e)),a=r.fu.next();r.Au.set(a,new rI(t)),r.du=r.du.insert(t,a),bT(r.remoteStore,new oa(Or(wh(t.path)),a,"TargetPurposeLimboResolution",bh.ce))}}async function qc(r,e,t){const a=Ie(r),i=[],l=[],h=[];a.Tu.isEmpty()||(a.Tu.forEach((g,p)=>{h.push(a.pu(p,e,t).then(y=>{if((y||t)&&a.isPrimaryClient){const b=y?!y.fromCache:t?.targetChanges.get(p.targetId)?.current;a.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(y){i.push(y);const b=mp.As(p.targetId,y);l.push(b)}}))}),await Promise.all(h),a.Pu.H_(i),await async function(p,y){const b=Ie(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>me.forEach(y,T=>me.forEach(T.Es,O=>b.persistence.referenceDelegate.addReference(w,T.targetId,O)).next(()=>me.forEach(T.ds,O=>b.persistence.referenceDelegate.removeReference(w,T.targetId,O)))))}catch(w){if(!Ho(w))throw w;be(pp,"Failed to update sequence numbers: "+w)}for(const w of y){const T=w.targetId;if(!w.fromCache){const O=b.Ms.get(T),F=O.snapshotVersion,$=O.withLastLimboFreeSnapshotVersion(F);b.Ms=b.Ms.insert(T,$)}}}(a.localStore,l))}async function mI(r,e){const t=Ie(r);if(!t.currentUser.isEqual(e)){be(Np,"User change. New user:",e.toKey());const a=await mT(t.localStore,e);t.currentUser=e,function(l,h){l.mu.forEach(g=>{g.forEach(p=>{p.reject(new ye(he.CANCELLED,h))})}),l.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await qc(t,a.Ls)}}function pI(r,e){const t=Ie(r),a=t.Au.get(e);if(a&&a.hu)return He().add(a.key);{let i=He();const l=t.Iu.get(e);if(!l)return i;for(const h of l){const g=t.Tu.get(h);i=i.unionWith(g.view.nu)}return i}}function IT(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=AT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dI.bind(null,e),e.Pu.H_=Zj.bind(null,e.eventManager),e.Pu.yu=eI.bind(null,e.eventManager),e}function yI(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fI.bind(null,e),e}class nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return _j(this.persistence,new xj,e.initialUser,this.serializer)}Cu(e){return new gT(gp.mi,this.serializer)}Du(e){return new Aj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nh.provider={build:()=>new nh};class xI extends nh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof eh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new rj(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new gT(a=>eh.mi(a,t),this.serializer)}}class Lm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Pv(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=mI.bind(null,this.syncEngine),await Kj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Jj}()}createDatastore(e){const t=Dh(e.databaseInfo.databaseId),a=function(l){return new Cj(l)}(e.databaseInfo);return function(l,h,g,p){return new Vj(l,h,g,p)}(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return function(a,i,l,h,g){return new Uj(a,i,l,h,g)}(this.localStore,this.datastore,e.asyncQueue,t=>Pv(this.syncEngine,t,0),function(){return Rv.v()?new Rv:new Dj}())}createSyncEngine(e,t){return function(i,l,h,g,p,y,b){const w=new sI(i,l,h,g,p,y);return b&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const a=Ie(t);be(yi,"RemoteStore shutting down."),a.Ea.add(5),await Bc(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Lm.provider={build:()=>new Lm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="FirestoreClient";class bI{constructor(e,t,a,i,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=i,this.user=ln.UNAUTHENTICATED,this.clientId=rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,async h=>{be(va,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(a,h=>(be(va,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=wp(t,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function nm(r,e){r.asyncQueue.verifyOperationInProgress(),be(va,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let a=t.initialUser;r.setCredentialChangeListener(async i=>{a.isEqual(i)||(await mT(e.localStore,i),a=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Lv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await vI(r);be(va,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(a=>Iv(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,i)=>Iv(e.remoteStore,i)),r._onlineComponents=e}async function vI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){be(va,"Using user provided OfflineComponentProvider");try{await nm(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===he.FAILED_PRECONDITION||i.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ro("Error using user provided cache. Falling back to memory cache: "+t),await nm(r,new nh)}}else be(va,"Using default OfflineComponentProvider"),await nm(r,new xI(void 0));return r._offlineComponents}async function CT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(be(va,"Using user provided OnlineComponentProvider"),await Lv(r,r._uninitializedComponentsProvider._online)):(be(va,"Using default OnlineComponentProvider"),await Lv(r,new Lm))),r._onlineComponents}function _I(r){return CT(r).then(e=>e.syncEngine)}async function rh(r){const e=await CT(r),t=e.eventManager;return t.onListen=aI.bind(null,e.syncEngine),t.onUnlisten=lI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cI.bind(null,e.syncEngine),t}function wI(r,e,t={}){const a=new xs;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,g,p,y){const b=new Dp({next:T=>{b.Nu(),h.enqueueAndForget(()=>Ep(l,w));const O=T.docs.has(g);!O&&T.fromCache?y.reject(new ye(he.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&T.fromCache&&p&&p.source==="server"?y.reject(new ye(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new Sp(wh(g.path),b,{includeMetadataChanges:!0,qa:!0});return Tp(l,w)}(await rh(r),r.asyncQueue,e,t,a)),a.promise}function TI(r,e,t={}){const a=new xs;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,g,p,y){const b=new Dp({next:T=>{b.Nu(),h.enqueueAndForget(()=>Ep(l,w)),T.fromCache&&p.source==="server"?y.reject(new ye(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new Sp(g,b,{includeMetadataChanges:!0,qa:!0});return Tp(l,w)}(await rh(r),r.asyncQueue,e,t,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="firestore.googleapis.com",zv=!0;class Hv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MT,this.ssl=zv}else this.host=e.host,this.ssl=e.ssl??zv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tj)throw new ye(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OT(e.experimentalLongPollingOptions??{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ye(he.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ye(he.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ye(he.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,i){return a.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ih{constructor(e,t,a,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new DD;switch(a.type){case"firstParty":return new CD(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ye(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const a=Uv.get(t);a&&(be("ComponentProvider","Removing Datastore"),Uv.delete(t),a.terminate())}(this),Promise.resolve()}}function EI(r,e,t,a={}){r=On(r,Ih);const i=bi(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},g=`${e}:${t}`;i&&(Hm(`https://${g}`),Bm("Firestore",!0)),l.host!==MT&&l.host!==g&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:g,ssl:i,emulatorOptions:a};if(!fa(p,h)&&(r._setSettings(p),a.mockUserToken)){let y,b;if(typeof a.mockUserToken=="string")y=a.mockUserToken,b=ln.MOCK_USER;else{y=j_(a.mockUserToken,r._app?.options.projectId);const w=a.mockUserToken.sub||a.mockUserToken.user_id;if(!w)throw new ye(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new ln(w)}r._authCredentials=new RD(new Ew(y,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ea(this.firestore,e,this._query)}}class Et{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new da(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Uc(t,Et._jsonSchema))return new Et(e,a||null,new Te(lt.fromString(t.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:It("string",Et._jsonSchemaVersion),referencePath:It("string")};class da extends Ea{constructor(e,t,a){super(e,t,wh(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new Te(e))}withConverter(e){return new da(this.firestore,e,this._path)}}function na(r,e,...t){if(r=ft(r),kw("collection","path",e),r instanceof Ih){const a=lt.fromString(e,...t);return ev(a),new da(r,null,a)}{if(!(r instanceof Et||r instanceof da))throw new ye(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(lt.fromString(e,...t));return ev(a),new da(r.firestore,null,a)}}function gs(r,e,...t){if(r=ft(r),arguments.length===1&&(e=rp.newId()),kw("doc","path",e),r instanceof Ih){const a=lt.fromString(e,...t);return Zb(a),new Et(r,null,new Te(a))}{if(!(r instanceof Et||r instanceof da))throw new ye(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(lt.fromString(e,...t));return Zb(a),new Et(r.firestore,r instanceof da?r.converter:null,new Te(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="AsyncQueue";class qv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yT(this,"async_queue_retry"),this._c=()=>{const a=tm();a&&be(Bv,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=tm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=tm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new xs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ho(e))throw e;be(Bv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(a=>{throw this.nc=a,this.rc=!1,ws("INTERNAL UNHANDLED ERROR: ",Fv(a)),a}).then(a=>(this.rc=!1,a))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=_p.createAndSchedule(this,e,t,a,l=>this.hc(l));return this.tc.push(i),i}uc(){this.nc&&De(47125,{Pc:Fv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Fv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(r){return function(t,a){if(typeof t!="object"||t===null)return!1;const i=t;for(const l of a)if(l in i&&typeof i[l]=="function")return!0;return!1}(r,["next","error","complete"])}class Es extends Ih{constructor(e,t,a,i){super(e,t,a,i),this.type="firestore",this._queue=new qv,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qv(e),this._firestoreClient=void 0,await e}}}function kI(r,e){const t=typeof r=="object"?r:$m(),a=typeof r=="string"?r:Qd,i=gh(t,"firestore").getImmediate({identifier:a});if(!i._initialized){const l=A_("firestore");l&&EI(i,...l)}return i}function Fc(r){if(r._terminated)throw new ye(he.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||SI(r),r._firestoreClient}function SI(r){const e=r._freezeSettings(),t=function(i,l,h,g){return new KD(i,l,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,OT(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new bI(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&function(i){const l=i?._online.build();return{_offline:i?._offline.build(l),_online:l}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(en.fromBase64String(e))}catch(t){throw new ye(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Uc(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:It("string",Xn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pr._jsonSchemaVersion}}static fromJSON(e){if(Uc(e,Pr._jsonSchema))return new Pr(e.latitude,e.longitude)}}Pr._jsonSchemaVersion="firestore/geoPoint/1.0",Pr._jsonSchema={type:It("string",Pr._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,i){if(a.length!==i.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==i[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Uc(e,Vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Vr(e.vectorValues);throw new ye(he.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vr._jsonSchemaVersion="firestore/vectorValue/1.0",Vr._jsonSchema={type:It("string",Vr._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=/^__.*__$/;class AI{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Ta(e,this.data,this.fieldMask,t,this.fieldTransforms):new zc(e,this.data,t,this.fieldTransforms)}}class PT{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Ta(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:r})}}class Ch{constructor(e,t,a,i,l,h){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=i,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ch({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),a=this.Vc({path:t,fc:!1});return a.gc(e),a}yc(e){const t=this.path?.child(e),a=this.Vc({path:t,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return sh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(VT(this.Ac)&&NI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class DI{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Dh(e)}Cc(e,t,a,i=!1){return new Ch({Ac:e,methodName:t,Dc:a,path:Zt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Oh(r){const e=r._freezeSettings(),t=Dh(r._databaseId);return new DI(r._databaseId,!!e.ignoreUndefinedProperties,t)}function LT(r,e,t,a,i,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,i);Ip("Data must be an object, but it was:",h,a);const g=HT(a,h);let p,y;if(l.merge)p=new Cn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const b=[];for(const w of l.mergeFields){const T=Um(e,w,t);if(!h.contains(T))throw new ye(he.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);qT(b,T)||b.push(T)}p=new Cn(b),y=h.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,y=h.fieldTransforms;return new AI(new _n(g),p,y)}class Yc extends Gc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yc}}function RI(r,e,t){return new Ch({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Rp extends Gc{_toFieldTransform(e){return new eT(e.path,new Ac)}isEqual(e){return e instanceof Rp}}class jp extends Gc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=RI(this,e,!0),a=this.vc.map(l=>Fo(l,t)),i=new Oo(a);return new eT(e.path,i)}isEqual(e){return e instanceof jp&&fa(this.vc,e.vc)}}function UT(r,e,t,a){const i=r.Cc(1,e,t);Ip("Data must be an object, but it was:",i,a);const l=[],h=_n.empty();wa(a,(p,y)=>{const b=Cp(e,p,t);y=ft(y);const w=i.yc(b);if(y instanceof Yc)l.push(b);else{const T=Fo(y,w);T!=null&&(l.push(b),h.set(b,T))}});const g=new Cn(l);return new PT(h,g,i.fieldTransforms)}function zT(r,e,t,a,i,l){const h=r.Cc(1,e,t),g=[Um(e,a,t)],p=[i];if(l.length%2!=0)throw new ye(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)g.push(Um(e,l[T])),p.push(l[T+1]);const y=[],b=_n.empty();for(let T=g.length-1;T>=0;--T)if(!qT(y,g[T])){const O=g[T];let F=p[T];F=ft(F);const $=h.yc(O);if(F instanceof Yc)y.push(O);else{const P=Fo(F,$);P!=null&&(y.push(O),b.set(O,P))}}const w=new Cn(y);return new PT(b,w,h.fieldTransforms)}function jI(r,e,t,a=!1){return Fo(t,r.Cc(a?4:3,e))}function Fo(r,e){if(BT(r=ft(r)))return Ip("Unsupported field value:",e,r),HT(r,e);if(r instanceof Gc)return function(a,i){if(!VT(i.Ac))throw i.Sc(`${a._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(i);l&&i.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(a,i){const l=[];let h=0;for(const g of a){let p=Fo(g,i.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}}(r,e)}return function(a,i){if((a=ft(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return bR(i.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=ct.fromDate(a);return{timestampValue:Zd(i.serializer,l)}}if(a instanceof ct){const l=new ct(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Zd(i.serializer,l)}}if(a instanceof Pr)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Xn)return{bytesValue:iT(i.serializer,a._byteString)};if(a instanceof Et){const l=i.databaseId,h=a.firestore._databaseId;if(!h.isEqual(l))throw i.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:hp(a.firestore._databaseId||i.databaseId,a._key.path)}}if(a instanceof Vr)return function(h,g){return{mapValue:{fields:{[Ow]:{stringValue:Mw},[Kd]:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return cp(g.serializer,y)})}}}}}}(a,i);throw i.Sc(`Unsupported field value: ${xh(a)}`)}(r,e)}function HT(r,e){const t={};return Aw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wa(r,(a,i)=>{const l=Fo(i,e.mc(a));l!=null&&(t[a]=l)}),{mapValue:{fields:t}}}function BT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ct||r instanceof Pr||r instanceof Xn||r instanceof Et||r instanceof Gc||r instanceof Vr)}function Ip(r,e,t){if(!BT(t)||!Sw(t)){const a=xh(t);throw a==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+a)}}function Um(r,e,t){if((e=ft(e))instanceof $c)return e._internalPath;if(typeof e=="string")return Cp(r,e);throw sh("Field path arguments must be of type string or ",r,!1,void 0,t)}const II=new RegExp("[~\\*/\\[\\]]");function Cp(r,e,t){if(e.search(II)>=0)throw sh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new $c(...e.split("."))._internalPath}catch{throw sh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function sh(r,e,t,a,i){const l=a&&!a.isEmpty(),h=i!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${a}`),h&&(p+=` in document ${i}`),p+=")"),new ye(he.INVALID_ARGUMENT,g+r+p)}function qT(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,t,a,i,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Op("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class CI extends FT{data(){return super.data()}}function Op(r,e){return typeof e=="string"?Cp(r,e):e instanceof $c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ye(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mp{}class GT extends Mp{}function Sd(r,e,...t){let a=[];e instanceof Mp&&a.push(e),a=a.concat(t),function(l){const h=l.filter(p=>p instanceof Vp).length,g=l.filter(p=>p instanceof Pp).length;if(h>1||h>0&&g>0)throw new ye(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const i of a)r=i._apply(r);return r}class Pp extends GT{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Pp(e,t,a)}_apply(e){const t=this._parse(e);return YT(e._query,t),new Ea(e.firestore,e.converter,Am(e._query,t))}_parse(e){const t=Oh(e.firestore);return function(l,h,g,p,y,b,w){let T;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ye(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Yv(w,b);const F=[];for(const $ of w)F.push(Gv(p,l,$));T={arrayValue:{values:F}}}else T=Gv(p,l,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Yv(w,b),T=jI(g,h,w,b==="in"||b==="not-in");return jt.create(y,b,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Vp extends Mp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vp(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return t.length===1?t[0]:ur.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,l){let h=i;const g=l.getFlattenedFilters();for(const p of g)YT(h,p),h=Am(h,p)}(e._query,t),new Ea(e.firestore,e.converter,Am(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lp extends GT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Lp(e,t)}_apply(e){const t=function(i,l,h){if(i.startAt!==null)throw new ye(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ye(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nc(l,h)}(e._query,this._field,this._direction);return new Ea(e.firestore,e.converter,function(i,l){const h=i.explicitOrderBy.concat([l]);return new Bo(i.path,i.collectionGroup,h,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function Nd(r,e="asc"){const t=e,a=Op("orderBy",r);return Lp._create(a,t)}function Gv(r,e,t){if(typeof(t=ft(t))=="string"){if(t==="")throw new ye(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qw(e)&&t.indexOf("/")!==-1)throw new ye(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(lt.fromString(t));if(!Te.isDocumentKey(a))throw new ye(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return lv(r,new Te(a))}if(t instanceof Et)return lv(r,t._key);throw new ye(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xh(t)}.`)}function Yv(r,e){if(!Array.isArray(r)||r.length===0)throw new ye(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YT(r,e){const t=function(i,l){for(const h of i)for(const g of h.getFlattenedFilters())if(l.indexOf(g.op)>=0)return g.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ye(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class OI{convertValue(e,t="none"){switch(xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ya(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return wa(e,(i,l)=>{a[i]=this.convertValue(l,t)}),a}convertVectorValue(e){const t=e.fields?.[Kd].arrayValue?.values?.map(a=>_t(a.doubleValue));return new Vr(t)}convertGeoPoint(e){return new Pr(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=_h(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(Ec(e));default:return null}}convertTimestamp(e){const t=pa(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=lt.fromString(e);Qe(hT(a),9688,{name:e});const i=new kc(a.get(1),a.get(3)),l=new Te(a.popFirst(5));return i.isEqual(t)||ws(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(r,e,t){let a;return a=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,a}class uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class di extends FT{constructor(e,t,a,i,l,h){super(e,t,a,i,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Op("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(he.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=di._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}di._jsonSchemaVersion="firestore/documentSnapshot/1.0",di._jsonSchema={type:It("string",di._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class Ud extends di{data(e={}){return super.data(e)}}class hi{constructor(e,t,a,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new uc(i.hasPendingWrites,i.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new Ud(this._firestore,this._userDataWriter,a.key,a,new uc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,l){if(i._snapshot.oldDocs.isEmpty()){let h=0;return i._snapshot.docChanges.map(g=>{const p=new Ud(i._firestore,i._userDataWriter,g.doc.key,g.doc,new uc(i._snapshot.mutatedKeys.has(g.doc.key),i._snapshot.fromCache),i.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(g=>l||g.type!==3).map(g=>{const p=new Ud(i._firestore,i._userDataWriter,g.doc.key,g.doc,new uc(i._snapshot.mutatedKeys.has(g.doc.key),i._snapshot.fromCache),i.query.converter);let y=-1,b=-1;return g.type!==0&&(y=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),b=h.indexOf(g.doc.key)),{type:MI(g.type),doc:p,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(he.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=hi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],i=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),i.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function MI(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(r){r=On(r,Et);const e=On(r.firestore,Es);return wI(Fc(e),r._key).then(t=>QT(e,r,t))}hi._jsonSchemaVersion="firestore/querySnapshot/1.0",hi._jsonSchema={type:It("string",hi._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class Up extends OI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}}function rm(r){r=On(r,Ea);const e=On(r.firestore,Es),t=Fc(e),a=new Up(e);return $T(r._query),TI(t,r._query).then(i=>new hi(e,a,r,i))}function rc(r,e,t,...a){r=On(r,Et);const i=On(r.firestore,Es),l=Oh(i);let h;return h=typeof(e=ft(e))=="string"||e instanceof $c?zT(l,"updateDoc",r._key,e,t,a):UT(l,"updateDoc",r._key,e),Mh(i,[h.toMutation(r._key,wn.exists(!0))])}function sm(r){return Mh(On(r.firestore,Es),[new Nh(r._key,wn.none())])}function Wv(r,e){const t=On(r.firestore,Es),a=gs(r),i=WT(r.converter,e);return Mh(t,[LT(Oh(r.firestore),"addDoc",a._key,i,r.converter!==null,{}).toMutation(a._key,wn.exists(!1))]).then(()=>a)}function Qv(r,...e){r=ft(r);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||$v(e[a])||(t=e[a++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if($v(e[a])){const p=e[a];e[a]=p.next?.bind(p),e[a+1]=p.error?.bind(p),e[a+2]=p.complete?.bind(p)}let l,h,g;if(r instanceof Et)h=On(r.firestore,Es),g=wh(r._key.path),l={next:p=>{e[a]&&e[a](QT(h,r,p))},error:e[a+1],complete:e[a+2]};else{const p=On(r,Ea);h=On(p.firestore,Es),g=p._query;const y=new Up(h);l={next:b=>{e[a]&&e[a](new hi(h,y,p,b))},error:e[a+1],complete:e[a+2]},$T(r._query)}return function(y,b,w,T){const O=new Dp(T),F=new Sp(b,O,w);return y.asyncQueue.enqueueAndForget(async()=>Tp(await rh(y),F)),()=>{O.Nu(),y.asyncQueue.enqueueAndForget(async()=>Ep(await rh(y),F))}}(Fc(h),g,i,l)}function Mh(r,e){return function(a,i){const l=new xs;return a.asyncQueue.enqueueAndForget(async()=>uI(await _I(a),i,l)),l.promise}(Fc(r),e)}function QT(r,e,t){const a=t.docs.get(e._key),i=new Up(r);return new di(r,i,e._key,a,new uc(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Oh(e)}set(e,t,a){this._verifyNotCommitted();const i=am(e,this._firestore),l=WT(i.converter,t,a),h=LT(this._dataReader,"WriteBatch.set",i._key,l,i.converter!==null,a);return this._mutations.push(h.toMutation(i._key,wn.none())),this}update(e,t,a,...i){this._verifyNotCommitted();const l=am(e,this._firestore);let h;return h=typeof(t=ft(t))=="string"||t instanceof $c?zT(this._dataReader,"WriteBatch.update",l._key,t,a,i):UT(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=am(e,this._firestore);return this._mutations=this._mutations.concat(new Nh(t._key,wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function am(r,e){if((r=ft(r)).firestore!==e)throw new ye(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){return new Yc("deleteField")}function ir(){return new Rp("serverTimestamp")}function LI(...r){return new jp("arrayUnion",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(r){return Fc(r=On(r,Es)),new PI(r,e=>Mh(r,e))}(function(e,t=!0){(function(i){Uo=i})(vi),gi(new ga("firestore",(a,{instanceIdentifier:i,options:l})=>{const h=a.getProvider("app").getImmediate(),g=new Es(new jD(a.getProvider("auth-internal")),new OD(h,a.getProvider("app-check-internal")),function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ye(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kc(y.options.projectId,b)}(h,i),h);return l={useFetchStreams:t,...l},g._setSettings(l),g},"PUBLIC").setMultipleInstances(!0)),jr(Qb,Kb,e),jr(Qb,Kb,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="firebasestorage.googleapis.com",zI="storageBucket",HI=120*1e3,BI=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Hr{constructor(e,t,a=0){super(im(e),`Firebase Storage: ${t} (${im(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Br.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return im(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ur;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ur||(Ur={}));function im(r){return"storage/"+r}function qI(){const r="An unknown error occurred, please check the error payload for server response.";return new Br(Ur.UNKNOWN,r)}function FI(){return new Br(Ur.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $I(){return new Br(Ur.CANCELED,"User canceled the upload/download.")}function GI(r){return new Br(Ur.INVALID_URL,"Invalid URL '"+r+"'.")}function YI(r){return new Br(Ur.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function Kv(r){return new Br(Ur.INVALID_ARGUMENT,r)}function XT(){return new Br(Ur.APP_DELETED,"The Firebase app was deleted.")}function WI(r){return new Br(Ur.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let a;try{a=lr.makeFromUrl(e,t)}catch{return new lr(e,"")}if(a.path==="")return a;throw YI(e)}static makeFromUrl(e,t){let a=null;const i="([A-Za-z0-9.\\-_]+)";function l(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const h="(/(.*))?$",g=new RegExp("^gs://"+i+h,"i"),p={bucket:1,path:3};function y(V){V.path_=decodeURIComponent(V.path)}const b="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",O=new RegExp(`^https?://${w}/${b}/b/${i}/o${T}`,"i"),F={bucket:1,path:3},$=t===KT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,P="([^?#]*)",S=new RegExp(`^https?://${$}/${i}/${P}`,"i"),I=[{regex:g,indices:p,postModify:l},{regex:O,indices:F,postModify:y},{regex:S,indices:{bucket:1,path:2},postModify:y}];for(let V=0;V<I.length;V++){const Y=I[V],te=Y.regex.exec(e);if(te){const A=te[Y.indices.bucket];let k=te[Y.indices.path];k||(k=""),a=new lr(A,k),Y.postModify(a);break}}if(a==null)throw GI(e);return a}}class QI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(r,e,t){let a=1,i=null,l=null,h=!1,g=0;function p(){return g===2}let y=!1;function b(...P){y||(y=!0,e.apply(null,P))}function w(P){i=setTimeout(()=>{i=null,r(O,p())},P)}function T(){l&&clearTimeout(l)}function O(P,...S){if(y){T();return}if(P){T(),b.call(null,P,...S);return}if(p()||h){T(),b.call(null,P,...S);return}a<64&&(a*=2);let I;g===1?(g=2,I=0):I=(a+Math.random())*1e3,w(I)}let F=!1;function $(P){F||(F=!0,T(),!y&&(i!==null?(P||(g=2),clearTimeout(i),w(0)):P||(g=1)))}return w(0),l=setTimeout(()=>{h=!0,$(!0)},t),$}function XI(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(r){return r!==void 0}function Xv(r,e,t,a){if(a<e)throw Kv(`Invalid value for '${r}'. Expected ${e} or greater.`);if(a>t)throw Kv(`Invalid value for '${r}'. Expected ${t} or less.`)}function ZI(r){const e=encodeURIComponent;let t="?";for(const a in r)if(r.hasOwnProperty(a)){const i=e(a)+"="+e(r[a]);t=t+i+"&"}return t=t.slice(0,-1),t}var ah;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(ah||(ah={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,l=e.indexOf(r)!==-1;return t||i||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t,a,i,l,h,g,p,y,b,w,T=!0,O=!1){this.url_=e,this.method_=t,this.headers_=a,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=g,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=w,this.retry=T,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,$)=>{this.resolve_=F,this.reject_=$,this.start_()})}start_(){const e=(a,i)=>{if(i){a(!1,new Ad(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=g=>{const p=g.loaded,y=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,y)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const g=l.getErrorCode()===ah.NO_ERROR,p=l.getStatus();if(!g||eC(p,this.additionalRetryCodes_)&&this.retry){const b=l.getErrorCode()===ah.ABORT;a(!1,new Ad(!1,null,b));return}const y=this.successCodes_.indexOf(p)!==-1;a(!0,new Ad(y,l))})},t=(a,i)=>{const l=this.resolve_,h=this.reject_,g=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(g,g.getResponse());JI(p)?l(p):l()}catch(p){h(p)}else if(g!==null){const p=qI();p.serverResponse=g.getErrorText(),this.errorCallback_?h(this.errorCallback_(g,p)):h(p)}else if(i.canceled){const p=this.appDelete_?XT():$I();h(p)}else{const p=FI();h(p)}};this.canceled_?t(!1,new Ad(!1,null,!0)):this.backoffId_=KI(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&XI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ad{constructor(e,t,a){this.wasSuccessCode=e,this.connection=t,this.canceled=!!a}}function nC(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function rC(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function sC(r,e){e&&(r["X-Firebase-GMPID"]=e)}function aC(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function iC(r,e,t,a,i,l,h=!0,g=!1){const p=ZI(r.urlParams),y=r.url+p,b=Object.assign({},r.headers);return sC(b,e),nC(b,t),rC(b,l),aC(b,a),new tC(y,r.method,b,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,h,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function lC(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t){this._service=e,t instanceof lr?this._location=t:this._location=lr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ih(e,t)}get root(){const e=new lr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lC(this._location.path)}get storage(){return this._service}get parent(){const e=oC(this._location.path);if(e===null)return null;const t=new lr(this._location.bucket,e);return new ih(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw WI(e)}}function Jv(r,e){const t=e?.[zI];return t==null?null:lr.makeFromBucketSpec(t,r)}function cC(r,e,t,a={}){r.host=`${e}:${t}`;const i=bi(e);i&&(Hm(`https://${r.host}/b`),Bm("Storage",!0)),r._isUsingEmulator=!0,r._protocol=i?"https":"http";const{mockUserToken:l}=a;l&&(r._overrideAuthToken=typeof l=="string"?l:j_(l,r.app.options.projectId))}class uC{constructor(e,t,a,i,l,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=a,this._url=i,this._firebaseVersion=l,this._isUsingEmulator=h,this._bucket=null,this._host=KT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=HI,this._maxUploadRetryTime=BI,this._requests=new Set,i!=null?this._bucket=lr.makeFromBucketSpec(i,this._host):this._bucket=Jv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=lr.makeFromBucketSpec(this._url,e):this._bucket=Jv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ih(this,e)}_makeRequest(e,t,a,i,l=!0){if(this._deleted)return new QI(XT());{const h=iC(e,this._appId,a,i,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[a,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,a,i).getPromise()}}const Zv="@firebase/storage",e_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="storage";function dC(r=$m(),e){r=ft(r);const a=gh(r,JT).getImmediate({identifier:e}),i=A_("storage");return i&&hC(a,...i),a}function hC(r,e,t,a={}){cC(r,e,t,a)}function fC(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),a=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new uC(t,a,i,e,vi)}function gC(){gi(new ga(JT,fC,"PUBLIC").setMultipleInstances(!0)),jr(Zv,e_,""),jr(Zv,e_,"esm2020")}gC();const mC={apiKey:"AIzaSyD8aBPw-o13mciSdV8gzRJN6TfaAy3OoWg",authDomain:"todolist-116f3.firebaseapp.com",databaseURL:"https://todolist-116f3-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"todolist-116f3",storageBucket:"todolist-116f3.firebasestorage.app",messagingSenderId:"470825187407",appId:"1:470825187407:web:4bd3f8c621c96890b2d23a",measurementId:"G-HS8CDYHDT1"};let Rc;const t_=JS();t_.length===0?Rc=O_(mC):Rc=t_[0];const Wn=kD(Rc),on=kI(Rc);dC(Rc);const xi=new ms;xi.addScope("email");xi.addScope("profile");xi.addScope("https://www.googleapis.com/auth/userinfo.email");xi.addScope("https://www.googleapis.com/auth/userinfo.profile");xi.setCustomParameters({prompt:"select_account"});console.log("Firebase 프로덕션 서비스 초기화 완료");const ZT=le.createContext(void 0),pC=({children:r})=>{const[e,t]=le.useState(null),[a,i]=le.useState(!0),[l,h]=le.useState(!1);le.useEffect(()=>{if(!Wn){console.log("Auth: Firebase disabled, using localStorage only"),i(!1);return}const $=fA(Wn,P=>{P?(t({uid:P.uid,email:P.email,displayName:P.displayName,isAnonymous:P.isAnonymous}),h(P.isAnonymous)):(t(null),h(!1)),i(!1)});return()=>$()},[]);const g=async()=>{console.log("Auth: Use signInWithGoogle or signIn instead")},p=async()=>{Wn?await gA(Wn):t(null)},y=async()=>{Wn?await rA(Wn):(t({uid:"local-user",email:null,displayName:"Local User",isAnonymous:!0}),h(!0))},F={currentUser:e,loading:a,isAnonymous:l,login:g,logout:p,loginAnonymously:y,signIn:async($,P)=>{Wn?await lA(Wn,$,P):console.log("Auth: SignIn not available in localStorage mode",{email:$,password:P})},signUp:async($,P,S)=>{if(Wn){const L=await oA(Wn,$,P);S&&L.user&&await uA(L.user,{displayName:S})}else console.log("Auth: SignUp not available in localStorage mode",{email:$,password:P,displayName:S})},signInWithGoogle:async()=>{if(!Wn||!xi)throw new Error("Firebase 인증이 초기화되지 않았습니다.");try{const $=await OA(Wn,xi);return console.log("구글 로그인 성공:",$.user),$.user}catch($){throw console.error("구글 로그인 실패:",$),$.code==="auth/popup-closed-by-user"||$.code==="auth/cancelled-popup-request"?new Error("로그인이 취소되었습니다."):$.code==="auth/network-request-failed"?new Error("네트워크 연결을 확인해주세요."):new Error("로그인 중 오류가 발생했습니다: "+$.message)}},signInAsGuest:async()=>{await y()}};return c.jsx(ZT.Provider,{value:F,children:r})},Wc=()=>{const r=le.useContext(ZT);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},Qn=r=>{if(r){if(r instanceof Date)return r;if(typeof r?.toDate=="function")return r.toDate();if(typeof r=="string")return new Date(r)}};console.log("FirestoreService: 실제 Firestore 서비스 활성화");const Lt={getTodos:async r=>{try{const e=na(on,`users/${r}/todos`),t=Sd(e,Nd("createdAt","desc"));return(await rm(t)).docs.map(i=>{const l=i.data();return{id:i.id,...l,createdAt:Qn(l.createdAt)||new Date,updatedAt:Qn(l.updatedAt)||new Date,dueDate:Qn(l.dueDate),startDate:Qn(l.startDate),completedAt:Qn(l.completedAt)}})}catch(e){throw console.error("Firestore getTodos 실패:",e),e}},addTodo:async(r,e)=>{try{const t=na(on,`users/${e}/todos`),a={...r,createdAt:ir(),updatedAt:ir()},i=await Wv(t,a);return console.log("Firestore addTodo 성공:",i.id),i.id}catch(t){throw console.error("Firestore addTodo 실패:",t),t}},updateTodo:async(r,e,t)=>{try{const a=gs(on,`users/${t}/todos`,r);if(!(await nc(a)).exists()){console.warn(`할일 문서 ${r}가 존재하지 않습니다. 업데이트를 건너뜁니다.`);return}const l={...e,updatedAt:ir()};await rc(a,l),console.log("Firestore updateTodo 성공:",r)}catch(a){throw console.error("Firestore updateTodo 실패:",a),a}},deleteTodo:async(r,e)=>{try{console.log("🗑️ Firestore deleteTodo 시작:",{id:r,uid:e}),console.log("📍 삭제 경로:",`users/${e}/todos/${r}`);const t=gs(on,`users/${e}/todos`,r);console.log("🔍 문서 참조 생성 완료:",t.path);const a=await nc(t);if(console.log("📖 문서 존재 여부 확인:",a.exists()),!a.exists()){console.warn(`⚠️ 삭제하려는 문서가 존재하지 않음: ${r}`),console.log("🔍 전체 컬렉션에서 검색 시도...");const h=na(on,`users/${e}/todos`),g=await rm(h);console.log(`📊 사용자의 전체 할일 개수: ${g.docs.length}`);const p=g.docs.find(y=>y.id===r);if(p){console.log("🎯 다른 경로에서 문서 발견:",p.ref.path),console.log("🔧 다른 경로의 문서 삭제 시도..."),await sm(p.ref),console.log("✅ 다른 경로 문서 삭제 성공");return}else console.log("❌ 어떤 경로에서도 문서를 찾을 수 없음"),console.log("📋 실제 Firestore 문서 ID들:",g.docs.map(y=>({id:y.id,title:y.data().title})));throw new Error(`할일 문서 ${r}를 찾을 수 없습니다.`)}const i=a.data();console.log("📄 삭제 대상 문서 확인됨:",{title:i.title,createdAt:i.createdAt,path:a.ref.path}),console.log("🗑️ deleteDoc 실행 중..."),await sm(t),console.log("✅ deleteDoc 함수 실행 완료"),console.log("🔄 삭제 확인 중...");const l=await nc(t);if(l.exists())throw console.error("❌ 삭제 후에도 문서가 여전히 존재함:",r),console.log("🚨 데이터:",l.data()),new Error("문서 삭제에 실패했습니다.");console.log("✅ 삭제 확인 완료: 문서가 성공적으로 삭제됨")}catch(t){throw console.error("❌ Firestore deleteTodo 실패:",t),console.log("📝 오류 세부정보:",{errorCode:t.code,errorMessage:t.message,stack:t.stack}),t}},subscribeTodos:(r,e)=>{try{console.log("🔥 Firestore subscribeTodos 시작 - UID:",r);const t=na(on,`users/${r}/todos`),a=Sd(t,Nd("createdAt","desc"));return Qv(a,l=>{console.log("📡 Firestore snapshot 수신 - 문서 개수:",l.docs.length),l.docChanges().forEach(b=>{b.type==="added"&&console.log("➕ Firestore 문서 추가:",b.doc.id,b.doc.data().title),b.type==="modified"&&console.log("✏️ Firestore 문서 수정:",b.doc.id,b.doc.data().title),b.type==="removed"&&console.log("🗑️ Firestore 문서 삭제 감지:",b.doc.id)});const h="me8an5259ysxiop5c",g=l.docs.find(b=>b.id===h);g?console.log(`🔍 추적 대상 할일 발견 - ID: ${h}`,{title:g.data().title,createdAt:g.data().createdAt,path:`users/${r}/todos/${h}`,fullData:g.data()}):console.log(`🔍 추적 대상 할일 없음 - ID: ${h}`);const p=l.docs.map(b=>{try{const w=b.data();console.log(`📄 문서 처리 중 - Firestore ID: ${b.id}, title: "${w.title}", created: ${w.createdAt}`);const T={...w,id:b.id,createdAt:Qn(w.createdAt)||new Date,updatedAt:Qn(w.updatedAt)||new Date,dueDate:Qn(w.dueDate),startDate:Qn(w.startDate),completedAt:Qn(w.completedAt)};return T.id!==b.id?console.error(`🚨 ID 불일치 감지! Firestore: ${b.id} vs Processed: ${T.id}`):console.log(`✅ ID 일치 확인 - ${T.id}, title: "${T.title}"`),T}catch(w){return console.error(`❌ 문서 처리 실패 - ID: ${b.id}`,w),null}}).filter(b=>b!==null);console.log("📊 Firestore subscribeTodos 최종 결과:",p.length,"개");const y=p.map(b=>b.id);console.log("📋 현재 할일 ID 목록:",y),e(p)},l=>{console.error("❌ Firestore 구독 오류:",l),e([])})}catch(t){return console.error("❌ Firestore subscribeTodos 초기화 실패:",t),e([]),()=>{}}},addSubTask:async(r,e,t)=>{try{const a=gs(on,`users/${e}/todos`,t);await rc(a,{subTasks:LI(r),updatedAt:ir()}),console.log("Firestore addSubTask 성공:",r.id)}catch(a){throw console.error("Firestore addSubTask 실패:",a),a}},updateSubTask:async(r,e,t,a)=>{try{const i=gs(on,`users/${t}/todos`,a),l=await nc(i);if(!l.exists())throw new Error("할일을 찾을 수 없습니다.");const p=(l.data().subTasks||[]).map(y=>y.id===r?{...y,...e,updatedAt:new Date}:y);await rc(i,{subTasks:p,updatedAt:ir()}),console.log("Firestore updateSubTask 성공:",r)}catch(i){throw console.error("Firestore updateSubTask 실패:",i),i}},deleteSubTask:async(r,e,t)=>{try{const a=gs(on,`users/${e}/todos`,t),i=await nc(a);if(!i.exists())throw new Error("할일을 찾을 수 없습니다.");const g=(i.data().subTasks||[]).filter(p=>p.id!==r);await rc(a,{subTasks:g,updatedAt:ir()}),console.log("Firestore deleteSubTask 성공:",r)}catch(a){throw console.error("Firestore deleteSubTask 실패:",a),a}},migrateLocalStorageToFirestore:async(r,e)=>{try{const t=UI(on),a=na(on,`users/${e}/todos`);r.forEach(i=>{const l=gs(a);t.set(l,{...i,createdAt:ir(),updatedAt:ir()})}),await t.commit(),console.log("Firestore 마이그레이션 성공:",r.length,"개")}catch(t){throw console.error("Firestore 마이그레이션 실패:",t),t}},getRecurringTemplates:async r=>{try{const e=na(on,`users/${r}/recurringTemplates`),t=Sd(e,Nd("createdAt","desc"));return(await rm(t)).docs.map(i=>({id:i.id,...i.data(),createdAt:i.data().createdAt?.toDate()||new Date,updatedAt:i.data().updatedAt?.toDate()||new Date}))}catch(e){throw console.error("Firestore getRecurringTemplates 실패:",e),e}},addRecurringTemplate:async(r,e)=>{try{const t=na(on,`users/${e}/recurringTemplates`),a=Object.fromEntries(Object.entries(r).filter(([h,g])=>g!==void 0)),i={title:"",description:"",type:"single",priority:"medium",tags:[],...a,createdAt:ir(),updatedAt:ir()};console.log("🔥 저장할 템플릿 데이터:",i);const l=await Wv(t,i);return console.log("Firestore addRecurringTemplate 성공:",l.id),l.id}catch(t){throw console.error("Firestore addRecurringTemplate 실패:",t),t}},updateRecurringTemplate:async(r,e,t)=>{try{const a=gs(on,`users/${t}/recurringTemplates`,r),l={...Object.fromEntries(Object.entries(e).filter(([h,g])=>g!==void 0)),updatedAt:ir()};console.log("🔥 업데이트할 템플릿 데이터:",l),await rc(a,l),console.log("Firestore updateRecurringTemplate 성공:",r)}catch(a){throw console.error("Firestore updateRecurringTemplate 실패:",a),a}},deleteRecurringTemplate:async(r,e)=>{try{const t=gs(on,`users/${e}/recurringTemplates`,r);await sm(t),console.log("Firestore deleteRecurringTemplate 성공:",r)}catch(t){throw console.error("Firestore deleteRecurringTemplate 실패:",t),t}},subscribeRecurringTemplates:(r,e)=>{try{const t=na(on,`users/${r}/recurringTemplates`),a=Sd(t,Nd("createdAt","desc"));return Qv(a,l=>{const h=l.docs.map(g=>{const p=g.data();return{id:g.id,...p,createdAt:Qn(p.createdAt)||new Date,updatedAt:Qn(p.updatedAt)||new Date}});console.log("Firestore subscribeRecurringTemplates 업데이트:",h.length,"개"),e(h)})}catch(t){return console.error("Firestore subscribeRecurringTemplates 실패:",t),e([]),()=>{}}}},e1=le.createContext(void 0),yC={todos:[],recurringTemplates:[],recurringInstances:[],loading:!1,error:null,syncing:!1};function xC(r,e){switch(e.type){case"SET_LOADING":return{...r,loading:e.payload};case"SET_SYNCING":return{...r,syncing:e.payload};case"SET_ERROR":return{...r,error:e.payload};case"SET_TODOS":const t=e.payload.filter((i,l,h)=>h.findIndex(g=>g.id===i.id)===l);return t.length!==e.payload.length&&console.warn(`⚠️ SET_TODOS 중복 제거: ${e.payload.length} → ${t.length}`),{...r,todos:t};case"ADD_TODO":return r.todos.some(i=>i.id===e.payload.id)?(console.warn(`⚠️ ADD_TODO 중복 방지: ${e.payload.id} 이미 존재`),r):{...r,todos:[e.payload,...r.todos]};case"UPDATE_TODO":return{...r,todos:r.todos.map(i=>i.id===e.payload.id?{...i,...e.payload.updates,updatedAt:new Date}:i)};case"DELETE_TODO":return{...r,todos:r.todos.filter(i=>i.id!==e.payload)};case"TOGGLE_TODO":{const i=new Date;return{...r,todos:r.todos.map(l=>l.id===e.payload?{...l,completed:!l.completed,completedAt:l.completed?void 0:i,updatedAt:i}:l)}}case"ADD_SUBTASK":return{...r,todos:r.todos.map(i=>i.id===e.payload.todoId?{...i,subTasks:[...i.subTasks||[],e.payload.subTask],updatedAt:new Date}:i)};case"UPDATE_SUBTASK":return{...r,todos:r.todos.map(i=>i.id===e.payload.todoId?{...i,subTasks:i.subTasks?.map(l=>l.id===e.payload.subTaskId?{...l,...e.payload.updates,updatedAt:new Date}:l)||[],updatedAt:new Date}:i)};case"DELETE_SUBTASK":return{...r,todos:r.todos.map(i=>i.id===e.payload.todoId?{...i,subTasks:i.subTasks?.filter(l=>l.id!==e.payload.subTaskId)||[],updatedAt:new Date}:i)};case"TOGGLE_SUBTASK":return{...r,todos:r.todos.map(i=>i.id===e.payload.todoId?{...i,subTasks:i.subTasks?.map(l=>l.id===e.payload.subTaskId?{...l,completed:!l.completed,updatedAt:new Date}:l)||[],updatedAt:new Date}:i)};case"SET_RECURRING_TEMPLATES":return{...r,recurringTemplates:e.payload};case"ADD_RECURRING_TEMPLATE":return{...r,recurringTemplates:[e.payload,...r.recurringTemplates]};case"UPDATE_RECURRING_TEMPLATE":return{...r,recurringTemplates:r.recurringTemplates.map(i=>i.id===e.payload.id?{...i,...e.payload.updates,updatedAt:new Date}:i)};case"DELETE_RECURRING_TEMPLATE":return{...r,recurringTemplates:r.recurringTemplates.filter(i=>i.id!==e.payload),recurringInstances:r.recurringInstances.filter(i=>i.templateId!==e.payload)};case"SET_RECURRING_INSTANCES":return{...r,recurringInstances:e.payload};case"GENERATE_RECURRING_INSTANCES":{let i=[],l=[];try{const h=localStorage.getItem("recurringInstances");h&&(l=JSON.parse(h).map(p=>({...p,date:new Date(p.date),createdAt:new Date(p.createdAt),updatedAt:new Date(p.updatedAt),completedAt:p.completedAt?new Date(p.completedAt):void 0})),console.log("📂 localStorage에서 반복 인스턴스 복원:",l.length,"개"))}catch(h){console.error("❌ localStorage 인스턴스 로드 실패:",h)}return r.recurringTemplates.filter(h=>h.isActive).forEach(h=>{try{const p=xo.generateInstances(h).map(y=>{const b=l.find(w=>w.id===y.id);return b?(console.log(`🔄 인스턴스 상태 복원: ${y.id} (완료: ${b.completed})`),{...y,completed:b.completed,completedAt:b.completedAt,updatedAt:b.updatedAt}):y});i=[...i,...p]}catch(g){console.error(`템플릿 ${h.id} 인스턴스 생성 실패:`,g)}}),{...r,recurringInstances:i}}default:return r}}const bC=({children:r})=>{const[e,t]=le.useReducer(xC,yC),{currentUser:a,loading:i}=Wc(),l=le.useRef(null),h=le.useRef(null);le.useEffect(()=>{if(i)return;if(!a){console.log("비로그인 상태: localStorage에서 데이터 로드 시도"),g();return}return t({type:"SET_LOADING",payload:!0}),l.current&&(l.current(),l.current=null),h.current&&(h.current(),h.current=null),(async()=>{try{if(await y(),!a)return;console.log("마이그레이션 완료 후 구독 시작 - 사용자:",a.uid),console.log("🔗 Firestore 할일 구독 시작 - 사용자 ID:",a.uid),console.log("🔗 Firestore 실시간 구독 시작 - 사용자 ID:",a.uid),l.current=Lt.subscribeTodos(a.uid,q=>{console.log("📨 Firestore에서 할일 업데이트 수신:",q.length,"개"),console.log("📋 Firestore에서 로드된 모든 할일 ID:",q.map(K=>K.id)),t({type:"SET_TODOS",payload:q}),t({type:"SET_LOADING",payload:!1}),t({type:"SET_ERROR",payload:null})}),h.current=Lt.subscribeRecurringTemplates(a.uid,q=>{t({type:"SET_RECURRING_TEMPLATES",payload:q}),console.log("반복 템플릿 Firestore에서 로드됨:",q.length,"개")})}catch(q){console.error("Firestore 초기화 실패:",q),t({type:"SET_LOADING",payload:!1}),t({type:"SET_ERROR",payload:"Firebase 연결에 실패했습니다."})}})(),()=>{l.current&&l.current(),h.current&&h.current()}},[a,i]),le.useEffect(()=>{e.recurringTemplates.length>0&&t({type:"GENERATE_RECURRING_INSTANCES"})},[e.recurringTemplates]);const g=()=>{try{if(console.log("=== localStorage에서 데이터 로드 시작 ==="),a){console.log("👤 로그인된 사용자 - 개인 Firebase 데이터만 사용"),t({type:"SET_TODOS",payload:[]}),t({type:"SET_RECURRING_TEMPLATES",payload:[]}),t({type:"SET_LOADING",payload:!1});return}if(a)console.log("로그인된 사용자 - localStorage 할일 로드 건너뜀 (Firestore 사용)");else{const q=localStorage.getItem("todos");if(q){const se=JSON.parse(q).map(ae=>({...ae,createdAt:new Date(ae.createdAt),updatedAt:new Date(ae.updatedAt),dueDate:ae.dueDate?new Date(ae.dueDate):void 0,startDate:ae.startDate?new Date(ae.startDate):void 0,completedAt:ae.completedAt?new Date(ae.completedAt):void 0}));console.log("localStorage에서 할일 로드 (비로그인):",se.length,"개"),t({type:"SET_TODOS",payload:se})}}const R=localStorage.getItem("recurringTemplates");if(R){const K=JSON.parse(R).map(se=>({...se,createdAt:new Date(se.createdAt),updatedAt:new Date(se.updatedAt)}));console.log("localStorage에서 반복 템플릿 로드:",K.length,"개"),t({type:"SET_RECURRING_TEMPLATES",payload:K})}t({type:"SET_LOADING",payload:!1}),console.log("=== localStorage 데이터 로드 완료 ===")}catch(R){console.error("localStorage 데이터 로드 실패:",R),t({type:"SET_ERROR",payload:"localStorage 데이터 로드 중 오류가 발생했습니다."}),t({type:"SET_LOADING",payload:!1})}},p=()=>{if(a){console.log("로그인된 사용자 - localStorage 저장 건너뜀");return}try{localStorage.setItem("todos",JSON.stringify(e.todos)),localStorage.setItem("recurringTemplates",JSON.stringify(e.recurringTemplates)),console.log("localStorage에 데이터 저장 완료 (비로그인)")}catch(R){console.error("localStorage 저장 실패:",R)}},y=async()=>{if(a)try{if(console.log("=== localStorage → Firestore 마이그레이션 확인 ==="),!a)return;console.log("👤 개인 전용 모드 - localStorage 마이그레이션 건너뜀"),localStorage.setItem(`migrated_${a.uid}`,new Date().toISOString());return}catch(R){console.error("마이그레이션 실패:",R),t({type:"SET_ERROR",payload:"데이터 마이그레이션 중 오류가 발생했습니다."})}};le.useEffect(()=>{xo.setTemplates(e.recurringTemplates)},[e.recurringTemplates]),le.useEffect(()=>{!a&&!i&&(console.log("📦 localStorage 저장 중 - todos 변경:",e.todos.length),p())},[e.todos,a,i]),le.useEffect(()=>{!a&&!i&&(console.log("📦 localStorage 저장 중 - 템플릿 변경:",e.recurringTemplates.length),p())},[e.recurringTemplates,a,i]);const b=async()=>{if(a){t({type:"SET_SYNCING",payload:!0});try{const R=await Lt.getTodos(a.uid);t({type:"SET_TODOS",payload:R}),t({type:"SET_ERROR",payload:null})}catch(R){console.error("Firestore 동기화 실패:",R),t({type:"SET_ERROR",payload:"동기화 중 오류가 발생했습니다."})}finally{t({type:"SET_SYNCING",payload:!1})}}},w=async R=>{console.log("addTodo 호출됨:",R,"사용자:",a?.uid);const q={...R,id:dc(),createdAt:new Date,updatedAt:new Date};try{if(a){console.log("Firestore에 할일 추가 중:",q.title);try{const K=await Lt.addTodo(q,a.uid);console.log("Firestore 할일 추가 성공, ID:",K);const se={...q,id:K};t({type:"ADD_TODO",payload:se}),console.log("✅ 로컬 상태 업데이트 완료 - Firestore ID 사용:",K)}catch(K){throw console.error("Firestore 저장 실패:",K),K}}else console.log("비로그인 모드: 메모리에 할일 추가"),t({type:"ADD_TODO",payload:q}),console.log("📦 즉시 localStorage 저장 실행"),setTimeout(()=>{try{const K=[...e.todos,q];localStorage.setItem("todos",JSON.stringify(K)),localStorage.setItem("recurringTemplates",JSON.stringify(e.recurringTemplates)),console.log("✅ localStorage 저장 완료 - todos:",K.length)}catch(K){console.error("❌ localStorage 저장 실패:",K)}},100)}catch(K){console.error("할일 추가 실패:",K),t({type:"SET_ERROR",payload:"할일 추가 중 오류가 발생했습니다."})}},T=async(R,q)=>{try{a?await Lt.updateTodo(R,q,a.uid):(console.log("비로그인 모드: 메모리에서 할일 업데이트"),t({type:"UPDATE_TODO",payload:{id:R,updates:q}}))}catch(K){console.error("할일 업데이트 실패:",K),t({type:"SET_ERROR",payload:"할일 업데이트 중 오류가 발생했습니다."})}},O=async R=>{try{console.log("🗑️ 할일 삭제 시작:",R);const q=e.todos.find(se=>se.id===R);if(console.log("📝 삭제 대상 할일 상세 정보:",{id:q?.id,title:q?.title,_isRecurringInstance:q?._isRecurringInstance,_instanceId:q?._instanceId,_templateId:q?._templateId}),R.startsWith("recurring_")||q?._isRecurringInstance){console.log("🔄 반복 할일 삭제:",R);let se=R;if(q?._instanceId)se=q._instanceId,console.log("📋 메타데이터에서 인스턴스 ID 추출:",se);else if(R.startsWith("recurring_")){const ce=R.split("_");se=R.replace("recurring_",""),ce.length>2&&(se=ce.slice(1,-1).join("_")),console.log("📋 ID 패턴에서 인스턴스 ID 추출:",se)}const ae=e.recurringInstances.filter(ce=>ce.id!==se);t({type:"SET_RECURRING_INSTANCES",payload:ae}),t({type:"DELETE_TODO",payload:R}),console.log("✅ 반복 할일 삭제 완료:",R,"-> 인스턴스 ID:",se);return}if(a){const se=e.todos.find(ce=>ce.id===R);if(!se){console.warn(`⚠️ 로컬 상태에 할일이 없음: ${R}`);return}console.log(`🎯 삭제 대상 확인: ${se.title} (${R})`);const ae=e.todos.filter(ce=>ce.title===se.title&&ce.id!==R);ae.length>0&&console.log(`🔍 중복 할일 발견: ${ae.length}개`,ae.map(ce=>ce.id));try{console.log("🗑️ Firestore에서 할일 삭제 시도:",R),await Lt.deleteTodo(R,a.uid),console.log("✅ Firestore 할일 삭제 성공:",R)}catch(ce){if(ce.message.includes("찾을 수 없습니다"))console.warn(`⚠️ Firestore에 할일이 없음 - 로컬에서만 삭제: ${R}`),console.log(`📝 할일 정보: ${se.title}`);else throw ce}if(ae.length>0){console.log(`🗑️ 중복 할일들 삭제 시작: ${ae.length}개`);for(const ce of ae){try{await Lt.deleteTodo(ce.id,a.uid),console.log(`✅ 중복 할일 삭제 성공: ${ce.id}`)}catch(xe){console.warn(`⚠️ 중복 할일 삭제 실패: ${ce.id}`,xe)}t({type:"DELETE_TODO",payload:ce.id})}}console.log("🗑️ 로컬 상태에서 할일 제거:",R),t({type:"DELETE_TODO",payload:R}),console.log("✅ 삭제 완료 - 실시간 구독이 자동으로 UI 업데이트함"),console.log("✅ 할일 삭제 완료 (로컬 + Firestore + 중복 제거 + 강제 새로고침)")}else console.log("비로그인 모드: 할일 삭제:",R),t({type:"DELETE_TODO",payload:R}),console.log("✅ 비로그인 할일 삭제 완료")}catch(q){if(console.error("할일 삭제 실패:",q),t({type:"SET_ERROR",payload:"할일 삭제 중 오류가 발생했습니다."}),a&&!R.startsWith("recurring_")){console.log("🔄 삭제 실패로 인한 UI 롤백");const K=await Lt.getTodos(a.uid);t({type:"SET_TODOS",payload:K})}}},F=async R=>{console.log("📝 할일 토글 시작:",R);const K=[...e.todos,...H()].find(ce=>ce.id===R);if(K&&K._isRecurringInstance){console.log("🔄 반복 할일 토글:",R);const ce=K._instanceId;console.log("📍 인스턴스 ID:",ce);const xe=e.recurringInstances.find(Ke=>Ke.id===ce);if(xe){console.log("✅ 인스턴스 발견:",xe);const Ke={...xe,completed:!xe.completed,completedAt:xe.completed?void 0:new Date,updatedAt:new Date},Me=e.recurringInstances.map(at=>at.id===ce?Ke:at);t({type:"SET_RECURRING_INSTANCES",payload:Me});try{localStorage.setItem("recurringInstances",JSON.stringify(Me)),console.log("✅ 반복 할일 상태 localStorage에 저장 완료")}catch(at){console.error("❌ localStorage 저장 실패:",at)}console.log("✅ 반복 할일 토글 완료");return}else{console.error("❌ 반복 인스턴스를 찾을 수 없음:",ce);return}}const se=e.todos.find(ce=>ce.id===R);if(!se){console.error("Todo not found:",R);return}const ae={completed:!se.completed,...se.completed?{completedAt:VI()}:{completedAt:new Date}};try{t({type:"TOGGLE_TODO",payload:R});const xe=[...e.todos,...H()].find(Me=>Me.id===R),Ke=R.startsWith("recurring_")||xe?._isRecurringInstance;a&&!Ke?(await Lt.updateTodo(R,ae,a.uid),console.log("Firestore 업데이트 성공:",R)):Ke?console.log("반복 할일 상태 업데이트:",R):console.log("비로그인 모드: 메모리에서 할일 토글"),console.log(`할일 토글 성공: ${R} (반복할일: ${Ke})`)}catch(ce){console.error("할일 토글 실패:",ce),t({type:"TOGGLE_TODO",payload:R}),t({type:"SET_ERROR",payload:"할일 상태 변경 중 오류가 발생했습니다."})}},$=async(R,q)=>{const K={id:dc(),title:q,completed:!1,priority:"medium",createdAt:new Date,updatedAt:new Date};try{a?await Lt.addSubTask(K,a.uid,R):t({type:"ADD_SUBTASK",payload:{todoId:R,subTask:K}})}catch(se){console.error("서브태스크 추가 실패:",se),t({type:"SET_ERROR",payload:"하위 작업 추가 중 오류가 발생했습니다."})}},P=async(R,q,K)=>{try{a?await Lt.updateSubTask(q,K,a.uid,R):t({type:"UPDATE_SUBTASK",payload:{todoId:R,subTaskId:q,updates:K}})}catch(se){console.error("서브태스크 업데이트 실패:",se),t({type:"SET_ERROR",payload:"하위 작업 업데이트 중 오류가 발생했습니다."})}},S=async(R,q)=>{try{a?await Lt.deleteSubTask(q,a.uid,R):t({type:"DELETE_SUBTASK",payload:{todoId:R,subTaskId:q}})}catch(K){console.error("서브태스크 삭제 실패:",K),t({type:"SET_ERROR",payload:"하위 작업 삭제 중 오류가 발생했습니다."})}},L=async(R,q)=>{const se=e.todos.find(ae=>ae.id===R)?.subTasks?.find(ae=>ae.id===q);se&&await P(R,q,{completed:!se.completed})},I=R=>{const q=R?new Date(R):new Date;q.setHours(0,0,0,0);const K=e.todos.filter(Me=>{if(Me.completed){if(Me.completedAt){const at=new Date(Me.completedAt);return at.setHours(0,0,0,0),at.getTime()===q.getTime()}return!1}if(Me.dueDate){const at=new Date(Me.dueDate);if(at.setHours(0,0,0,0),at.getTime()===q.getTime())return!0;const Zn=new Date(q);if(Zn.setDate(Zn.getDate()-1),at.getTime()===Zn.getTime())return!0}if(Me.startDate){const at=new Date(Me.startDate);if(at.setHours(0,0,0,0),at.getTime()===q.getTime())return!0}return!Me.dueDate&&!Me.startDate}),ae=H().filter(Me=>Me.dueDate?new Date(Me.dueDate).toDateString()===q.toDateString():!1),ce=new Set;return[...K,...ae].filter(Me=>ce.has(Me.id)?(console.warn(`⚠️ 중복 키 발견 및 제거: ${Me.id}`),!1):(ce.add(Me.id),!0))},V=()=>{const R=new Date,q=new Date;q.setDate(R.getDate()+7);const K=e.todos.filter(ce=>{if(ce.dueDate){const xe=new Date(ce.dueDate);if(xe>=R&&xe<=q)return!0}if(ce.completed&&ce.completedAt){const xe=new Date(ce.completedAt);if(xe>=R&&xe<=q)return!0}return!1}),ae=H().filter(ce=>{if(!ce.dueDate)return!1;const xe=new Date(ce.dueDate);return xe>=R&&xe<=q});return[...K,...ae]},Y=()=>{const R=new Date,q=new Date;q.setMonth(R.getMonth()+1);const K=e.todos.filter(ce=>{if(ce.dueDate){const xe=new Date(ce.dueDate);if(xe>=R&&xe<=q)return!0}if(ce.completed&&ce.completedAt){const xe=new Date(ce.completedAt);if(xe>=R&&xe<=q)return!0}return!1}),ae=H().filter(ce=>{if(!ce.dueDate)return!1;const xe=new Date(ce.dueDate);return xe>=R&&xe<=q});return[...K,...ae]},te=()=>{const R=new Date;return R.setHours(0,0,0,0),e.todos.filter(q=>{if(!q.dueDate||q.completed)return!1;const K=new Date(q.dueDate);return K.setHours(0,0,0,0),K<R})},A=R=>{const q=R||new Date,K=new Date(q);return K.setDate(K.getDate()+1),e.todos.filter(se=>se.dueDate?new Date(se.dueDate).toDateString()===K.toDateString():!1)},k=R=>{const q=R||new Date,K=new Date(q);return K.setDate(K.getDate()-1),e.todos.filter(se=>se.completed||!se.dueDate?!1:new Date(se.dueDate).toDateString()===K.toDateString())},C=R=>{if(R.completed||!R.dueDate)return!1;const q=new Date;return q.setDate(q.getDate()-1),new Date(R.dueDate).toDateString()===q.toDateString()},z=(R,q)=>{t({type:"UPDATE_TODO",payload:{id:R,updates:{order:q,updatedAt:new Date}}})},M=(R,q,K)=>{const se=Array.from(K),[ae]=se.splice(R,1);se.splice(q,0,ae),se.forEach((ce,xe)=>{z(ce.id,xe)})},B=R=>[...e.todos,...H()].filter(K=>{if(R.searchTerm){const se=R.searchTerm.toLowerCase(),ae=K.title.toLowerCase().includes(se),ce=K.description?.toLowerCase().includes(se)||!1,xe=K.tags?.some(Ke=>Ke.toLowerCase().includes(se))||!1;if(!ae&&!ce&&!xe)return!1}if(R.priorityFilter&&R.priorityFilter!=="all"&&K.priority!==R.priorityFilter||R.typeFilter&&R.typeFilter!=="all"&&K.type!==R.typeFilter||R.projectFilter&&R.projectFilter!=="all"&&K.project!==R.projectFilter)return!1;if(R.tagFilter&&R.tagFilter.length>0){const se=K.tags||[];if(!R.tagFilter.some(ce=>se.includes(ce)))return!1}if(R.completionDateFilter&&R.completionDateFilter!=="all"&&K.completedAt){const se=new Date(K.completedAt),ae=new Date;switch(R.completionDateFilter){case"today":if(se.toDateString()!==ae.toDateString())return!1;break;case"yesterday":const ce=new Date;if(ce.setDate(ae.getDate()-1),se.toDateString()!==ce.toDateString())return!1;break;case"thisWeek":const xe=new Date(ae);if(xe.setDate(ae.getDate()-ae.getDay()),xe.setHours(0,0,0,0),se<xe)return!1;break;case"lastWeek":const Ke=new Date(ae);Ke.setDate(ae.getDate()-ae.getDay()-7),Ke.setHours(0,0,0,0);const Me=new Date(ae);if(Me.setDate(ae.getDate()-ae.getDay()-1),Me.setHours(23,59,59,999),se<Ke||se>Me)return!1;break;case"thisMonth":const at=new Date(ae.getFullYear(),ae.getMonth(),1);if(se<at)return!1;break}}return!(R.includeCompleted===!1&&K.completed)}),j=async R=>{console.log("=== 반복 템플릿 추가 시작 ==="),console.log("currentUser:",a),console.log("templateData:",R);try{if(a){console.log("Firestore 모드로 저장 시도");const q=await Lt.addRecurringTemplate(R,a.uid);console.log("반복 템플릿 Firestore 저장 성공:",q)}else{console.log("비로그인 모드: 메모리에 반복 템플릿 추가");const q={...R,id:dc(),createdAt:new Date,updatedAt:new Date};t({type:"ADD_RECURRING_TEMPLATE",payload:q})}console.log("=== 반복 템플릿 추가 완료 ===")}catch(q){console.error("반복 템플릿 추가 실패:",q),t({type:"SET_ERROR",payload:"반복 할일 추가 중 오류가 발생했습니다."})}},_e=async(R,q)=>{console.log("=== 반복 템플릿 수정 시작 ==="),console.log("템플릿 ID:",R),console.log("수정 데이터:",q),console.log("currentUser:",a);try{a?(console.log("Firestore 모드로 업데이트 시도"),await Lt.updateRecurringTemplate(R,q,a.uid),console.log("반복 템플릿 Firestore 업데이트 성공:",R),t({type:"UPDATE_RECURRING_TEMPLATE",payload:{id:R,updates:q}}),console.log("로컬 상태 업데이트 완료")):(console.log("비로그인 모드: 메모리에서 반복 템플릿 업데이트"),t({type:"UPDATE_RECURRING_TEMPLATE",payload:{id:R,updates:q}})),console.log("=== 반복 템플릿 수정 완료 ===")}catch(K){console.error("반복 템플릿 업데이트 실패:",K),t({type:"SET_ERROR",payload:"반복 할일 업데이트 중 오류가 발생했습니다."})}},Ee=()=>{console.log("🧹 중복 반복 템플릿 정리 시작");const R={};e.recurringTemplates.forEach(K=>{const se=K.title;R[se]||(R[se]=[]),R[se].push(K)});const q=Object.entries(R).filter(([K,se])=>se.length>1);if(q.length>0){console.log("❌ 중복된 템플릿들:",q.map(([ae,ce])=>`${ae}: ${ce.length}개`));const K=[];Object.entries(R).forEach(([ae,ce])=>{if(ce.length>1){const xe=ce.sort((Ke,Me)=>new Date(Me.createdAt).getTime()-new Date(Ke.createdAt).getTime());K.push(xe[0]),console.log(`"${ae}" 중복 제거: ${ce.length}개 → 1개`)}else K.push(ce[0])}),t({type:"SET_RECURRING_TEMPLATES",payload:K});const se=[];for(const ae of K){const ce=xo.generateInstances(ae);se.push(...ce)}t({type:"SET_RECURRING_INSTANCES",payload:se});try{localStorage.setItem("recurringTemplates",JSON.stringify(K)),localStorage.setItem("recurringInstances",JSON.stringify(se)),console.log("✅ 중복 정리 완료 - 남은 템플릿:",K.length,"인스턴스:",se.length)}catch(ae){console.error("❌ 정리 후 저장 실패:",ae)}}else console.log("✅ 중복된 템플릿이 없습니다.")},W=async R=>{try{a?(t({type:"DELETE_RECURRING_TEMPLATE",payload:R}),console.log("✅ 즉시 UI에서 반복 템플릿 제거:",R),await Lt.deleteRecurringTemplate(R,a.uid),console.log("✅ 반복 템플릿 Firestore 삭제 성공:",R)):(console.log("비로그인 모드: 메모리에서 반복 템플릿 삭제"),t({type:"DELETE_RECURRING_TEMPLATE",payload:R}),setTimeout(()=>{try{const q=e.recurringTemplates.filter(K=>K.id!==R);localStorage.setItem("recurringTemplates",JSON.stringify(q)),localStorage.setItem("todos",JSON.stringify(e.todos)),console.log("✅ 반복 템플릿 삭제 후 localStorage 저장 완료")}catch(q){console.error("❌ 삭제 후 localStorage 저장 실패:",q)}},100))}catch(q){console.error("반복 템플릿 삭제 실패:",q),t({type:"SET_ERROR",payload:"반복 할일 삭제 중 오류가 발생했습니다."})}},J=()=>{let R=[];e.recurringTemplates.filter(q=>q.isActive).forEach(q=>{try{const K=xo.generateInstances(q);R=[...R,...K]}catch(K){console.error(`템플릿 ${q.id} 인스턴스 생성 실패:`,K)}}),t({type:"SET_RECURRING_INSTANCES",payload:R})},H=()=>{const R=[],q=new Set;return e.recurringInstances.forEach(se=>{const ae=e.recurringTemplates.find(ce=>ce.id===se.templateId);if(ae){const ce=xo.convertToTodo(se,ae);q.has(ce.id)&&(console.warn(`⚠️ 반복 할일 중복 키 발견: ${ce.id}, 인스턴스: ${se.id}`),ce.id=`recurring_${se.id}_${Date.now()}_${Math.random().toString(36).slice(2,7)}`,console.log(`✅ 중복 키 해결: ${ce.id}`)),q.add(ce.id),R.push(ce)}}),xo.removeDuplicateTodos(R)},re={...e,addTodo:w,updateTodo:T,deleteTodo:O,toggleTodo:F,addSubTask:$,updateSubTask:P,deleteSubTask:S,toggleSubTask:L,syncWithFirestore:b,getTodayTodos:I,getWeekTodos:V,getMonthTodos:Y,getOverdueTodos:te,getTomorrowTodos:A,getYesterdayIncompleteTodos:k,isYesterdayIncompleteTodo:C,updateTodoOrder:z,reorderTodos:M,getFilteredTodos:B,addRecurringTemplate:j,updateRecurringTemplate:_e,deleteRecurringTemplate:W,generateRecurringInstances:J,getRecurringTodos:H,cleanupDuplicateTemplates:Ee,forceRefresh:async()=>{if(!a){console.log("❌ 사용자가 로그인하지 않음");return}console.log("🔄 Firestore 강제 새로고침 시작..."),t({type:"SET_LOADING",payload:!0});try{const R=await Lt.getTodos(a.uid);console.log("✅ 강제 새로고침 성공:",R.length,"개 할일"),t({type:"SET_TODOS",payload:R}),t({type:"SET_ERROR",payload:null})}catch(R){console.error("❌ 강제 새로고침 실패:",R),t({type:"SET_ERROR",payload:"데이터 새로고침에 실패했습니다."})}finally{t({type:"SET_LOADING",payload:!1})}},manualRefresh:async()=>{if(!a){console.log("❌ 로그인하지 않은 사용자");return}console.log("🔄 수동 새로고침 시작 (삭제 후 호출)");try{const R=await Lt.getTodos(a.uid);console.log("✅ 수동 새로고침 성공:",R.length,"개 할일"),t({type:"SET_TODOS",payload:R})}catch(R){console.error("❌ 수동 새로고침 실패:",R)}}};return c.jsx(e1.Provider,{value:re,children:r})},tn=()=>{const r=le.useContext(e1);if(r===void 0)throw new Error("useTodos must be used within a TodoProvider");return r},t1=le.createContext(void 0),vC=()=>{const r=le.useContext(t1);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r},_C=({children:r})=>{const[e,t]=le.useState(()=>localStorage.getItem("theme")||"system"),[a,i]=le.useState(!1);return le.useEffect(()=>{const l=window.document.documentElement,h=()=>{l.classList.remove("dark");let g;e==="system"?g=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":g=e,g==="dark"&&l.classList.add("dark"),i(g==="dark")};if(h(),e==="system"){const g=window.matchMedia("(prefers-color-scheme: dark)"),p=()=>h();return g.addEventListener("change",p),()=>g.removeEventListener("change",p)}},[e]),le.useEffect(()=>{localStorage.setItem("theme",e)},[e]),c.jsx(t1.Provider,{value:{theme:e,setTheme:t,isDark:a},children:r})},wC=()=>{const{theme:r,setTheme:e}=vC(),t=[{value:"light",label:"Light"},{value:"dark",label:"Dark"},{value:"system",label:"System"}];return c.jsx("div",{className:"grid grid-cols-3 gap-1",children:t.map(({value:a,label:i})=>c.jsx("button",{onClick:()=>e(a),className:`px-2 py-2 text-xs rounded-lg transition-colors ${r===a?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:`${i} 모드`,children:i},a))})},TC=()=>{const{todos:r,addTodo:e,syncWithFirestore:t,syncing:a,loading:i,forceRefresh:l}=tn(),{currentUser:h}=Wc(),[g,p]=le.useState(null),[y,b]=le.useState(!1),w=()=>{try{const O={version:"1.0",exportDate:new Date().toISOString(),todos:r},F=JSON.stringify(O,null,2),$="data:application/json;charset=utf-8,"+encodeURIComponent(F),P=`todos-backup-${new Date().toISOString().split("T")[0]}.json`,S=document.createElement("a");S.setAttribute("href",$),S.setAttribute("download",P),S.click(),p({type:"success",text:"데이터가 성공적으로 내보내기 되었습니다!"}),setTimeout(()=>p(null),3e3)}catch{p({type:"error",text:"데이터 내보내기 중 오류가 발생했습니다."}),setTimeout(()=>p(null),3e3)}},T=O=>{const F=O.target.files?.[0];if(!F)return;const $=new FileReader;$.onload=P=>{try{const S=P.target?.result,L=JSON.parse(S);if(!L.todos||!Array.isArray(L.todos))throw new Error("잘못된 백업 파일 형식입니다.");window.confirm(`${L.todos.length}개의 할일을 가져오시겠습니까?
기존 데이터와 병합됩니다.`)&&(L.todos.forEach(V=>{const{id:Y,...te}=V;e({...te,createdAt:new Date(V.createdAt),updatedAt:new Date(V.updatedAt),dueDate:V.dueDate?new Date(V.dueDate):void 0,subTasks:V.subTasks?.map(A=>({...A,createdAt:new Date(A.createdAt)}))})}),p({type:"success",text:`${L.todos.length}개의 할일을 성공적으로 가져왔습니다!`}))}catch{p({type:"error",text:"파일을 읽는 중 오류가 발생했습니다. 올바른 백업 파일인지 확인해주세요."})}O.target.value="",setTimeout(()=>p(null),3e3)},$.readAsText(F)};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsx("div",{className:`flex items-center justify-center gap-1 px-3 py-2 rounded-lg text-sm ${h?"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700"}`,children:h?c.jsxs(c.Fragment,{children:[c.jsx(vk,{className:"w-4 h-4"}),c.jsx("span",{children:"온라인"})]}):c.jsxs(c.Fragment,{children:[c.jsx(xk,{className:"w-4 h-4"}),c.jsx("span",{children:"오프라인"})]})}),c.jsxs("button",{onClick:w,className:"flex items-center justify-center gap-2 px-3 py-2 text-sm bg-blue-50 text-blue-700 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-400 dark:hover:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-800",title:"데이터 내보내기",children:[c.jsx(g_,{className:"w-4 h-4"}),"내보내기"]}),c.jsxs("label",{className:"flex items-center justify-center gap-2 px-3 py-2 text-sm bg-green-50 text-green-700 hover:bg-green-100 dark:bg-green-900/20 dark:text-green-400 dark:hover:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-800 cursor-pointer col-span-2",children:[c.jsx(T_,{className:"w-4 h-4"}),"가져오기",c.jsx("input",{type:"file",accept:".json",onChange:T,className:"hidden"})]})]}),g&&c.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 text-sm rounded-lg ${g.type==="success"?"bg-green-50 text-green-700 border border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800":"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800"}`,children:[g.type==="success"?c.jsx(Dd,{className:"w-4 h-4"}):c.jsx(dk,{className:"w-4 h-4"}),g.text]})]})},n_=({layout:r="sidebar"})=>{const{todos:e,getTodayTodos:t,getWeekTodos:a,getOverdueTodos:i}=tn(),l=e.length,h=e.filter(S=>S.completed).length,g=l>0?Math.round(h/l*100):0,p=t(),y=p.filter(S=>S.completed).length,b=p.length,w=a(),T=w.filter(S=>S.completed).length,O=w.length,F=O>0?Math.round(T/O*100):0,$=i().length,P=[{title:"전체 완료율",value:`${g}%`,textColor:"text-green-600",bgColor:"bg-green-50 dark:bg-green-900/20"},{title:"오늘 진행률",value:`${y}/${b}`,textColor:"text-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20"},{title:"이번 주",value:`${F}%`,textColor:"text-purple-600",bgColor:"bg-purple-50 dark:bg-purple-900/20"},{title:"지연된 할일",value:$.toString(),textColor:"text-red-600",bgColor:"bg-red-50 dark:bg-red-900/20"}];return r==="compact"?c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"text-center min-w-[28px]",children:[c.jsxs("p",{className:"text-green-600 text-xs font-bold leading-none",children:[g,"%"]}),c.jsx("p",{className:"text-[9px] text-gray-500 dark:text-gray-400 leading-none mt-0.5",children:"완료율"})]}),c.jsxs("div",{className:"text-center min-w-[28px]",children:[c.jsxs("p",{className:"text-blue-600 text-xs font-bold leading-none",children:[y,"/",b]}),c.jsx("p",{className:"text-[9px] text-gray-500 dark:text-gray-400 leading-none mt-0.5",children:"오늘"})]}),c.jsxs("div",{className:"text-center min-w-[28px]",children:[c.jsxs("p",{className:"text-purple-600 text-xs font-bold leading-none",children:[F,"%"]}),c.jsx("p",{className:"text-[9px] text-gray-500 dark:text-gray-400 leading-none mt-0.5",children:"주간"})]}),c.jsxs("div",{className:"text-center min-w-[28px]",children:[c.jsx("p",{className:"text-red-600 text-xs font-bold leading-none",children:$}),c.jsx("p",{className:"text-[9px] text-gray-500 dark:text-gray-400 leading-none mt-0.5",children:"지연"})]})]}):c.jsx("div",{className:"grid grid-cols-2 gap-2",children:P.map((S,L)=>c.jsx("div",{className:`${S.bgColor} rounded-lg p-2 border border-gray-200 dark:border-gray-700`,children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:S.title}),c.jsx("p",{className:`text-lg font-bold ${S.textColor} dark:text-gray-200`,children:S.value})]})},L))})},r_=({layout:r="full"})=>{const{todos:e}=tn(),t=e.filter(h=>h.type==="project"),a=t.filter(h=>h.project==="longterm").length,i=t.filter(h=>h.project==="shortterm").length,l=[{label:"총 프로젝트",value:t.length,color:"text-blue-600 dark:text-blue-400"},{label:"롱텀 프로젝트",value:a,color:"text-purple-600 dark:text-purple-400"},{label:"숏텀 프로젝트",value:i,color:"text-green-600 dark:text-green-400"},{label:"단일 태스크",value:e.length-t.length,color:"text-orange-600 dark:text-orange-400"}];return r==="compact"?c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"text-center min-w-[28px]",children:[c.jsx("p",{className:"text-blue-600 text-xs font-bold leading-none",children:t.length}),c.jsx("p",{className:"text-[9px] text-gray-500 dark:text-gray-400 leading-none mt-0.5",children:"프로젝트"})]}),c.jsxs("div",{className:"text-center min-w-[28px]",children:[c.jsx("p",{className:"text-orange-600 text-xs font-bold leading-none",children:e.length-t.length}),c.jsx("p",{className:"text-[9px] text-gray-500 dark:text-gray-400 leading-none mt-0.5",children:"단일"})]}),c.jsxs("div",{className:"text-center min-w-[28px]",children:[c.jsx("p",{className:"text-purple-600 text-xs font-bold leading-none",children:a}),c.jsx("p",{className:"text-[9px] text-gray-500 dark:text-gray-400 leading-none mt-0.5",children:"롱텀"})]}),c.jsxs("div",{className:"text-center min-w-[28px]",children:[c.jsx("p",{className:"text-green-600 text-xs font-bold leading-none",children:i}),c.jsx("p",{className:"text-[9px] text-gray-500 dark:text-gray-400 leading-none mt-0.5",children:"숏텀"})]})]}):c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-2 border border-gray-200 dark:border-gray-700",children:[c.jsx("div",{className:"mb-2",children:c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"프로젝트 분석"})}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.map((h,g)=>c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:`text-sm font-bold ${h.color}`,children:h.value}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:h.label})]},g))})]})},EC=({currentView:r,onViewChange:e,isOpen:t,onToggle:a,isMobile:i=!1,forceMobile:l=null,onToggleForceMobile:h})=>{const{getOverdueTodos:g,getTomorrowTodos:p,getYesterdayIncompleteTodos:y,recurringTemplates:b,recurringInstances:w}=tn(),T=g(),O=p(),F=y(),$=b.filter(I=>I.isActive),P=new Date,S=w.filter(I=>new Date(I.date).toDateString()===P.toDateString()),L=[{id:"today",label:"오늘 할일",icon:ha},{id:"week",label:"이번 주 할일",icon:Rt},{id:"month",label:"이번 달 할일",icon:nk},{id:"recurring",label:"반복 관리",icon:zd},{id:"history",label:"완료 히스토리",icon:Mk},{id:"analytics",label:"통계 및 데이터",icon:Ao}];return t?c.jsxs("div",{className:`${i?"fixed top-0 left-0 z-50 w-80 h-full bg-white dark:bg-gray-800 transform transition-transform duration-300 ease-in-out":"relative w-64 h-full bg-white dark:bg-gray-800"} border-r border-gray-200 dark:border-gray-700 flex flex-col shadow-xl`,children:[c.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[c.jsx("h1",{className:`${i?"text-lg":"text-xl"} font-bold text-gray-900 dark:text-white`,children:"할일 관리"}),i&&c.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:c.jsx(Tt,{className:"w-5 h-5"})})]}),c.jsxs("nav",{className:"flex-1 p-4 overflow-y-auto",children:[c.jsx("ul",{className:"space-y-1",children:L.map(I=>{const V=I.icon,Y=r===I.id;return c.jsx("li",{children:c.jsxs("button",{onClick:()=>{e(I.id),i&&a()},className:`w-full flex items-center justify-between px-4 py-2 text-left rounded-lg transition-colors ${Y?"bg-blue-50 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(V,{className:"w-5 h-5 mr-3"}),c.jsx("span",{className:"font-medium",children:I.label})]}),I.id==="recurring"&&$.length>0&&c.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-300 px-2 py-1 rounded-full",children:$.length})]})},I.id)})}),S.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex items-center gap-2 px-4 py-1 text-sm font-medium text-purple-600 dark:text-purple-400",children:[c.jsx(zd,{className:"w-4 h-4"}),c.jsxs("span",{children:["오늘 반복 할일 (",S.length,")"]})]}),c.jsxs("div",{className:"space-y-1 mt-1",children:[S.slice(0,3).map(I=>{const V=$.find(Y=>Y.id===I.templateId);return V?c.jsxs("div",{className:`px-3 py-1 text-sm mx-2 rounded ${I.completed?"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20":"text-purple-600 dark:text-purple-400 bg-purple-50 dark:bg-purple-900/20"}`,children:[c.jsx("div",{className:"truncate",children:V.title}),c.jsx("div",{className:"text-xs",children:I.completed?"완료":"대기 중"})]},I.id):null}),S.length>3&&c.jsxs("div",{className:"px-4 py-1 text-xs text-purple-500 dark:text-purple-400",children:["+",S.length-3,"개 더"]})]})]}),T.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex items-center gap-2 px-4 py-1 text-sm font-medium text-red-600 dark:text-red-400",children:[c.jsx(w_,{className:"w-4 h-4"}),c.jsxs("span",{children:["놓친 할일 (",T.length,")"]})]}),c.jsxs("div",{className:"space-y-1 mt-1",children:[T.slice(0,3).map(I=>c.jsx("div",{className:"px-3 py-1 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 mx-2 rounded",children:c.jsx("div",{className:"truncate",children:I.title})},I.id)),T.length>3&&c.jsxs("div",{className:"px-4 py-1 text-xs text-red-500 dark:text-red-400",children:["+",T.length-3,"개 더"]})]})]}),F.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex items-center gap-2 px-4 py-1 text-sm font-medium text-orange-600 dark:text-orange-400",children:[c.jsx(dh,{className:"w-4 h-4"}),c.jsxs("span",{children:["어제 못한 일 (",F.length,")"]})]}),c.jsxs("div",{className:"space-y-1 mt-1",children:[F.slice(0,3).map(I=>c.jsxs("div",{className:"px-3 py-1 text-sm text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 mx-2 rounded",children:[c.jsx("div",{className:"truncate",children:I.title}),I.type==="project"&&c.jsxs("div",{className:"text-xs text-orange-500 dark:text-orange-300",children:[I.project==="longterm"?"롱텀":"숏텀"," 프로젝트"]})]},I.id)),F.length>3&&c.jsxs("div",{className:"px-4 py-1 text-xs text-orange-500 dark:text-orange-400",children:["+",F.length-3,"개 더"]})]})]}),O.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex items-center gap-2 px-4 py-1 text-sm font-medium text-blue-600 dark:text-blue-400",children:[c.jsx(Ao,{className:"w-4 h-4"}),c.jsxs("span",{children:["내일 할일 (",O.length,")"]})]}),c.jsxs("div",{className:"space-y-1 mt-1",children:[O.slice(0,3).map(I=>c.jsxs("div",{className:"px-3 py-1 text-sm text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 mx-2 rounded",children:[c.jsx("div",{className:"truncate",children:I.title}),I.type==="project"&&c.jsxs("div",{className:"text-xs text-blue-500 dark:text-blue-300",children:[I.project==="longterm"?"롱텀":"숏텀"," 프로젝트"]})]},I.id)),O.length>3&&c.jsxs("div",{className:"px-4 py-1 text-xs text-blue-500 dark:text-blue-400",children:["+",O.length-3,"개 더"]})]})]})]}),c.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-3",children:[h&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"화면 모드"}),c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[c.jsx("button",{onClick:()=>h?.(!1),className:`px-2 py-2 text-xs rounded-lg transition-colors ${l===!1?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"💻 PC"}),c.jsx("button",{onClick:()=>h?.(null),className:`px-2 py-2 text-xs rounded-lg transition-colors ${l===null?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"🔄 자동"}),c.jsx("button",{onClick:()=>h?.(!0),className:`px-2 py-2 text-xs rounded-lg transition-colors ${l===!0?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"📱 폰"})]}),c.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:[typeof window<"u"?window.innerWidth:0,"px"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"테마"}),c.jsx(wC,{})]})]})]}):null},zp=(r,e={})=>{const{minSwipeDistance:t=50,preventDefaultTouchmoveEvent:a=!1}=e,i=le.useRef(null),l=le.useRef(null),h=le.useRef(null),g=le.useRef(null);return{onTouchStart:w=>{i.current=w.touches[0].clientX,l.current=w.touches[0].clientY},onTouchMove:w=>{a&&w.preventDefault()},onTouchEnd:w=>{if(!i.current||!l.current)return;h.current=w.changedTouches[0].clientX,g.current=w.changedTouches[0].clientY;const T=i.current-h.current,O=l.current-g.current;Math.abs(T)>Math.abs(O)&&Math.abs(T)>t&&(T>0?r.onSwipeLeft?.():r.onSwipeRight?.()),i.current=null,l.current=null,h.current=null,g.current=null}}};function kC(r){return r._isRecurringInstance===!0}const SC=({todoId:r,subTasks:e})=>{const{addSubTask:t,updateSubTask:a,deleteSubTask:i,toggleSubTask:l}=tn(),[h,g]=le.useState(""),[p,y]=le.useState(!1),[b,w]=le.useState(null),T=L=>{L.preventDefault(),h.trim()&&(t(r,h.trim()),g(""),y(!1))},O=L=>{w({id:L.id,title:L.title})},F=()=>{!b||!b.title.trim()||(a(r,b.id,{title:b.title.trim()}),w(null))},$=()=>{w(null)},P=L=>{confirm("이 하위 작업을 삭제하시겠습니까?")&&i(r,L)},S=(L,I)=>{L.key==="Enter"?(L.preventDefault(),I==="add"?T(L):F()):L.key==="Escape"&&(I==="add"?(y(!1),g("")):$())};return c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["하위 작업 (",e.length,")"]}),!p&&c.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-1 px-2 py-1 text-xs text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",children:[c.jsx(Tn,{className:"w-3 h-3"}),"추가"]})]}),c.jsxs("div",{className:"space-y-2",children:[e.map(L=>c.jsx("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg group",children:b?.id===L.id?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",checked:L.completed,onChange:()=>l(r,L.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),c.jsx("input",{type:"text",value:b.title,onChange:I=>w({...b,title:I.target.value}),onKeyDown:I=>S(I,"edit"),className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white",placeholder:"하위 작업 제목",autoFocus:!0}),c.jsx("button",{onClick:F,className:"p-1 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/20 rounded",title:"저장",children:c.jsx(hb,{className:"w-3 h-3"})}),c.jsx("button",{onClick:$,className:"p-1 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-600 rounded",title:"취소",children:c.jsx(Tt,{className:"w-3 h-3"})})]}):c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"checkbox",checked:L.completed,onChange:()=>l(r,L.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),c.jsx("span",{className:`flex-1 text-sm ${L.completed?"line-through text-gray-500":"text-gray-700 dark:text-gray-300"}`,children:L.title}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>O(L),className:"p-1 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded",title:"수정",children:c.jsx(x_,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>P(L.id),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",title:"삭제",children:c.jsx(Tt,{className:"w-3 h-3"})})]})]})},L.id)),p&&c.jsxs("form",{onSubmit:T,className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[c.jsx("input",{type:"text",value:h,onChange:L=>g(L.target.value),onKeyDown:L=>S(L,"add"),className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white",placeholder:"하위 작업 제목을 입력하세요",autoFocus:!0}),c.jsx("button",{type:"submit",className:"p-1 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/20 rounded",title:"추가",children:c.jsx(hb,{className:"w-3 h-3"})}),c.jsx("button",{type:"button",onClick:()=>{y(!1),g("")},className:"p-1 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-600 rounded",title:"취소",children:c.jsx(Tt,{className:"w-3 h-3"})})]}),e.length===0&&!p&&c.jsx("div",{className:"text-center py-4 text-sm text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/30 rounded-lg border-2 border-dashed border-gray-200 dark:border-gray-600",children:"하위 작업을 추가해보세요"})]})]})},n1=6048e5,NC=864e5,s_=Symbol.for("constructDateFrom");function dn(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&s_ in r?r[s_](e):r instanceof Date?new r.constructor(e):new Date(e)}function zt(r,e){return dn(e||r,r)}function Kn(r,e,t){const a=zt(r,t?.in);return isNaN(e)?dn(r,NaN):(e&&a.setDate(a.getDate()+e),a)}function r1(r,e,t){const a=zt(r,t?.in);if(isNaN(e))return dn(r,NaN);if(!e)return a;const i=a.getDate(),l=dn(r,a.getTime());l.setMonth(a.getMonth()+e+1,0);const h=l.getDate();return i>=h?l:(a.setFullYear(l.getFullYear(),l.getMonth(),i),a)}let AC={};function $o(){return AC}function zr(r,e){const t=$o(),a=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=zt(r,e?.in),l=i.getDay(),h=(l<a?7:0)+l-a;return i.setDate(i.getDate()-h),i.setHours(0,0,0,0),i}function oh(r,e){return zr(r,{...e,weekStartsOn:1})}function s1(r,e){const t=zt(r,e?.in),a=t.getFullYear(),i=dn(t,0);i.setFullYear(a+1,0,4),i.setHours(0,0,0,0);const l=oh(i),h=dn(t,0);h.setFullYear(a,0,4),h.setHours(0,0,0,0);const g=oh(h);return t.getTime()>=l.getTime()?a+1:t.getTime()>=g.getTime()?a:a-1}function a_(r){const e=zt(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function Qc(r,...e){const t=dn.bind(null,r||e.find(a=>typeof a=="object"));return e.map(t)}function lh(r,e){const t=zt(r,e?.in);return t.setHours(0,0,0,0),t}function DC(r,e,t){const[a,i]=Qc(t?.in,r,e),l=lh(a),h=lh(i),g=+l-a_(l),p=+h-a_(h);return Math.round((g-p)/NC)}function RC(r,e){const t=s1(r,e),a=dn(r,0);return a.setFullYear(t,0,4),a.setHours(0,0,0,0),oh(a)}function Hp(r,e,t){return Kn(r,e*7,t)}function Bp(r){return dn(r,Date.now())}function ch(r,e,t){const[a,i]=Qc(t?.in,r,e);return+lh(a)==+lh(i)}function jC(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function IC(r){return!(!jC(r)&&typeof r!="number"||isNaN(+zt(r)))}function CC(r,e){const t=zt(r,e?.in),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}function OC(r,e){const[t,a]=Qc(r,e.start,e.end);return{start:t,end:a}}function a1(r,e){const{start:t,end:a}=OC(e?.in,r);let i=+t>+a;const l=i?+t:+a,h=i?a:t;h.setHours(0,0,0,0);let g=1;const p=[];for(;+h<=l;)p.push(dn(t,h)),h.setDate(h.getDate()+g),h.setHours(0,0,0,0);return i?p.reverse():p}function qp(r,e){const t=zt(r,e?.in);return t.setDate(1),t.setHours(0,0,0,0),t}function MC(r,e){const t=zt(r,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function i1(r,e){const t=$o(),a=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=zt(r,e?.in),l=i.getDay(),h=(l<a?-7:0)+6-(l-a);return i.setDate(i.getDate()+h),i.setHours(23,59,59,999),i}const PC={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},VC=(r,e,t)=>{let a;const i=PC[r];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+a:a+" ago":a};function No(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const LC={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},UC={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zC={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},HC={date:No({formats:LC,defaultWidth:"full"}),time:No({formats:UC,defaultWidth:"full"}),dateTime:No({formats:zC,defaultWidth:"full"})},BC={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qC=(r,e,t,a)=>BC[r];function Ar(r){return(e,t)=>{const a=t?.context?String(t.context):"standalone";let i;if(a==="formatting"&&r.formattingValues){const h=r.defaultFormattingWidth||r.defaultWidth,g=t?.width?String(t.width):h;i=r.formattingValues[g]||r.formattingValues[h]}else{const h=r.defaultWidth,g=t?.width?String(t.width):r.defaultWidth;i=r.values[g]||r.values[h]}const l=r.argumentCallback?r.argumentCallback(e):e;return i[l]}}const FC={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$C={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},GC={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},YC={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},WC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},QC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},KC=(r,e)=>{const t=Number(r),a=t%100;if(a>20||a<10)switch(a%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},XC={ordinalNumber:KC,era:Ar({values:FC,defaultWidth:"wide"}),quarter:Ar({values:$C,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Ar({values:GC,defaultWidth:"wide"}),day:Ar({values:YC,defaultWidth:"wide"}),dayPeriod:Ar({values:WC,defaultWidth:"wide",formattingValues:QC,defaultFormattingWidth:"wide"})};function Dr(r){return(e,t={})=>{const a=t.width,i=a&&r.matchPatterns[a]||r.matchPatterns[r.defaultMatchWidth],l=e.match(i);if(!l)return null;const h=l[0],g=a&&r.parsePatterns[a]||r.parsePatterns[r.defaultParseWidth],p=Array.isArray(g)?ZC(g,w=>w.test(h)):JC(g,w=>w.test(h));let y;y=r.valueCallback?r.valueCallback(p):p,y=t.valueCallback?t.valueCallback(y):y;const b=e.slice(h.length);return{value:y,rest:b}}}function JC(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function ZC(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function o1(r){return(e,t={})=>{const a=e.match(r.matchPattern);if(!a)return null;const i=a[0],l=e.match(r.parsePattern);if(!l)return null;let h=r.valueCallback?r.valueCallback(l[0]):l[0];h=t.valueCallback?t.valueCallback(h):h;const g=e.slice(i.length);return{value:h,rest:g}}}const e4=/^(\d+)(th|st|nd|rd)?/i,t4=/\d+/i,n4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},r4={any:[/^b/i,/^(a|c)/i]},s4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},a4={any:[/1/i,/2/i,/3/i,/4/i]},i4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},o4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},l4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},c4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},u4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},d4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},h4={ordinalNumber:o1({matchPattern:e4,parsePattern:t4,valueCallback:r=>parseInt(r,10)}),era:Dr({matchPatterns:n4,defaultMatchWidth:"wide",parsePatterns:r4,defaultParseWidth:"any"}),quarter:Dr({matchPatterns:s4,defaultMatchWidth:"wide",parsePatterns:a4,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Dr({matchPatterns:i4,defaultMatchWidth:"wide",parsePatterns:o4,defaultParseWidth:"any"}),day:Dr({matchPatterns:l4,defaultMatchWidth:"wide",parsePatterns:c4,defaultParseWidth:"any"}),dayPeriod:Dr({matchPatterns:u4,defaultMatchWidth:"any",parsePatterns:d4,defaultParseWidth:"any"})},f4={code:"en-US",formatDistance:VC,formatLong:HC,formatRelative:qC,localize:XC,match:h4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function g4(r,e){const t=zt(r,e?.in);return DC(t,MC(t))+1}function m4(r,e){const t=zt(r,e?.in),a=+oh(t)-+RC(t);return Math.round(a/n1)+1}function l1(r,e){const t=zt(r,e?.in),a=t.getFullYear(),i=$o(),l=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,h=dn(e?.in||r,0);h.setFullYear(a+1,0,l),h.setHours(0,0,0,0);const g=zr(h,e),p=dn(e?.in||r,0);p.setFullYear(a,0,l),p.setHours(0,0,0,0);const y=zr(p,e);return+t>=+g?a+1:+t>=+y?a:a-1}function p4(r,e){const t=$o(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=l1(r,e),l=dn(e?.in||r,0);return l.setFullYear(i,0,a),l.setHours(0,0,0,0),zr(l,e)}function y4(r,e){const t=zt(r,e?.in),a=+zr(t,e)-+p4(t,e);return Math.round(a/n1)+1}function et(r,e){const t=r<0?"-":"",a=Math.abs(r).toString().padStart(e,"0");return t+a}const ra={y(r,e){const t=r.getFullYear(),a=t>0?t:1-t;return et(e==="yy"?a%100:a,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):et(t+1,2)},d(r,e){return et(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return et(r.getHours()%12||12,e.length)},H(r,e){return et(r.getHours(),e.length)},m(r,e){return et(r.getMinutes(),e.length)},s(r,e){return et(r.getSeconds(),e.length)},S(r,e){const t=e.length,a=r.getMilliseconds(),i=Math.trunc(a*Math.pow(10,t-3));return et(i,e.length)}},yo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},i_={G:function(r,e,t){const a=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(a,{width:"abbreviated"});case"GGGGG":return t.era(a,{width:"narrow"});case"GGGG":default:return t.era(a,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const a=r.getFullYear(),i=a>0?a:1-a;return t.ordinalNumber(i,{unit:"year"})}return ra.y(r,e)},Y:function(r,e,t,a){const i=l1(r,a),l=i>0?i:1-i;if(e==="YY"){const h=l%100;return et(h,2)}return e==="Yo"?t.ordinalNumber(l,{unit:"year"}):et(l,e.length)},R:function(r,e){const t=s1(r);return et(t,e.length)},u:function(r,e){const t=r.getFullYear();return et(t,e.length)},Q:function(r,e,t){const a=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return et(a,2);case"Qo":return t.ordinalNumber(a,{unit:"quarter"});case"QQQ":return t.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(a,{width:"wide",context:"formatting"})}},q:function(r,e,t){const a=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return et(a,2);case"qo":return t.ordinalNumber(a,{unit:"quarter"});case"qqq":return t.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(a,{width:"wide",context:"standalone"})}},M:function(r,e,t){const a=r.getMonth();switch(e){case"M":case"MM":return ra.M(r,e);case"Mo":return t.ordinalNumber(a+1,{unit:"month"});case"MMM":return t.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(a,{width:"wide",context:"formatting"})}},L:function(r,e,t){const a=r.getMonth();switch(e){case"L":return String(a+1);case"LL":return et(a+1,2);case"Lo":return t.ordinalNumber(a+1,{unit:"month"});case"LLL":return t.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(a,{width:"wide",context:"standalone"})}},w:function(r,e,t,a){const i=y4(r,a);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):et(i,e.length)},I:function(r,e,t){const a=m4(r);return e==="Io"?t.ordinalNumber(a,{unit:"week"}):et(a,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):ra.d(r,e)},D:function(r,e,t){const a=g4(r);return e==="Do"?t.ordinalNumber(a,{unit:"dayOfYear"}):et(a,e.length)},E:function(r,e,t){const a=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(a,{width:"short",context:"formatting"});case"EEEE":default:return t.day(a,{width:"wide",context:"formatting"})}},e:function(r,e,t,a){const i=r.getDay(),l=(i-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return et(l,2);case"eo":return t.ordinalNumber(l,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(r,e,t,a){const i=r.getDay(),l=(i-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return et(l,e.length);case"co":return t.ordinalNumber(l,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(r,e,t){const a=r.getDay(),i=a===0?7:a;switch(e){case"i":return String(i);case"ii":return et(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(a,{width:"short",context:"formatting"});case"iiii":default:return t.day(a,{width:"wide",context:"formatting"})}},a:function(r,e,t){const i=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,e,t){const a=r.getHours();let i;switch(a===12?i=yo.noon:a===0?i=yo.midnight:i=a/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,e,t){const a=r.getHours();let i;switch(a>=17?i=yo.evening:a>=12?i=yo.afternoon:a>=4?i=yo.morning:i=yo.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let a=r.getHours()%12;return a===0&&(a=12),t.ordinalNumber(a,{unit:"hour"})}return ra.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):ra.H(r,e)},K:function(r,e,t){const a=r.getHours()%12;return e==="Ko"?t.ordinalNumber(a,{unit:"hour"}):et(a,e.length)},k:function(r,e,t){let a=r.getHours();return a===0&&(a=24),e==="ko"?t.ordinalNumber(a,{unit:"hour"}):et(a,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):ra.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):ra.s(r,e)},S:function(r,e){return ra.S(r,e)},X:function(r,e,t){const a=r.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return l_(a);case"XXXX":case"XX":return li(a);case"XXXXX":case"XXX":default:return li(a,":")}},x:function(r,e,t){const a=r.getTimezoneOffset();switch(e){case"x":return l_(a);case"xxxx":case"xx":return li(a);case"xxxxx":case"xxx":default:return li(a,":")}},O:function(r,e,t){const a=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+o_(a,":");case"OOOO":default:return"GMT"+li(a,":")}},z:function(r,e,t){const a=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+o_(a,":");case"zzzz":default:return"GMT"+li(a,":")}},t:function(r,e,t){const a=Math.trunc(+r/1e3);return et(a,e.length)},T:function(r,e,t){return et(+r,e.length)}};function o_(r,e=""){const t=r>0?"-":"+",a=Math.abs(r),i=Math.trunc(a/60),l=a%60;return l===0?t+String(i):t+String(i)+e+et(l,2)}function l_(r,e){return r%60===0?(r>0?"-":"+")+et(Math.abs(r)/60,2):li(r,e)}function li(r,e=""){const t=r>0?"-":"+",a=Math.abs(r),i=et(Math.trunc(a/60),2),l=et(a%60,2);return t+i+e+l}const c_=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},c1=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},x4=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],a=t[1],i=t[2];if(!i)return c_(r,e);let l;switch(a){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",c_(a,e)).replace("{{time}}",c1(i,e))},b4={p:c1,P:x4},v4=/^D+$/,_4=/^Y+$/,w4=["D","DD","YY","YYYY"];function T4(r){return v4.test(r)}function E4(r){return _4.test(r)}function k4(r,e,t){const a=S4(r,e,t);if(console.warn(a),w4.includes(r))throw new RangeError(a)}function S4(r,e,t){const a=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${a} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const N4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,A4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,D4=/^'([^]*?)'?$/,R4=/''/g,j4=/[a-zA-Z]/;function wt(r,e,t){const a=$o(),i=t?.locale??a.locale??f4,l=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,h=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,g=zt(r,t?.in);if(!IC(g))throw new RangeError("Invalid time value");let p=e.match(A4).map(b=>{const w=b[0];if(w==="p"||w==="P"){const T=b4[w];return T(b,i.formatLong)}return b}).join("").match(N4).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const w=b[0];if(w==="'")return{isToken:!1,value:I4(b)};if(i_[w])return{isToken:!0,value:b};if(w.match(j4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(p=i.localize.preprocessor(g,p));const y={firstWeekContainsDate:l,weekStartsOn:h,locale:i};return p.map(b=>{if(!b.isToken)return b.value;const w=b.value;(!t?.useAdditionalWeekYearTokens&&E4(w)||!t?.useAdditionalDayOfYearTokens&&T4(w))&&k4(w,e,String(r));const T=i_[w[0]];return T(g,w,i.localize,y)}).join("")}function I4(r){const e=r.match(D4);return e?e[1].replace(R4,"'"):r}function C4(r,e){return zt(r,e?.in).getDate()}function O4(r,e){return zt(r,e?.in).getDay()}function M4(r,e){const t=$o(),a=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=C4(zt(r,e?.in));if(isNaN(i))return NaN;const l=O4(qp(r,e));let h=a-l;h<=0&&(h+=7);const g=i-h;return Math.ceil(g/7)+1}function P4(r,e,t){const[a,i]=Qc(t?.in,r,e);return+zr(a,t)==+zr(i,t)}function u1(r,e,t){const[a,i]=Qc(t?.in,r,e);return a.getFullYear()===i.getFullYear()&&a.getMonth()===i.getMonth()}function V4(r,e){return u1(dn(r,r),Bp(r))}function L4(r,e){return P4(dn(e?.in||r,r),Bp(e?.in||r),e)}function Vo(r,e){return ch(dn(r,r),Bp(r))}function U4(r,e,t){return Kn(r,-1,t)}function z4(r,e,t){return r1(r,-1,t)}function H4(r,e,t){return Hp(r,-1,t)}const Ph="pomodoroSessions",jc="pomodoroStatsCache";function om(r){const e=Ti(),t={...r,id:`pomodoro_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};return e.push(t),localStorage.setItem(Ph,JSON.stringify(e)),localStorage.removeItem(jc),t}function Ti(){try{const r=localStorage.getItem(Ph);return r?JSON.parse(r).map(t=>({...t,startTime:new Date(t.startTime),endTime:new Date(t.endTime)})):[]}catch(r){return console.error("포모도로 세션 로드 실패:",r),[]}}function d1(r){const e=Ti(),t=wt(r,"yyyy-MM-dd");return e.filter(a=>a.date===t)}function B4(){const r=new Date,t=d1(r).filter(i=>i.phase==="work"),a=t.filter(i=>i.completed);return{date:wt(r,"yyyy-MM-dd"),sessions:t.length,completedSessions:a.length,focusTime:a.reduce((i,l)=>i+l.duration,0),completionRate:t.length>0?a.length/t.length*100:0}}function q4(){const e=zr(new Date,{weekStartsOn:0}),i=Ti().filter(g=>L4(g.startTime,{weekStartsOn:0})).filter(g=>g.phase==="work"),l=i.filter(g=>g.completed),h=[];for(let g=0;g<7;g++){const p=new Date(e);p.setDate(p.getDate()+g);const b=d1(p).filter(T=>T.phase==="work"),w=b.filter(T=>T.completed);h.push({date:wt(p,"yyyy-MM-dd"),sessions:b.length,completedSessions:w.length,focusTime:w.reduce((T,O)=>T+O.duration,0),completionRate:b.length>0?w.length/b.length*100:0})}return{weekStart:wt(e,"yyyy-MM-dd"),totalSessions:i.length,completedSessions:l.length,totalFocusTime:l.reduce((g,p)=>g+p.duration,0),completionRate:i.length>0?l.length/i.length*100:0,dailyBreakdown:h}}function F4(){const e=qp(new Date),t=Ti(),i=t.filter(g=>V4(g.startTime)).filter(g=>g.phase==="work"),l=i.filter(g=>g.completed),h=[];for(let g=0;g<4;g++){const p=new Date(e);p.setDate(p.getDate()+g*7);const y=new Date(p);y.setDate(y.getDate()+6);const w=t.filter(O=>{const F=new Date(O.startTime);return F>=p&&F<=y}).filter(O=>O.phase==="work"),T=w.filter(O=>O.completed);h.push({weekStart:wt(p,"yyyy-MM-dd"),totalSessions:w.length,completedSessions:T.length,totalFocusTime:T.reduce((O,F)=>O+F.duration,0),completionRate:w.length>0?T.length/w.length*100:0,dailyBreakdown:[]})}return{monthStart:wt(e,"yyyy-MM-dd"),totalSessions:i.length,completedSessions:l.length,totalFocusTime:l.reduce((g,p)=>g+p.duration,0),completionRate:i.length>0?l.length/i.length*100:0,weeklyBreakdown:h}}function $4(){const t=Ti().filter(g=>g.phase==="work").reduce((g,p)=>{const y=p.date;return g[y]||(g[y]=[]),g[y].push(p),g},{}),a=Object.keys(t).sort().reverse().map(g=>{const y=t[g].filter(b=>b.completed);return{date:g,hasCompletedSession:y.length>0}});let i=0;for(const g of a)if(g.hasCompletedSession)i++;else break;let l=0,h=0;for(const g of a.reverse())g.hasCompletedSession?(h++,l=Math.max(l,h)):h=0;return{current:i,longest:l}}function h1(){try{const O=localStorage.getItem(jc);if(O){const{data:F,timestamp:$}=JSON.parse(O);if(Date.now()-$<600*1e3)return F}}catch{}const r=Ti(),e=r.filter(O=>O.phase==="work"),t=e.filter(O=>O.completed),a=t.reduce((O,F)=>O+F.duration,0),i=e.length>0?t.length/e.length*100:0,l=$4(),h=B4(),g=q4(),p=F4(),y=new Date;y.setDate(y.getDate()-30);const w=e.filter(O=>O.startTime>=y).length/30,T={totalSessions:e.length,completedSessions:t.length,totalFocusTime:a,completionRate:i,currentStreak:l.current,longestStreak:l.longest,averageSessionsPerDay:w,todayStats:h,weekStats:g,monthStats:p,recentSessions:r.slice(-20)};try{localStorage.setItem(jc,JSON.stringify({data:T,timestamp:Date.now()}))}catch(O){console.warn("통계 캐시 저장 실패:",O)}return T}function sc(r){const e=Math.floor(r/3600),t=Math.floor(r%3600/60);return e>0?`${e}시간 ${t}분`:`${t}분`}function G4(){const r=Ti(),e=h1();return JSON.stringify({exportDate:new Date().toISOString(),sessions:r,stats:e},null,2)}function Y4(r){try{const e=JSON.parse(r);return e.sessions&&Array.isArray(e.sessions)?(localStorage.setItem(Ph,JSON.stringify(e.sessions)),localStorage.removeItem(jc),!0):!1}catch(e){return console.error("포모도로 데이터 가져오기 실패:",e),!1}}function W4(){localStorage.removeItem(Ph),localStorage.removeItem(jc)}const Q4=({isOpen:r,onClose:e})=>{const[t,a]=le.useState(null),[i,l]=le.useState("overview"),[h,g]=le.useState(!0);le.useEffect(()=>{r&&p()},[r]);const p=async()=>{g(!0);try{const T=h1();a(T)}catch{}finally{g(!1)}},y=()=>{try{const T=G4(),O=new Blob([T],{type:"application/json"}),F=URL.createObjectURL(O),$=document.createElement("a");$.href=F,$.download=`pomodoro-stats-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(F)}catch{alert("데이터 내보내기에 실패했습니다.")}},b=T=>{const O=T.target.files?.[0];if(!O)return;const F=new FileReader;F.onload=$=>{try{const P=$.target?.result;Y4(P)?(alert("데이터를 성공적으로 가져왔습니다."),p()):alert("잘못된 데이터 형식입니다.")}catch{alert("데이터 가져오기에 실패했습니다.")}},F.readAsText(O),T.target.value=""},w=()=>{confirm("모든 포모도로 데이터를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.")&&(W4(),alert("데이터가 삭제되었습니다."),p())};return r?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(lm,{className:"w-5 h-5"}),"포모도로 통계"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"데이터 내보내기",children:c.jsx(g_,{className:"w-4 h-4"})}),c.jsxs("label",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",title:"데이터 가져오기",children:[c.jsx(T_,{className:"w-4 h-4"}),c.jsx("input",{type:"file",accept:".json",onChange:b,className:"hidden"})]}),c.jsx("button",{onClick:w,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-red-500",title:"데이터 초기화",children:c.jsx(fi,{className:"w-4 h-4"})}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:"✕"})]})]}),c.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:c.jsx("nav",{className:"flex space-x-8 px-4",children:[{id:"overview",label:"개요",icon:dm},{id:"daily",label:"일별",icon:Rt},{id:"weekly",label:"주별",icon:mb},{id:"monthly",label:"월별",icon:lm}].map(T=>{const O=T.icon;return c.jsx("button",{onClick:()=>l(T.id),className:`py-3 px-1 border-b-2 font-medium text-sm ${i===T.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(O,{className:"w-4 h-4"}),T.label]})},T.id)})})}),c.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:h?c.jsx("div",{className:"flex items-center justify-center h-32",children:c.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"통계를 로드하는 중..."})}):t?c.jsxs(c.Fragment,{children:[i==="overview"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-4 rounded-lg text-white",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-blue-100",children:"총 세션"}),c.jsx("p",{className:"text-2xl font-bold",children:t.totalSessions})]}),c.jsx(dm,{className:"w-8 h-8 text-blue-200"})]})}),c.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-4 rounded-lg text-white",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-green-100",children:"완료 세션"}),c.jsx("p",{className:"text-2xl font-bold",children:t.completedSessions})]}),c.jsx(ha,{className:"w-8 h-8 text-green-200"})]})}),c.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 p-4 rounded-lg text-white",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-purple-100",children:"총 집중 시간"}),c.jsx("p",{className:"text-2xl font-bold",children:sc(t.totalFocusTime)})]}),c.jsx(mb,{className:"w-8 h-8 text-purple-200"})]})}),c.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 p-4 rounded-lg text-white",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-orange-100",children:"현재 연속"}),c.jsxs("p",{className:"text-2xl font-bold",children:[t.currentStreak,"일"]})]}),c.jsx(Ak,{className:"w-8 h-8 text-orange-200"})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"성과 지표"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"완료율"}),c.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.completionRate.toFixed(1),"%"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"최장 연속"}),c.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.longestStreak,"일"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"일평균 세션"}),c.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.averageSessionsPerDay.toFixed(1),"개"]})]})]})]}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"오늘 현황"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"완료 세션"}),c.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.todayStats.completedSessions,"개"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"집중 시간"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:sc(t.todayStats.focusTime)})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"완료율"}),c.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.todayStats.completionRate.toFixed(1),"%"]})]})]})]})]})]}),i==="daily"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"오늘 상세 통계"}),c.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.todayStats.sessions}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"시작한 세션"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.todayStats.completedSessions}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"완료한 세션"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:sc(t.todayStats.focusTime)}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"집중 시간"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[t.todayStats.completionRate.toFixed(1),"%"]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"완료율"})]})]})})]}),i==="weekly"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"이번 주 통계"}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.weekStats.totalSessions}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"총 세션"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.weekStats.completedSessions}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"완료 세션"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:sc(t.weekStats.totalFocusTime)}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"집중 시간"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[t.weekStats.completionRate.toFixed(1),"%"]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"완료율"})]})]}),c.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"일별 분석"}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:["일","월","화","수","목","금","토"].map((T,O)=>c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:T}),c.jsxs("div",{className:`h-16 rounded flex flex-col items-center justify-center text-xs ${t.weekStats.dailyBreakdown[O]?.completedSessions>0?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-gray-100 dark:bg-gray-600 text-gray-500 dark:text-gray-400"}`,children:[c.jsx("div",{className:"font-bold",children:t.weekStats.dailyBreakdown[O]?.completedSessions||0}),c.jsx("div",{children:"세션"})]})]},T))})]})]}),i==="monthly"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"이번 달 통계"}),c.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.monthStats.totalSessions}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"총 세션"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.monthStats.completedSessions}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"완료 세션"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:sc(t.monthStats.totalFocusTime)}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"집중 시간"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[t.monthStats.completionRate.toFixed(1),"%"]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"완료율"})]})]})})]})]}):c.jsx("div",{className:"flex items-center justify-center h-32",children:c.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"통계 데이터가 없습니다."})})})]})}):null},K4={workTime:25,shortBreak:5,longBreak:15,longBreakInterval:4,autoStartBreaks:!1,autoStartPomodoros:!1,soundEnabled:!0},X4=({isOpen:r,onClose:e,todoTitle:t,todoId:a})=>{const[i,l]=le.useState(K4),[h,g]=le.useState(!1),[p,y]=le.useState("work"),[b,w]=le.useState(i.workTime*60),[T,O]=le.useState(0),[F,$]=le.useState(!1),[P,S]=le.useState(!1),[L,I]=le.useState(null),V=le.useRef(null),Y=le.useRef(null);le.useEffect(()=>{const W=localStorage.getItem("pomodoroSettings");if(W){const J=JSON.parse(W);l(J),w(J.workTime*60)}return Y.current=new Audio,Y.current.src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmoxBSuBzvLZiTYIG2m68OScTwwOUarm7bhqIgU6k9n1vVMvAC6Ew/PfkjUIF2O39uahUxMKRqnh8Mh+Kggp",()=>{V.current&&clearInterval(V.current)}},[]),le.useEffect(()=>(h&&b>0?V.current=setInterval(()=>{w(W=>W<=1?(te(),0):W-1)},1e3):V.current&&(clearInterval(V.current),V.current=null),()=>{V.current&&clearInterval(V.current)}),[h,b]);const te=()=>{if(g(!1),L){const W=new Date,J=L,H=Math.floor((W.getTime()-J.getTime())/1e3);try{om({todoId:a||void 0,todoTitle:t||void 0,startTime:J,endTime:W,duration:H,phase:p,completed:!0,date:wt(J,"yyyy-MM-dd")})}catch(ue){console.error("포모도로 세션 저장 실패:",ue)}}if(i.soundEnabled&&Y.current&&Y.current.play().catch(()=>{}),"Notification"in window&&Notification.permission==="granted"){const W={work:"휴식 시간입니다! 잠시 쉬어가세요.",shortBreak:"짧은 휴식이 끝났습니다. 다시 집중해보세요!",longBreak:"긴 휴식이 끝났습니다. 새로운 마음으로 시작해보세요!"};new Notification("포모도로 타이머",{body:W[p],icon:"/favicon.ico"})}p==="work"?(O(J=>J+1),(T+1)%i.longBreakInterval===0?(y("longBreak"),w(i.longBreak*60)):(y("shortBreak"),w(i.shortBreak*60)),i.autoStartBreaks?(g(!0),I(new Date)):I(null)):(y("work"),w(i.workTime*60),i.autoStartPomodoros?(g(!0),I(new Date)):I(null))},A=()=>{if(!h)g(!0),I(new Date);else if(g(!1),L){const W=new Date,J=L,H=Math.floor((W.getTime()-J.getTime())/1e3);try{om({todoId:a||void 0,todoTitle:t||void 0,startTime:J,endTime:W,duration:H,phase:p,completed:!1,date:wt(J,"yyyy-MM-dd")})}catch(ue){console.error("포모도로 세션 저장 실패:",ue)}I(null)}},k=()=>{if(h&&L){const W=new Date,J=L,H=Math.floor((W.getTime()-J.getTime())/1e3);try{om({todoId:a||void 0,todoTitle:t||void 0,startTime:J,endTime:W,duration:H,phase:p,completed:!1,date:wt(J,"yyyy-MM-dd")})}catch(ue){console.error("포모도로 세션 저장 실패:",ue)}}g(!1),y("work"),w(i.workTime*60),O(0),I(null)},C=()=>{te()},z=W=>{const J=Math.floor(W/60),H=W%60;return`${J.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`},M=()=>{switch(p){case"work":return{name:"집중 시간",color:"text-red-600",bgColor:"bg-red-50",icon:dm};case"shortBreak":return{name:"짧은 휴식",color:"text-green-600",bgColor:"bg-green-50",icon:Fg};case"longBreak":return{name:"긴 휴식",color:"text-blue-600",bgColor:"bg-blue-50",icon:Fg}}},B=W=>{const J={...i,...W};l(J),localStorage.setItem("pomodoroSettings",JSON.stringify(J)),h||w(p==="work"?J.workTime*60:p==="shortBreak"?J.shortBreak*60:J.longBreak*60)};if(!r)return null;const j=M(),_e=j.icon,Ee=p==="work"?(i.workTime*60-b)/(i.workTime*60)*100:p==="shortBreak"?(i.shortBreak*60-b)/(i.shortBreak*60)*100:(i.longBreak*60-b)/(i.longBreak*60)*100;return c.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"포모도로 타이머"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>S(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"통계 보기",children:c.jsx(lm,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>$(!F),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"설정",children:c.jsx(v_,{className:"w-4 h-4"})}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:c.jsx(Tt,{className:"w-5 h-5"})})]})]}),c.jsxs("div",{className:"p-6",children:[t&&c.jsxs("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"현재 작업"}),c.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t})]}),F&&c.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg space-y-4",children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"설정"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"집중 시간 (분)"}),c.jsx("input",{type:"number",value:i.workTime,onChange:W=>B({workTime:parseInt(W.target.value)||25}),className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-600 dark:text-white",min:"1",max:"60"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"짧은 휴식 (분)"}),c.jsx("input",{type:"number",value:i.shortBreak,onChange:W=>B({shortBreak:parseInt(W.target.value)||5}),className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-600 dark:text-white",min:"1",max:"30"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"긴 휴식 (분)"}),c.jsx("input",{type:"number",value:i.longBreak,onChange:W=>B({longBreak:parseInt(W.target.value)||15}),className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-600 dark:text-white",min:"1",max:"60"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"긴 휴식 주기"}),c.jsx("input",{type:"number",value:i.longBreakInterval,onChange:W=>B({longBreakInterval:parseInt(W.target.value)||4}),className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-600 dark:text-white",min:"2",max:"10"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:i.autoStartBreaks,onChange:W=>B({autoStartBreaks:W.target.checked}),className:"mr-2"}),c.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"휴식 자동 시작"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:i.autoStartPomodoros,onChange:W=>B({autoStartPomodoros:W.target.checked}),className:"mr-2"}),c.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"집중 시간 자동 시작"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:i.soundEnabled,onChange:W=>B({soundEnabled:W.target.checked}),className:"mr-2"}),c.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[i.soundEnabled?c.jsx(h2,{className:"w-4 h-4"}):c.jsx(g2,{className:"w-4 h-4"}),"알림음"]})]})]})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${j.bgColor} ${j.color} mb-4`,children:[c.jsx(_e,{className:"w-4 h-4"}),j.name]}),c.jsxs("div",{className:"relative w-48 h-48 mx-auto mb-6",children:[c.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[c.jsx("circle",{cx:"50",cy:"50",r:"45",stroke:"currentColor",strokeWidth:"2",fill:"none",className:"text-gray-200 dark:text-gray-700"}),c.jsx("circle",{cx:"50",cy:"50",r:"45",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeDasharray:`${2*Math.PI*45}`,strokeDashoffset:`${2*Math.PI*45*(1-Ee/100)}`,className:`${j.color} transition-all duration-1000 ease-linear`,strokeLinecap:"round"})]}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-mono font-bold text-gray-900 dark:text-white",children:z(b)}),c.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[T,"개 완료"]})]})})]}),c.jsxs("div",{className:"flex items-center justify-center gap-4",children:[c.jsx("button",{onClick:k,className:"p-3 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-full transition-colors",title:"리셋",children:c.jsx(Kk,{className:"w-5 h-5"})}),c.jsx("button",{onClick:A,className:`p-4 rounded-full transition-colors ${h?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:h?c.jsx(cm,{className:"w-6 h-6"}):c.jsx(um,{className:"w-6 h-6"})}),c.jsx("button",{onClick:C,className:"p-3 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-full transition-colors",title:"건너뛰기",children:c.jsx(Fg,{className:"w-5 h-5"})})]})]})]})]}),c.jsx(Q4,{isOpen:P,onClose:()=>S(!1)})]})},Fp=({isOpen:r,onClose:e,todo:t,isMobile:a=!1})=>{const{updateTodo:i,updateRecurringTemplate:l}=tn(),[h,g]=le.useState({title:"",description:"",priority:"medium",type:"simple",startDate:"",startTime:"",dueDate:"",dueTime:"",recurrence:"none",recurrenceDay:1,recurrenceDate:1,project:"shortterm",tags:[],exceptions:[]}),[p,y]=le.useState({}),[b,w]=le.useState(!1);le.useEffect(()=>{if(t&&r){const V=t.id.startsWith("recurring_");w(V),g({title:t.title.replace("🔄 ",""),description:t.description||"",priority:t.priority,type:t.type,startDate:t.startDate?new Date(t.startDate).toISOString().split("T")[0]:"",startTime:t.startTime||"",dueDate:t.dueDate?new Date(t.dueDate).toISOString().split("T")[0]:"",dueTime:t.dueDate?new Date(t.dueDate).toTimeString().split(" ")[0].substring(0,5):t.dueTime||"",recurrence:t.recurrence||"none",recurrenceDay:t.recurrenceDay||1,recurrenceDate:t.recurrenceDate||1,project:t.project||"shortterm",tags:t.tags||[],exceptions:[]})}},[t,r]);const T=()=>{const V={};if(h.title.trim()||(V.title="할일 제목을 입력해주세요."),h.startDate&&h.dueDate)try{const Y=new Date(`${h.startDate}T${h.startTime||"00:00"}`),te=new Date(`${h.dueDate}T${h.dueTime||"23:59"}`);Y>=te&&(V.startDate="시작일은 마감일보다 이전이어야 합니다")}catch(Y){console.error("날짜 검증 오류:",Y),V.general="날짜 형식을 확인해주세요"}return y(V),Object.keys(V).length===0},O=async V=>{if(V.preventDefault(),!(!T()||!t))try{if(b){const Y=t._templateId;Y&&l(Y,{title:h.title,description:h.description,priority:h.priority,type:h.type,tags:h.tags,exceptions:h.exceptions})}else{const Y={title:h.title.trim(),description:h.description.trim()||"",priority:h.priority,type:h.type,tags:h.tags};if(h.startDate)try{Y.startDate=new Date(h.startDate),console.log("수정: 시작일 설정됨:",Y.startDate)}catch(te){throw console.error("수정: 시작일 파싱 오류:",te),new Error("시작일 형식이 올바르지 않습니다")}if(h.startTime&&(Y.startTime=h.startTime,console.log("수정: 시작 시간 설정됨:",Y.startTime)),h.dueDate)try{const te=h.dueDate,A=h.dueTime||"23:59",k=`${te}T${A}:00`;Y.dueDate=new Date(k),console.log(`수정: 마감일 설정: ${te} ${A} →`,Y.dueDate),h.dueTime&&console.log("수정: 마감시간이 dueDate에 포함됨:",h.dueTime)}catch(te){throw console.error("수정: 마감일 파싱 오류:",te),new Error(`마감일 형식이 올바르지 않습니다: ${h.dueDate} ${h.dueTime||""}`)}h.type==="project"&&(Y.project=h.project),await i(t.id,Y)}e()}catch(Y){console.error("할일 수정 실패:",Y),y({general:"할일 수정 중 오류가 발생했습니다."})}},F=(V,Y)=>{g(te=>({...te,[V]:Y})),p[V]&&y(te=>({...te,[V]:""}))},$=()=>{g(V=>({...V,exceptions:[...V.exceptions,{type:"date",values:[]}]}))},P=V=>{g(Y=>({...Y,exceptions:Y.exceptions.filter((te,A)=>A!==V)}))},S=(V,Y,te)=>{g(A=>({...A,exceptions:A.exceptions.map((k,C)=>C===V?{...k,[Y]:te}:k)}))},L=(V,Y)=>{g(te=>({...te,exceptions:te.exceptions.map((A,k)=>k===V?{...A,values:Y}:A)}))};if(!r||!t)return null;const I=[{value:1,label:"월요일"},{value:2,label:"화요일"},{value:3,label:"수요일"},{value:4,label:"목요일"},{value:5,label:"금요일"},{value:6,label:"토요일"},{value:0,label:"일요일"}];return c.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 z-50 ${a?"":"flex items-center justify-center p-4"}`,children:c.jsxs("div",{className:`bg-white dark:bg-gray-800 shadow-xl overflow-y-auto ${a?"w-full h-full fixed inset-0":"w-full max-w-2xl max-h-[90vh] rounded-lg"}`,children:[c.jsxs("div",{className:`flex items-center justify-between border-b border-gray-200 dark:border-gray-700 ${a?"px-4 py-3":"p-6"}`,children:[c.jsxs("h2",{className:`font-semibold text-gray-900 dark:text-white ${a?"text-lg":"text-xl"}`,children:["할일 수정 ",b?"(반복 할일)":""]}),c.jsx("button",{onClick:e,className:`hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg ${a?"p-3":"p-2"}`,children:c.jsx(Tt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:O,className:`${a?"px-4 py-4":"p-6"}`,children:[c.jsxs("div",{className:`${a?"space-y-4":"space-y-6"}`,children:[p.general&&c.jsx("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:p.general}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(m_,{className:"w-4 h-4 inline mr-1"}),"제목 *"]}),c.jsx("input",{type:"text",value:h.title,onChange:V=>F("title",V.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white ${p.title?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"할일을 입력하세요"}),p.title&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.title})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"설명"}),c.jsx("textarea",{value:h.description,onChange:V=>F("description",V.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"할일에 대한 자세한 설명을 입력하세요"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(p_,{className:"w-4 h-4 inline mr-1"}),"우선순위"]}),c.jsxs("select",{value:h.priority,onChange:V=>F("priority",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"low",children:"낮음"}),c.jsx("option",{value:"medium",children:"보통"}),c.jsx("option",{value:"high",children:"높음"}),c.jsx("option",{value:"urgent",children:"긴급"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(y_,{className:"w-4 h-4 inline mr-1"}),"유형"]}),c.jsxs("select",{value:h.type,onChange:V=>F("type",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"simple",children:"단일 태스크"}),c.jsx("option",{value:"project",children:"프로젝트"})]})]}),h.type==="project"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"프로젝트 구분"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"shortterm",checked:h.project==="shortterm",onChange:V=>F("project",V.target.value),className:"mr-2"}),"숏텀 프로젝트"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"longterm",checked:h.project==="longterm",onChange:V=>F("project",V.target.value),className:"mr-2"}),"롱텀 프로젝트"]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(Rt,{className:"w-4 h-4 inline mr-1"}),"시작 날짜"]}),c.jsx("input",{type:"date",value:h.startDate,onChange:V=>F("startDate",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(ha,{className:"w-4 h-4 inline mr-1"}),"시작 시간"]}),c.jsx("input",{type:"time",value:h.startTime,onChange:V=>F("startTime",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(Rt,{className:"w-4 h-4 inline mr-1"}),"마감 날짜"]}),c.jsx("input",{type:"date",value:h.dueDate,onChange:V=>F("dueDate",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(ha,{className:"w-4 h-4 inline mr-1"}),"마감 시간"]}),c.jsx("input",{type:"time",value:h.dueTime,onChange:V=>F("dueTime",V.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"태그"}),c.jsx("input",{type:"text",value:h.tags.join(", "),onChange:V=>F("tags",V.target.value.split(",").map(Y=>Y.trim()).filter(Y=>Y)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"태그를 쉼표로 구분하여 입력하세요 (예: 업무, 개인, 중요)"})]}),b&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[c.jsx(hh,{className:"w-4 h-4 inline mr-1"}),"예외 설정 (반복에서 제외할 조건)"]}),c.jsxs("button",{type:"button",onClick:$,className:"flex items-center gap-1 px-2 py-1 text-sm bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-900/30",children:[c.jsx(Tn,{className:"w-3 h-3"}),"예외 추가"]})]}),h.exceptions.map((V,Y)=>c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("select",{value:V.type,onChange:te=>S(Y,"type",te.target.value),className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"date",children:"특정 날짜"}),c.jsx("option",{value:"weekday",children:"특정 요일"}),c.jsx("option",{value:"week",children:"특정 주"}),c.jsx("option",{value:"month",children:"특정 달"})]}),c.jsx("button",{type:"button",onClick:()=>P(Y),className:"ml-2 p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",children:c.jsx(Tt,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-2",children:[V.type==="date"&&Array.from({length:31},(te,A)=>A+1).map(te=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:V.values.includes(te),onChange:A=>{const k=V.values,C=A.target.checked?[...k,te]:k.filter(z=>z!==te);L(Y,C)},className:"text-sm"}),c.jsxs("span",{className:"text-xs",children:[te,"일"]})]},te)),V.type==="weekday"&&I.map(te=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:V.values.includes(te.value),onChange:A=>{const k=V.values,C=A.target.checked?[...k,te.value]:k.filter(z=>z!==te.value);L(Y,C)},className:"text-sm"}),c.jsx("span",{className:"text-xs",children:te.label})]},te.value)),V.type==="week"&&[1,2,3,4,-1].map(te=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:V.values.includes(te),onChange:A=>{const k=V.values,C=A.target.checked?[...k,te]:k.filter(z=>z!==te);L(Y,C)},className:"text-sm"}),c.jsx("span",{className:"text-xs",children:Ic(te)})]},te)),V.type==="month"&&Array.from({length:12},(te,A)=>A+1).map(te=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:V.values.includes(te),onChange:A=>{const k=V.values,C=A.target.checked?[...k,te]:k.filter(z=>z!==te);L(Y,C)},className:"text-sm"}),c.jsxs("span",{className:"text-xs",children:[te,"월"]})]},te))]}),c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:V.values.length>0&&c.jsxs("span",{children:["선택된 ",V.type==="date"?"날짜":V.type==="weekday"?"요일":V.type==="week"?"주차":"월",": ",V.values.join(", ")]})})]},Y))]})]}),c.jsxs("div",{className:`flex justify-end space-x-3 ${a?"mt-6":"mt-8"}`,children:[c.jsx("button",{type:"button",onClick:e,className:`text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg ${a?"px-6 py-3":"px-4 py-2"}`,children:"취소"}),c.jsxs("button",{type:"submit",className:`flex items-center gap-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 ${a?"px-6 py-3":"px-4 py-2"}`,children:[c.jsx(b_,{className:"w-4 h-4"}),"저장"]})]})]})]})})},uh=({todo:r})=>{const{toggleTodo:e,isYesterdayIncompleteTodo:t,deleteTodo:a}=tn(),[i,l]=le.useState(!1),[h,g]=le.useState(!1),[p,y]=le.useState(!1),b=r.dueDate?w2(r.dueDate,r.dueTime):!1,w=t(r),T=r.type==="project"&&r.subTasks&&r.subTasks.length>0;T&&r.subTasks.filter(L=>L.completed).length,T&&r.subTasks.length;const O=kC(r),F=L=>{const I=L.getFullYear(),V=String(L.getMonth()+1).padStart(2,"0"),Y=String(L.getDate()).padStart(2,"0");return`${I}.${V}.${Y}.`},$=L=>{const I=F(L),V=L.toLocaleTimeString("ko-KR",{hour:"numeric",minute:"2-digit",hour12:!0});return`${I} ${V}`},P=()=>{e(r.id)},S=()=>{confirm(`"${r.title}" 할일을 삭제하시겠습니까?`)&&a(r.id)};return c.jsxs("div",{className:`card ${r.completed?"p-2 mb-1.5 bg-green-50 dark:bg-green-900/10 border-green-200 dark:border-green-800":"p-2 mb-1.5"} ${b&&!r.completed?"border-red-300 bg-red-50 dark:bg-red-900/20":""}`,children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:P,className:"flex-shrink-0 hover:scale-110 transition-transform",children:r.completed?c.jsx(f_,{className:"w-4 h-4 text-green-600"}):c.jsx(mk,{className:"w-4 h-4 text-gray-400 hover:text-blue-600"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center justify-between gap-1",children:[c.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[c.jsx("h3",{className:`text-xs font-medium truncate ${r.completed?"line-through text-green-700 dark:text-green-300":"text-gray-900 dark:text-white"}`,children:r.title}),c.jsx("span",{className:`px-1 py-0.5 text-[8px] rounded border ${T2(r.priority)} flex-shrink-0`,children:E2(r.priority)}),w&&c.jsx("span",{className:"px-1 py-0.5 text-[8px] bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200 rounded flex-shrink-0",children:"어제"}),r.type==="project"&&c.jsx("span",{className:"px-1 py-0.5 text-[8px] bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded flex-shrink-0",children:r.project==="longterm"?"롱텀":"숏텀"})]}),c.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[O&&c.jsx("div",{className:"p-0.5",title:"반복 할일",children:c.jsx(zd,{className:"w-3 h-3 text-blue-600 dark:text-blue-400"})}),c.jsx("button",{onClick:()=>y(!0),className:"p-0.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"할일 편집",children:c.jsx(__,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>g(!0),className:"p-0.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"포모도로 타이머 시작",disabled:r.completed,children:c.jsx(a2,{className:"w-3 h-3"})}),c.jsx("button",{onClick:S,className:"p-0.5 hover:bg-red-100 dark:hover:bg-red-800 rounded",title:"할일 삭제",children:c.jsx(fi,{className:"w-3 h-3 text-red-600"})})]})]}),r.description&&c.jsx("p",{className:`text-sm mb-2 ${r.completed?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-300"}`,children:r.description}),(r.dueDate||r.completed)&&c.jsxs("div",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:[r.dueDate&&c.jsxs("span",{className:b&&!r.completed?"text-red-600":"text-gray-600 dark:text-gray-400",children:["마감: ",F(r.dueDate),r.dueTime&&` ${v2(r.dueTime)}`,b&&!r.completed&&" ⚠️"]}),r.completed&&r.completedAt&&c.jsxs("span",{className:"text-green-600 dark:text-green-400 ml-2",children:["완료: ",$(r.completedAt)]})]}),T&&i&&c.jsx("div",{className:"mt-3 pl-4 border-l-2 border-gray-200 dark:border-gray-600",children:c.jsx(SC,{todoId:r.id,subTasks:r.subTasks})})]})]}),c.jsx(X4,{isOpen:h,onClose:()=>g(!1),todoTitle:r.title,todoId:r.id}),c.jsx(Fp,{isOpen:p,onClose:()=>y(!1),todo:r})]})},u_=({currentView:r,searchTerm:e="",priorityFilter:t="all",typeFilter:a="all",projectFilter:i="all",tagFilter:l=[],completionDateFilter:h="all",selectedDate:g})=>{const{todos:p,getTodayTodos:y,getWeekTodos:b,getMonthTodos:w,reorderTodos:T}=tn(),[O,F]=le.useState(null),S=(M=>{const B=new Set,j=M.filter(_e=>B.has(_e.id)?(console.warn(`⚠️ 중복 키 발견 및 제거: ${_e.id}`),!1):(B.add(_e.id),!0));if(j.length!==M.length){console.warn(`⚠️ 중복 할일 제거 완료: ${M.length} → ${j.length}`);const _e=M.map(Ee=>Ee.id).filter((Ee,W,J)=>J.indexOf(Ee)!==W);console.warn("중복된 ID들:",[...new Set(_e)])}return j.filter(_e=>{if(e){const Ee=e.toLowerCase(),W=_e.title.toLowerCase().includes(Ee),J=_e.description?.toLowerCase().includes(Ee)||!1;if(!W&&!J)return!1}return!(t!=="all"&&_e.priority!==t||a!=="all"&&_e.type!==a||i!=="all"&&_e.type==="project"&&_e.project!==i)})})((()=>{switch(r){case"today":return y(g);case"week":return b();case"month":return w();default:return p}})()),L=S.filter(M=>!M.completed),I=S.filter(M=>M.completed),V=(M,B)=>{F(B),M.dataTransfer.effectAllowed="move"},Y=M=>{M.preventDefault(),M.dataTransfer.dropEffect="move"},te=(M,B)=>{M.preventDefault(),O!==null&&(r==="today"&&T(O,B,C),F(null))},A=()=>{F(null)},C=(M=>{const B={urgent:0,high:1,medium:2,low:3};return M.sort((j,_e)=>{if(r==="today"){const W=j.order??999,J=_e.order??999;if(W!==J)return W-J}const Ee=B[j.priority]-B[_e.priority];return Ee!==0?Ee:j.dueDate&&_e.dueDate?new Date(j.dueDate).getTime()-new Date(_e.dueDate).getTime():j.dueDate?-1:_e.dueDate?1:new Date(j.createdAt).getTime()-new Date(_e.createdAt).getTime()})})(L),z=I.sort((M,B)=>new Date(B.updatedAt).getTime()-new Date(M.updatedAt).getTime());return S.length===0?c.jsxs("div",{className:"card p-8 text-center text-gray-500 dark:text-gray-400",children:[c.jsx("p",{className:"text-lg mb-2",children:"할일이 없습니다"}),c.jsx("p",{children:"새로운 할일을 추가해보세요!"})]}):c.jsxs("div",{className:"space-y-6",children:[C.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["진행 중인 할일 (",C.length,")"]}),c.jsx("div",{className:"space-y-2",children:C.map((M,B)=>c.jsx("div",{draggable:r==="today",onDragStart:j=>V(j,B),onDragOver:Y,onDrop:j=>te(j,B),onDragEnd:A,className:`
                  ${r==="today"?"cursor-move":""}
                  ${O===B?"opacity-50":""}
                  transition-opacity duration-200
                `,children:c.jsx(uh,{todo:M})},M.id))})]}),z.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-green-700 dark:text-green-300 mb-4 flex items-center gap-2",children:[c.jsx(f_,{className:"w-5 h-5"}),"완료된 할일 (",z.length,")"]}),c.jsx("div",{className:"space-y-2",children:z.map(M=>c.jsx(uh,{todo:M},M.id))})]})]})},J4=({isOpen:r,onClose:e,onSelectTemplate:t})=>{const[a,i]=le.useState([]),[l,h]=le.useState(!1),[g,p]=le.useState({name:"",description:"",category:"shortterm",subTasks:[],defaultPriority:"medium",tags:[]});le.useEffect(()=>{const P=localStorage.getItem("projectTemplates");if(P)try{const S=JSON.parse(P).map(L=>({...L,createdAt:new Date(L.createdAt),updatedAt:new Date(L.updatedAt)}));i(S)}catch(S){console.error("Failed to load templates:",S)}},[]);const y=P=>{i(P),localStorage.setItem("projectTemplates",JSON.stringify(P))},b=()=>{if(!g.name.trim())return;const P={...g,id:dc(),createdAt:new Date,updatedAt:new Date};y([...a,P]),p({name:"",description:"",category:"shortterm",subTasks:[],defaultPriority:"medium",tags:[]}),h(!1)},w=P=>{confirm("이 템플릿을 삭제하시겠습니까?")&&y(a.filter(S=>S.id!==P))},T=P=>{const S={...P,id:dc(),name:`${P.name} (복사본)`,createdAt:new Date,updatedAt:new Date};y([...a,S])},O=(P,S)=>{const L={title:"",completed:!1,priority:"medium"};S({...P,subTasks:[...P.subTasks,L]})},F=(P,S,L,I)=>{const V=P.subTasks.map((Y,te)=>te===S?{...Y,...L}:Y);I({...P,subTasks:V})},$=(P,S,L)=>{L({...P,subTasks:P.subTasks.filter((I,V)=>V!==S)})};return r?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"프로젝트 템플릿 관리"}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:c.jsx(Tt,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[c.jsx("div",{className:"mb-6",children:c.jsxs("button",{onClick:()=>h(!0),className:"btn-primary flex items-center gap-2",children:[c.jsx(Tn,{className:"w-4 h-4"}),"새 템플릿 만들기"]})}),l&&c.jsxs("div",{className:"mb-6 p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[c.jsx("h3",{className:"text-lg font-medium mb-4",children:"새 템플릿"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"템플릿 이름"}),c.jsx("input",{type:"text",value:g.name,onChange:P=>p({...g,name:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"예: 7월 진흥원 교육 프로젝트"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"카테고리"}),c.jsxs("select",{value:g.category,onChange:P=>p({...g,category:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"shortterm",children:"숏텀 프로젝트"}),c.jsx("option",{value:"longterm",children:"롱텀 프로젝트"})]})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"설명"}),c.jsx("textarea",{value:g.description,onChange:P=>p({...g,description:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",rows:3,placeholder:"프로젝트 설명"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"block text-sm font-medium",children:"하위 작업"}),c.jsxs("button",{onClick:()=>O(g,p),className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[c.jsx(Tn,{className:"w-3 h-3"}),"작업 추가"]})]}),c.jsx("div",{className:"space-y-2",children:g.subTasks.map((P,S)=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[c.jsx("input",{type:"text",value:P.title,onChange:L=>F(g,S,{title:L.target.value},p),className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded focus:ring-1 focus:ring-blue-500 dark:bg-gray-600 dark:text-white",placeholder:"작업명"}),c.jsxs("select",{value:P.priority,onChange:L=>F(g,S,{priority:L.target.value},p),className:"px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-600 dark:text-white",children:[c.jsx("option",{value:"low",children:"낮음"}),c.jsx("option",{value:"medium",children:"보통"}),c.jsx("option",{value:"high",children:"높음"}),c.jsx("option",{value:"urgent",children:"긴급"})]}),c.jsx("button",{onClick:()=>$(g,S,p),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",children:c.jsx(Tt,{className:"w-3 h-3"})})]},S))})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:"취소"}),c.jsxs("button",{onClick:b,className:"btn-primary flex items-center gap-2",children:[c.jsx(b_,{className:"w-4 h-4"}),"저장"]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(P=>c.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:P.name}),c.jsx("span",{className:`text-xs px-2 py-1 rounded ${P.category==="longterm"?"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-300":"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300"}`,children:P.category==="longterm"?"롱텀":"숏텀"})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>{},className:"p-1 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded",title:"수정",children:c.jsx(x_,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>T(P),className:"p-1 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/20 rounded",title:"복사",children:c.jsx(Tk,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>w(P.id),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",title:"삭제",children:c.jsx(fi,{className:"w-3 h-3"})})]})]}),P.description&&c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:P.description}),c.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:["하위 작업: ",P.subTasks.length,"개"]}),t&&c.jsx("button",{onClick:()=>{t(P),e()},className:"w-full btn-secondary text-sm",children:"이 템플릿 사용"})]},P.id))}),a.length===0&&!l&&c.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[c.jsx("p",{children:"저장된 템플릿이 없습니다."}),c.jsx("p",{className:"text-sm",children:"자주 사용하는 프로젝트를 템플릿으로 저장해보세요."})]})]})]})}):null};class d_{static timePatterns=[{pattern:/(\d{1,2}):(\d{2})/,type:"hhmm"},{pattern:/오전\s*(\d{1,2})시\s*(\d{1,2})분?/,type:"am_with_min"},{pattern:/오후\s*(\d{1,2})시\s*(\d{1,2})분?/,type:"pm_with_min"},{pattern:/오전\s*(\d{1,2})시?/,type:"am"},{pattern:/오후\s*(\d{1,2})시?/,type:"pm"},{pattern:/(\d{1,2})시\s*(\d{1,2})분/,type:"hour_min"},{pattern:/(\d{1,2})시/,type:"hour_only"},{pattern:/새벽\s*(\d{1,2})시?/,type:"dawn"},{pattern:/아침\s*(\d{1,2})시?/,type:"morning"},{pattern:/점심\s*(\d{1,2})시?/,type:"lunch"},{pattern:/오후\s*늦게/,type:"late_afternoon"},{pattern:/저녁\s*(\d{1,2})시?/,type:"evening"},{pattern:/밤\s*(\d{1,2})시?/,type:"night"},{pattern:/한\s*시간\s*후/,type:"in_hour"},{pattern:/(\d+)\s*시간\s*후/,type:"in_hours"},{pattern:/30분\s*후|반\s*시간\s*후/,type:"in_30min"},{pattern:/(\d+)분\s*후/,type:"in_minutes"}];static priorityPatterns=[{pattern:/긴급|급함|급해|urgent|asap|!!!/i,priority:"urgent"},{pattern:/중요|높음|high|중대|!!/i,priority:"high"},{pattern:/보통|medium|일반|normal|!/i,priority:"medium"},{pattern:/낮음|low|천천히|나중에/i,priority:"low"}];static recurrencePatterns=[{pattern:/매일|하루마다|daily|every\s*day/i,recurrence:"daily"},{pattern:/매주|주마다|weekly|every\s*week/i,recurrence:"weekly"},{pattern:/매달|매월|월마다|monthly|every\s*month/i,recurrence:"monthly"},{pattern:/매년|연마다|yearly|every\s*year/i,recurrence:"yearly"}];static weekdayPatterns=[{pattern:/월요일?|monday/i,day:1},{pattern:/화요일?|tuesday/i,day:2},{pattern:/수요일?|wednesday/i,day:3},{pattern:/목요일?|thursday/i,day:4},{pattern:/금요일?|friday/i,day:5},{pattern:/토요일?|saturday/i,day:6},{pattern:/일요일?|sunday/i,day:7}];static tagPatterns=[/#([^\s#]+)/g,/@([^\s@]+)/g,/\[([^\]]+)\]/g];static projectPatterns=[/프로젝트:\s*([^,\n]+)/i,/project:\s*([^,\n]+)/i,/관련:\s*([^,\n]+)/i];static parse(e){let t=e.trim();const a={title:""},i=this.extractTime(t);i.time&&i.isTimeSpecified&&(a.dueTime=i.time,t=i.cleanText);const l=this.extractDate(t);l.date&&(a.dueDate=l.date,t=l.cleanText,i.isTimeSpecified||(a.dueTime=void 0));const h=this.extractPriority(t);h.priority&&(a.priority=h.priority,t=h.cleanText);const g=this.extractRecurrence(t);if(g.recurrence&&(a.recurrence=g.recurrence,t=g.cleanText),a.recurrence==="weekly"){const b=this.extractWeekday(t);b.day&&(a.recurrenceDay=b.day,t=b.cleanText)}const p=this.extractTags(t);p.tags.length>0&&(a.tags=p.tags,t=p.cleanText);const y=this.extractProject(t);return y.project&&(a.project=y.project,t=y.cleanText),a.title=t.replace(/\s+/g," ").trim(),a}static extractTime(e){for(const t of this.timePatterns){const a=e.match(t.pattern);if(a){let i=0,l=0,h=!0;switch(t.type){case"hhmm":i=parseInt(a[1]),l=parseInt(a[2]);break;case"am_with_min":i=parseInt(a[1]),l=parseInt(a[2]),i===12&&(i=0);break;case"pm_with_min":i=parseInt(a[1]),l=parseInt(a[2]),i!==12&&(i+=12);break;case"am":i=parseInt(a[1]),l=0,i===12&&(i=0);break;case"pm":i=parseInt(a[1]),l=0,i!==12&&(i+=12);break;case"hour_min":i=parseInt(a[1]),l=parseInt(a[2]);break;case"hour_only":i=parseInt(a[1]),l=0;break;case"dawn":i=a[1]?parseInt(a[1]):5,l=0,i>6&&(i=5);break;case"morning":i=a[1]?parseInt(a[1]):8,l=0,(i>11||i<7)&&(i=8);break;case"lunch":i=a[1]?parseInt(a[1]):12,l=0,(i<12||i>14)&&(i=12);break;case"late_afternoon":i=17,l=0,h=!1;break;case"evening":i=a[1]?parseInt(a[1]):19,l=0,i<18&&(i+=12),i>21&&(i=19);break;case"night":i=a[1]?parseInt(a[1]):22,l=0,i<22&&(i+=12),i>23&&(i=22);break;case"in_hour":const p=new Date;p.setHours(p.getHours()+1),i=p.getHours(),l=p.getMinutes();break;case"in_hours":const y=parseInt(a[1]),b=new Date;b.setHours(b.getHours()+y),i=b.getHours(),l=b.getMinutes();break;case"in_30min":const w=new Date;w.setMinutes(w.getMinutes()+30),i=w.getHours(),l=w.getMinutes();break;case"in_minutes":const T=parseInt(a[1]),O=new Date;O.setMinutes(O.getMinutes()+T),i=O.getHours(),l=O.getMinutes();break}return(i<0||i>23)&&(i=9),(l<0||l>59)&&(l=0),{time:`${i.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`,cleanText:e.replace(a[0],"").trim(),isTimeSpecified:h}}}return{cleanText:e,isTimeSpecified:!1}}static extractDate(e){const t=new Date,a=[{pattern:/(\d{4})년\s*(\d{1,2})월\s*(\d{1,2})일/,type:"yyyy_mm_dd"},{pattern:/(\d{1,2})월\s*(\d{1,2})일/,type:"mm_dd"},{pattern:/(\d{1,2})\/(\d{1,2})/,type:"mm_slash_dd"},{pattern:/(\d{4})-(\d{1,2})-(\d{1,2})/,type:"yyyy_dash_mm_dash_dd"},{pattern:/오늘|today/i,type:"today"},{pattern:/내일|tomorrow/i,type:"tomorrow"},{pattern:/모레|day\s*after\s*tomorrow/i,type:"day_after_tomorrow"},{pattern:/어제|yesterday/i,type:"yesterday"},{pattern:/(\d+)일\s*후/,type:"days_later"},{pattern:/(\d+)주\s*후/,type:"weeks_later"},{pattern:/(\d+)개월\s*후|(\d+)달\s*후/,type:"months_later"},{pattern:/이번\s*주\s*말|주말/,type:"this_weekend"},{pattern:/다음\s*주\s*말|다음\s*주말/,type:"next_weekend"},{pattern:/이번\s*주/,type:"this_week"},{pattern:/다음\s*주/,type:"next_week"},{pattern:/이번\s*달\s*말|월말/,type:"end_of_month"},{pattern:/다음\s*달|다음\s*월/,type:"next_month"},{pattern:/(\d{1,2})일\s*까지/,type:"by_day"},{pattern:/이번\s*달\s*(\d{1,2})일/,type:"this_month_day"},{pattern:/다음\s*달\s*(\d{1,2})일/,type:"next_month_day"}];for(const l of a){const h=e.match(l.pattern);if(h){let g=null;switch(l.type){case"yyyy_mm_dd":g=new Date(parseInt(h[1]),parseInt(h[2])-1,parseInt(h[3]));break;case"mm_dd":g=new Date(t.getFullYear(),parseInt(h[1])-1,parseInt(h[2])),g<t&&g.setFullYear(t.getFullYear()+1);break;case"mm_slash_dd":g=new Date(t.getFullYear(),parseInt(h[1])-1,parseInt(h[2])),g<t&&g.setFullYear(t.getFullYear()+1);break;case"yyyy_dash_mm_dash_dd":g=new Date(parseInt(h[1]),parseInt(h[2])-1,parseInt(h[3]));break;case"today":g=new Date(t);break;case"tomorrow":g=Kn(t,1);break;case"day_after_tomorrow":g=Kn(t,2);break;case"yesterday":g=Kn(t,-1);break;case"days_later":g=Kn(t,parseInt(h[1]));break;case"weeks_later":g=Hp(t,parseInt(h[1]));break;case"months_later":const p=parseInt(h[1])||parseInt(h[2]);g=new Date(t),g.setMonth(g.getMonth()+p);break;case"this_weekend":const y=6-t.getDay();g=Kn(t,y);break;case"next_weekend":const b=6-t.getDay()+7;g=Kn(t,b);break;case"this_week":const w=5-t.getDay();g=Kn(t,w>=0?w:w+7);break;case"next_week":const T=1-t.getDay()+7;g=Kn(t,T);break;case"end_of_month":g=new Date(t.getFullYear(),t.getMonth()+1,0);break;case"next_month":g=new Date(t.getFullYear(),t.getMonth()+1,1);break;case"by_day":const O=parseInt(h[1]);g=new Date(t.getFullYear(),t.getMonth(),O),g<t&&g.setMonth(g.getMonth()+1);break;case"this_month_day":g=new Date(t.getFullYear(),t.getMonth(),parseInt(h[1]));break;case"next_month_day":g=new Date(t.getFullYear(),t.getMonth()+1,parseInt(h[1]));break}if(g)return{date:g,cleanText:e.replace(h[0],"").trim()}}}const i=this.extractDayOfWeek(e);return i.date?i:{cleanText:e}}static extractDayOfWeek(e){const t=new Date,a=t.getDay(),i=[{patterns:["일요일","일","sunday","sun"],targetDay:0},{patterns:["월요일","월","monday","mon"],targetDay:1},{patterns:["화요일","화","tuesday","tue"],targetDay:2},{patterns:["수요일","수","wednesday","wed"],targetDay:3},{patterns:["목요일","목","thursday","thu"],targetDay:4},{patterns:["금요일","금","friday","fri"],targetDay:5},{patterns:["토요일","토","saturday","sat"],targetDay:6}],l=/다음\s*주|next\s*week/i.test(e),h=/이번\s*주|this\s*week/i.test(e);for(const{patterns:g,targetDay:p}of i)for(const y of g){const b=new RegExp(`\\b${y}\\b`,"i");if(b.test(e)){let w=p-a;return l?(w+=7,w<=0&&(w+=7)):h?w<0&&(w+=7):w<=0&&(w+=7),{date:Kn(t,w),cleanText:e.replace(b,"").replace(/다음\s*주|이번\s*주|next\s*week|this\s*week/gi,"").trim()}}}return{cleanText:e}}static extractPriority(e){for(const{pattern:t,priority:a}of this.priorityPatterns)if(t.test(e))return{priority:a,cleanText:e.replace(t,"").trim()};return{cleanText:e}}static extractRecurrence(e){for(const{pattern:t,recurrence:a}of this.recurrencePatterns)if(t.test(e))return{recurrence:a,cleanText:e.replace(t,"").trim()};return{cleanText:e}}static extractTags(e){const t=[];let a=e;for(const i of this.tagPatterns){const l=e.matchAll(i);for(const h of l)t.push(h[1]),a=a.replace(h[0],"").trim()}return{tags:t,cleanText:a}}static extractProject(e){for(const t of this.projectPatterns){const a=e.match(t);if(a)return{project:a[1].trim(),cleanText:e.replace(a[0],"").trim()}}return{cleanText:e}}static extractWeekday(e){for(const{pattern:t,day:a}of this.weekdayPatterns){const i=e.match(t);if(i)return{day:a,cleanText:e.replace(i[0],"").trim()}}return{cleanText:e}}static getExamples(){return["회의 준비 내일 오후 2시 30분 중요","보고서 작성 금요일까지 긴급 #업무","운동하기 매일 오전 7시","프로젝트 검토 이번 주말까지 @팀장","세금 신고 4월 15일 높음","치과 예약 다음 주 월요일","점심 약속 내일 점심시간에 [개인]","저녁 운동 매일 저녁 7시","새벽 독서 매일 새벽 6시","긴급 통화 30분 후","회의 준비 2시간 후 급함","프레젠테이션 준비 3일 후 asap","장보기 이번 달 말까지 천천히","여행 계획 다음 달 첫 주 [휴가]","건강검진 예약 12/25 오전 9시","팀 회의 다음 주 화요일 오후 늦게 #회의 @전체","분기 보고서 월말까지 높음 관련: 기획팀"]}}const Z4=({isOpen:r,onClose:e})=>{const{addTodo:t,addRecurringTemplate:a,recurringTemplates:i}=tn(),[l,h]=le.useState({title:"",description:"",priority:"medium",type:"simple",startDate:"",startTime:"",dueDate:new Date().toISOString().split("T")[0],dueTime:"",recurrence:"none",recurrenceDay:1,recurrenceDate:1,holidayHandling:"before",weeklyRecurrenceType:"every_week",monthlyRecurrenceType:"by_date",weekOfMonth:1,recurringEndDate:"",project:"shortterm",tags:[],exceptions:[]}),[g,p]=le.useState({}),[y,b]=le.useState(!1),[w,T]=le.useState(null),[O,F]=le.useState(""),[$,P]=le.useState(!1),[S,L]=le.useState(null),I=()=>{const H={};if(l.title.trim()||(H.title="할일 제목을 입력해주세요"),l.startDate&&l.dueDate){const ue=new Date(`${l.startDate}T${l.startTime||"00:00"}`),D=new Date(`${l.dueDate}T${l.dueTime||"23:59"}`);ue>=D&&(H.startDate="시작일은 마감일보다 이전이어야 합니다")}return l.dueDate&&l.dueTime&&new Date(`${l.dueDate}T${l.dueTime}`)<new Date&&(H.dueDate="마감일은 현재 시간보다 이후여야 합니다"),p(H),Object.keys(H).length===0},V=H=>{h({...l,title:H.name,description:H.description||"",type:"project",priority:H.defaultPriority,project:H.category}),T(H)},Y=async H=>{if(H.preventDefault(),!I())return;const ue={title:l.title.trim(),description:l.description.trim()||"",completed:!1,priority:l.priority,type:l.type,tags:l.tags||[]};if(l.startDate)try{ue.startDate=new Date(l.startDate),console.log("시작일 설정됨:",ue.startDate)}catch(D){throw console.error("시작일 파싱 오류:",D),new Error("시작일 형식이 올바르지 않습니다")}if(l.startTime&&(ue.startTime=l.startTime,console.log("시작 시간 설정됨:",ue.startTime)),l.dueDate)try{const D=l.dueDate,re=l.dueTime||"23:59",R=`${D}T${re}:00`;ue.dueDate=new Date(R),console.log(`마감일 설정: ${D} ${re} →`,ue.dueDate),l.dueTime&&console.log("마감시간이 dueDate에 포함됨:",l.dueTime)}catch(D){throw console.error("마감일 파싱 오류:",D),new Error(`마감일 형식이 올바르지 않습니다: ${l.dueDate} ${l.dueTime||""}`)}if(l.recurrence&&l.recurrence!=="none"&&(ue.recurrence=l.recurrence,l.recurrence==="weekly"?ue.recurrenceDay=l.recurrenceDay:l.recurrence==="monthly"&&(ue.recurrenceDate=l.recurrenceDate),ue.holidayHandling=l.holidayHandling),l.type==="project"&&(ue.subTasks=[],ue.project=l.project),w?.id&&(ue.templateId=w.id),l.recurrence!=="none"){const D={title:ue.title,description:ue.description,priority:ue.priority,type:ue.type,recurrenceType:l.recurrence,isActive:!0,tags:ue.tags||[],exceptions:l.exceptions,holidayHandling:l.holidayHandling};l.recurrence==="weekly"&&(D.weekday=l.recurrenceDay===7?0:l.recurrenceDay),l.recurrence==="monthly"&&(l.monthlyRecurrenceType==="by_date"?(D.monthlyPattern="date",D.monthlyDate=l.recurrenceDate):l.monthlyRecurrenceType==="by_weekday"&&(D.monthlyPattern="weekday",D.monthlyWeek=l.weekOfMonth===1?"first":l.weekOfMonth===2?"second":l.weekOfMonth===3?"third":l.weekOfMonth===4?"fourth":"last",D.monthlyWeekday=l.recurrenceDay===7?0:l.recurrenceDay)),console.log("Creating recurring template:",D);try{await a(D),console.log("반복 템플릿 추가 성공")}catch(re){throw console.error("반복 템플릿 추가 실패:",re),re}}else{console.log("일반 할일 추가 시도:",ue);try{await t(ue),console.log("일반 할일 추가 성공")}catch(D){throw console.error("일반 할일 추가 실패:",D),D}}w&&w.subTasks&&l.type==="project"&&console.log("프로젝트 템플릿의 서브태스크는 비로그인 모드에서 지원되지 않습니다."),h({title:"",description:"",priority:"medium",type:"simple",startDate:"",startTime:"",dueDate:"",dueTime:"",recurrence:"none",recurrenceDay:1,recurrenceDate:1,holidayHandling:"before",weeklyRecurrenceType:"every_week",monthlyRecurrenceType:"by_date",weekOfMonth:1,recurringEndDate:"",project:"shortterm",tags:[],exceptions:[]}),p({}),T(null),F(""),L(null),P(!1),e()},te=(H,ue)=>{h(D=>({...D,[H]:ue})),g[H]&&p(D=>({...D,[H]:""}))},A=H=>{if(F(H),H.trim()){const ue=d_.parse(H);L(ue),h(D=>({...D,title:ue.title,startDate:ue.startDate?ue.startDate.toISOString().split("T")[0]:"",startTime:ue.startTime||"",dueDate:ue.dueDate?ue.dueDate.toISOString().split("T")[0]:"",dueTime:ue.dueTime||"",priority:ue.priority||D.priority,recurrence:ue.recurrence||"none",recurrenceDay:ue.recurrenceDay||D.recurrenceDay,tags:ue.tags||[]}))}else L(null)},k=()=>{S&&(h(H=>({...H,title:S.title,startDate:S.startDate?S.startDate.toISOString().split("T")[0]:"",startTime:S.startTime||"",dueDate:S.dueDate?S.dueDate.toISOString().split("T")[0]:"",dueTime:S.dueTime||"",priority:S.priority||H.priority,recurrence:S.recurrence||"none",recurrenceDay:S.recurrenceDay||H.recurrenceDay})),P(!1))},C=()=>{P(!$),$&&O&&k()},z=()=>{h(H=>({...H,exceptions:[...H.exceptions,{type:"date",values:[]}]}))},M=H=>{h(ue=>({...ue,exceptions:ue.exceptions.filter((D,re)=>re!==H)}))},B=(H,ue,D)=>{h(re=>({...re,exceptions:re.exceptions.map((R,q)=>q===H?{...R,[ue]:D}:R)}))},j=(H,ue)=>{h(D=>({...D,exceptions:D.exceptions.map((re,R)=>R===H?{...re,values:ue}:re)}))},_e=H=>{const D=l.exceptions[H].values||[],re={targetTemplateTitle:"",scope:"same_week"};j(H,[...D,re])},Ee=(H,ue)=>{const re=l.exceptions[H].values||[];j(H,re.filter((R,q)=>q!==ue))},W=(H,ue,D,re)=>{const K=(l.exceptions[H].values||[]).map((se,ae)=>ae===ue?{...se,[D]:re}:se);j(H,K)};if(!r)return null;const J=[{value:1,label:"월요일"},{value:2,label:"화요일"},{value:3,label:"수요일"},{value:4,label:"목요일"},{value:5,label:"금요일"},{value:6,label:"토요일"},{value:0,label:"일요일"}];return c.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto","data-testid":"add-todo-modal",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"새 할일 추가"}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:c.jsx(Tt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:Y,className:"p-6",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"할일 추가"}),c.jsxs("button",{type:"button",onClick:C,className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${$?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:[c.jsx(pb,{className:"w-4 h-4"}),$?"자연어 모드":"상세 입력 모드"]})]}),$?c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(pb,{className:"w-4 h-4 inline mr-1"}),"자연어로 할일 입력"]}),c.jsx("textarea",{value:O,onChange:H=>A(H.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:`예: 회의 준비 내일 오후 2시 긴급
보고서 작성 금요일까지 #업무
운동하기 매일 오전 7시`}),S&&c.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[c.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-200 mb-2",children:"파싱 결과:"}),c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"제목:"})," ",S.title]}),S.startDate&&c.jsxs("div",{children:[c.jsx("strong",{children:"시작일:"})," ",S.startDate.toLocaleDateString("ko-KR")]}),S.startTime&&c.jsxs("div",{children:[c.jsx("strong",{children:"시작시간:"})," ",S.startTime]}),S.dueDate&&c.jsxs("div",{children:[c.jsx("strong",{children:"마감일:"})," ",S.dueDate.toLocaleDateString("ko-KR")]}),S.dueTime&&c.jsxs("div",{children:[c.jsx("strong",{children:"마감시간:"})," ",S.dueTime]}),S.priority&&c.jsxs("div",{children:[c.jsx("strong",{children:"우선순위:"})," ",S.priority]}),S.recurrence&&S.recurrence!=="none"&&c.jsxs("div",{children:[c.jsx("strong",{children:"반복:"})," ",S.recurrence,S.recurrenceDay&&S.recurrence==="weekly"&&c.jsxs("span",{children:[" - ",["일","월","화","수","목","금","토","일"][S.recurrenceDay],"요일"]})]}),S.tags&&S.tags.length>0&&c.jsxs("div",{children:[c.jsx("strong",{children:"태그:"})," ",S.tags.join(", ")]})]}),c.jsx("button",{type:"button",onClick:k,className:"mt-2 text-xs text-blue-600 hover:text-blue-700 dark:text-blue-400",children:"상세 설정으로 전환 →"})]}),c.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:[c.jsx("strong",{children:"예시:"})," ",d_.getExamples().slice(0,2).join(" • ")]})]}):c.jsx(c.Fragment,{children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"할일 제목 *"}),c.jsx("input",{type:"text",value:l.title,onChange:H=>te("title",H.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"할일을 입력하세요"}),g.title&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.title})]})}),!$&&c.jsx(c.Fragment,{children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"설명"}),c.jsx("textarea",{value:l.description,onChange:H=>te("description",H.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"할일에 대한 설명을 입력하세요"})]})}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(y_,{className:"w-4 h-4 inline mr-1"}),"유형"]}),c.jsxs("select",{value:l.type,onChange:H=>te("type",H.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"simple",children:"간단한 할일"}),c.jsx("option",{value:"project",children:"프로젝트"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(p_,{className:"w-4 h-4 inline mr-1"}),"우선순위"]}),c.jsxs("select",{value:l.priority,onChange:H=>te("priority",H.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"low",children:"낮음"}),c.jsx("option",{value:"medium",children:"보통"}),c.jsx("option",{value:"high",children:"높음"}),c.jsx("option",{value:"urgent",children:"긴급"})]})]})]}),l.type==="project"&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"프로젝트 구분"}),c.jsxs("button",{type:"button",onClick:()=>b(!0),className:"flex items-center gap-1 px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[c.jsx(m_,{className:"w-4 h-4"}),"템플릿 사용"]})]}),w&&c.jsx("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:["템플릿: ",w.name]}),c.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-300",children:[w.subTasks.length,"개의 하위 작업 포함"]})]}),c.jsx("button",{type:"button",onClick:()=>T(null),className:"text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-800 rounded p-1",children:c.jsx(Tt,{className:"w-4 h-4"})})]})}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"shortterm",checked:l.project==="shortterm",onChange:H=>te("project",H.target.value),className:"mr-2"}),"숏텀 프로젝트"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"longterm",checked:l.project==="longterm",onChange:H=>te("project",H.target.value),className:"mr-2"}),"롱텀 프로젝트"]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(Rt,{className:"w-4 h-4 inline mr-1"}),"시작일"]}),c.jsx("input",{type:"date",value:l.startDate,onChange:H=>te("startDate",H.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),g.startDate&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.startDate})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(ha,{className:"w-4 h-4 inline mr-1"}),"시작시간"]}),c.jsx("input",{type:"time",value:l.startTime,onChange:H=>te("startTime",H.target.value),disabled:!l.startDate,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(Rt,{className:"w-4 h-4 inline mr-1"}),"마감일"]}),c.jsx("input",{type:"date",value:l.dueDate,onChange:H=>te("dueDate",H.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),g.dueDate&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.dueDate})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(ha,{className:"w-4 h-4 inline mr-1"}),"마감시간"]}),c.jsx("input",{type:"time",value:l.dueTime,onChange:H=>te("dueTime",H.target.value),disabled:!l.dueDate,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(zd,{className:"w-4 h-4 inline mr-1"}),"반복 설정"]}),c.jsxs("select",{value:l.recurrence,onChange:H=>te("recurrence",H.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"none",children:"반복 안함"}),c.jsx("option",{value:"daily",children:"매일"}),c.jsx("option",{value:"weekly",children:"매주"}),c.jsx("option",{value:"monthly",children:"매달"}),c.jsx("option",{value:"yearly",children:"매년"})]})]}),l.recurrence==="weekly"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"요일 선택"}),c.jsx("select",{value:l.recurrenceDay,onChange:H=>te("recurrenceDay",parseInt(H.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:J.map(H=>c.jsx("option",{value:H.value,children:H.label},H.value))})]}),l.recurrence==="monthly"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"반복 방식"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"by_date",checked:l.monthlyRecurrenceType==="by_date",onChange:H=>te("monthlyRecurrenceType",H.target.value),className:"mr-2"}),"날짜별 (매월 같은 날짜)"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"by_weekday",checked:l.monthlyRecurrenceType==="by_weekday",onChange:H=>te("monthlyRecurrenceType",H.target.value),className:"mr-2"}),"요일별 (매월 n번째 주 특정 요일)"]})]})]}),l.monthlyRecurrenceType==="by_date"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"날짜 선택"}),c.jsxs("select",{value:l.recurrenceDate,onChange:H=>te("recurrenceDate",parseInt(H.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[Array.from({length:31},(H,ue)=>ue+1).map(H=>c.jsxs("option",{value:H,children:[H,"일"]},H)),c.jsx("option",{value:-1,children:"말일"})]})]}),l.monthlyRecurrenceType==="by_weekday"&&c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"주차"}),c.jsxs("select",{value:l.weekOfMonth,onChange:H=>te("weekOfMonth",parseInt(H.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:1,children:"첫째 주"}),c.jsx("option",{value:2,children:"둘째 주"}),c.jsx("option",{value:3,children:"셋째 주"}),c.jsx("option",{value:4,children:"넷째 주"}),c.jsx("option",{value:-1,children:"마지막 주"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"요일"}),c.jsx("select",{value:l.recurrenceDay,onChange:H=>te("recurrenceDay",parseInt(H.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:J.map(H=>c.jsx("option",{value:H.value,children:H.label},H.value))})]})]})]}),l.recurrence!=="none"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[c.jsx(hh,{className:"w-4 h-4 inline mr-1"}),"예외 설정 (반복에서 제외할 조건)"]}),c.jsxs("button",{type:"button",onClick:z,className:"flex items-center gap-1 px-2 py-1 text-sm bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-900/30",children:[c.jsx(Tn,{className:"w-3 h-3"}),"예외 추가"]})]}),l.exceptions.map((H,ue)=>c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("select",{value:H.type,onChange:D=>B(ue,"type",D.target.value),className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"date",children:"특정 날짜"}),c.jsx("option",{value:"weekday",children:"특정 요일"}),c.jsx("option",{value:"week",children:"특정 주"}),c.jsx("option",{value:"month",children:"특정 달"}),c.jsx("option",{value:"conflict",children:"다른 템플릿과 중복"})]}),c.jsx("button",{type:"button",onClick:()=>M(ue),className:"ml-2 p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",children:c.jsx(Tt,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-2",children:[H.type==="date"&&Array.from({length:31},(D,re)=>re+1).map(D=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:H.values.includes(D),onChange:re=>{const R=H.values,q=re.target.checked?[...R,D]:R.filter(K=>K!==D);j(ue,q)},className:"text-sm"}),c.jsxs("span",{className:"text-xs",children:[D,"일"]})]},D)),H.type==="weekday"&&J.map(D=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:H.values.includes(D.value),onChange:re=>{const R=H.values,q=re.target.checked?[...R,D.value]:R.filter(K=>K!==D.value);j(ue,q)},className:"text-sm"}),c.jsx("span",{className:"text-xs",children:D.label})]},D.value)),H.type==="week"&&[1,2,3,4,-1].map(D=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:H.values.includes(D),onChange:re=>{const R=H.values,q=re.target.checked?[...R,D]:R.filter(K=>K!==D);j(ue,q)},className:"text-sm"}),c.jsx("span",{className:"text-xs",children:Ic(D)})]},D)),H.type==="month"&&Array.from({length:12},(D,re)=>re+1).map(D=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:H.values.includes(D),onChange:re=>{const R=H.values,q=re.target.checked?[...R,D]:R.filter(K=>K!==D);j(ue,q)},className:"text-sm"}),c.jsxs("span",{className:"text-xs",children:[D,"월"]})]},D)),H.type==="conflict"&&c.jsxs("div",{className:"col-span-full space-y-3",children:[(H.values||[]).map((D,re)=>c.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:["중복 예외 규칙 ",re+1]}),c.jsx("button",{type:"button",onClick:()=>Ee(ue,re),className:"text-red-500 hover:text-red-700 p-1",children:c.jsx(Tt,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-blue-800 dark:text-blue-200 mb-1",children:"대상 템플릿"}),c.jsxs("select",{value:D.targetTemplateTitle,onChange:R=>W(ue,re,"targetTemplateTitle",R.target.value),className:"w-full px-2 py-1 text-sm border border-blue-300 dark:border-blue-600 rounded focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"",children:"템플릿 선택"}),i.map(R=>c.jsx("option",{value:R.title,children:R.title},R.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-blue-800 dark:text-blue-200 mb-1",children:"중복 조건"}),c.jsxs("select",{value:D.scope,onChange:R=>W(ue,re,"scope",R.target.value),className:"w-full px-2 py-1 text-sm border border-blue-300 dark:border-blue-600 rounded focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"same_date",children:"같은 날짜 중복"}),c.jsx("option",{value:"same_week",children:"같은 주 중복"}),c.jsx("option",{value:"same_month",children:"같은 달 중복"})]})]})]}),c.jsxs("div",{className:"mt-2 p-2 bg-blue-100 dark:bg-blue-800/30 rounded text-xs text-blue-700 dark:text-blue-300",children:[c.jsx("strong",{children:"규칙:"}),' "',D.targetTemplateTitle||"선택된 템플릿",'"이(가) ',D.scope==="same_date"?"같은 날짜":D.scope==="same_week"?"같은 주":"같은 달","에 있으면 이 템플릿의 해당 일정을 제외합니다."]})]},re)),c.jsxs("button",{type:"button",onClick:()=>_e(ue),className:"w-full py-2 px-3 text-sm border-2 border-dashed border-blue-300 dark:border-blue-600 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/30 flex items-center justify-center gap-2",children:[c.jsx(Tn,{className:"w-4 h-4"}),"중복 규칙 추가"]})]})]}),c.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[H.values.length>0&&H.type!=="conflict"&&c.jsxs("span",{children:["선택된 ",H.type==="date"?"날짜":H.type==="weekday"?"요일":H.type==="week"?"주차":"월",": ",H.values.join(", ")]}),H.type==="conflict"&&H.values.length>0&&c.jsxs("span",{children:["설정된 중복 예외: ",H.values.length,"개"]})]})]},ue))]}),l.recurrence!=="none"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"공휴일 처리"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"before",checked:l.holidayHandling==="before",onChange:H=>te("holidayHandling",H.target.value),className:"mr-2"}),"전날로 이동"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"after",checked:l.holidayHandling==="after",onChange:H=>te("holidayHandling",H.target.value),className:"mr-2"}),"다음날로 이동"]})]})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"취소"}),c.jsx("button",{type:"submit",className:"btn-primary",children:"추가하기"})]})]})]}),c.jsx(J4,{isOpen:y,onClose:()=>b(!1),onSelectTemplate:V})]})},e3=({searchTerm:r,onSearchChange:e,priorityFilter:t,onPriorityFilterChange:a,typeFilter:i,onTypeFilterChange:l,projectFilter:h,onProjectFilterChange:g,tagFilter:p,onTagFilterChange:y,completionDateFilter:b,onCompletionDateFilterChange:w,onClearFilters:T,searchInputRef:O,availableTags:F})=>{const[$,P]=le.useState(!1),S=t!=="all"||i!=="all"||h!=="all"||r.length>0||p.length>0||b!=="all",L=I=>{p.includes(I)?y(p.filter(V=>V!==I)):y([...p,I])};return c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(Zk,{className:"h-4 w-4 text-gray-400"})}),c.jsx("input",{ref:O,type:"text",value:r,onChange:I=>e(I.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm",placeholder:"할일 검색..."})]}),c.jsxs("button",{onClick:()=>P(!$),className:`flex items-center gap-1 px-3 py-2 rounded-lg border whitespace-nowrap ${S?"bg-blue-50 border-blue-300 text-blue-700 dark:bg-blue-900/20 dark:border-blue-600 dark:text-blue-400":"bg-white border-gray-300 text-gray-700 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300"} hover:bg-gray-50 dark:hover:bg-gray-600`,children:[c.jsx(jk,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm",children:"필터"}),S&&c.jsx("span",{className:"bg-blue-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:"•"})]}),S&&c.jsx("button",{onClick:T,className:"flex items-center gap-1 px-2 py-2 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-300 dark:hover:bg-gray-500",title:"필터 초기화",children:c.jsx(Tt,{className:"w-4 h-4"})})]}),$&&c.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"우선순위"}),c.jsxs("select",{value:t,onChange:I=>a(I.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"all",children:"전체"}),c.jsx("option",{value:"urgent",children:"긴급"}),c.jsx("option",{value:"high",children:"높음"}),c.jsx("option",{value:"medium",children:"보통"}),c.jsx("option",{value:"low",children:"낮음"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"타입"}),c.jsxs("select",{value:i,onChange:I=>l(I.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"all",children:"전체"}),c.jsx("option",{value:"simple",children:"단일 태스크"}),c.jsx("option",{value:"project",children:"프로젝트"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"프로젝트 구분"}),c.jsxs("select",{value:h,onChange:I=>g(I.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:i!=="project"&&i!=="all",children:[c.jsx("option",{value:"all",children:"전체"}),c.jsx("option",{value:"longterm",children:"롱텀"}),c.jsx("option",{value:"shortterm",children:"숏텀"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-1",children:[c.jsx(gb,{className:"w-4 h-4"}),"태그"]}),c.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:F.length>0?F.map(I=>c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:p.includes(I),onChange:()=>L(I),className:"mr-2 rounded"}),c.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:I})]},I)):c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"태그가 없습니다"})})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-1",children:[c.jsx(Rt,{className:"w-4 h-4"}),"완료일"]}),c.jsxs("select",{value:b,onChange:I=>w(I.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"all",children:"전체"}),c.jsx("option",{value:"today",children:"오늘 완료"}),c.jsx("option",{value:"yesterday",children:"어제 완료"}),c.jsx("option",{value:"thisWeek",children:"이번 주 완료"}),c.jsx("option",{value:"lastWeek",children:"지난 주 완료"}),c.jsx("option",{value:"thisMonth",children:"이번 달 완료"})]})]})]}),S&&c.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:c.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.length>0&&c.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded text-xs",children:[c.jsx(gb,{className:"w-3 h-3"}),p.length,"개 태그"]}),b!=="all"&&c.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded text-xs",children:[c.jsx(Rt,{className:"w-3 h-3"}),b==="today"&&"오늘 완료",b==="yesterday"&&"어제 완료",b==="thisWeek"&&"이번 주 완료",b==="lastWeek"&&"지난 주 완료",b==="thisMonth"&&"이번 달 완료"]})]})})]})]})},t3={lessThanXSeconds:{one:"1초 미만",other:"{{count}}초 미만"},xSeconds:{one:"1초",other:"{{count}}초"},halfAMinute:"30초",lessThanXMinutes:{one:"1분 미만",other:"{{count}}분 미만"},xMinutes:{one:"1분",other:"{{count}}분"},aboutXHours:{one:"약 1시간",other:"약 {{count}}시간"},xHours:{one:"1시간",other:"{{count}}시간"},xDays:{one:"1일",other:"{{count}}일"},aboutXWeeks:{one:"약 1주",other:"약 {{count}}주"},xWeeks:{one:"1주",other:"{{count}}주"},aboutXMonths:{one:"약 1개월",other:"약 {{count}}개월"},xMonths:{one:"1개월",other:"{{count}}개월"},aboutXYears:{one:"약 1년",other:"약 {{count}}년"},xYears:{one:"1년",other:"{{count}}년"},overXYears:{one:"1년 이상",other:"{{count}}년 이상"},almostXYears:{one:"거의 1년",other:"거의 {{count}}년"}},n3=(r,e,t)=>{let a;const i=t3[r];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?a+" 후":a+" 전":a},r3={full:"y년 M월 d일 EEEE",long:"y년 M월 d일",medium:"y.MM.dd",short:"y.MM.dd"},s3={full:"a H시 mm분 ss초 zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},a3={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},i3={date:No({formats:r3,defaultWidth:"full"}),time:No({formats:s3,defaultWidth:"full"}),dateTime:No({formats:a3,defaultWidth:"full"})},o3={lastWeek:"'지난' eeee p",yesterday:"'어제' p",today:"'오늘' p",tomorrow:"'내일' p",nextWeek:"'다음' eeee p",other:"P"},l3=(r,e,t,a)=>o3[r],c3={narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["기원전","서기"]},u3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1분기","2분기","3분기","4분기"]},d3={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],wide:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},h3={narrow:["일","월","화","수","목","금","토"],short:["일","월","화","수","목","금","토"],abbreviated:["일","월","화","수","목","금","토"],wide:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},f3={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},g3={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},m3=(r,e)=>{const t=Number(r);switch(String(e?.unit)){case"minute":case"second":return String(t);case"date":return t+"일";default:return t+"번째"}},p3={ordinalNumber:m3,era:Ar({values:c3,defaultWidth:"wide"}),quarter:Ar({values:u3,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Ar({values:d3,defaultWidth:"wide"}),day:Ar({values:h3,defaultWidth:"wide"}),dayPeriod:Ar({values:f3,defaultWidth:"wide",formattingValues:g3,defaultFormattingWidth:"wide"})},y3=/^(\d+)(일|번째)?/i,x3=/\d+/i,b3={narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(기원전|서기)/i},v3={any:[/^(bc|기원전)/i,/^(ad|서기)/i]},_3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]사?분기/i},w3={any:[/1/i,/2/i,/3/i,/4/i]},T3={narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])월/i,wide:/^(1[012]|[123456789])월/i},E3={any:[/^1월?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},k3={narrow:/^[일월화수목금토]/,short:/^[일월화수목금토]/,abbreviated:/^[일월화수목금토]/,wide:/^[일월화수목금토]요일/},S3={any:[/^일/,/^월/,/^화/,/^수/,/^목/,/^금/,/^토/]},N3={any:/^(am|pm|오전|오후|자정|정오|아침|저녁|밤)/i},A3={any:{am:/^(am|오전)/i,pm:/^(pm|오후)/i,midnight:/^자정/i,noon:/^정오/i,morning:/^아침/i,afternoon:/^오후/i,evening:/^저녁/i,night:/^밤/i}},D3={ordinalNumber:o1({matchPattern:y3,parsePattern:x3,valueCallback:r=>parseInt(r,10)}),era:Dr({matchPatterns:b3,defaultMatchWidth:"wide",parsePatterns:v3,defaultParseWidth:"any"}),quarter:Dr({matchPatterns:_3,defaultMatchWidth:"wide",parsePatterns:w3,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Dr({matchPatterns:T3,defaultMatchWidth:"wide",parsePatterns:E3,defaultParseWidth:"any"}),day:Dr({matchPatterns:k3,defaultMatchWidth:"wide",parsePatterns:S3,defaultParseWidth:"any"}),dayPeriod:Dr({matchPatterns:N3,defaultMatchWidth:"any",parsePatterns:A3,defaultParseWidth:"any"})},Rr={code:"ko",formatDistance:n3,formatLong:i3,formatRelative:l3,localize:p3,match:D3,options:{weekStartsOn:0,firstWeekContainsDate:1}},R3=({searchTerm:r,priorityFilter:e,typeFilter:t,projectFilter:a,tagFilter:i,completionDateFilter:l,onAddTodo:h,isMobile:g=!1})=>{const[p,y]=le.useState(new Date),[b,w]=le.useState({}),[T,O]=le.useState(null),[F,$]=le.useState(!1),{getFilteredTodos:P,toggleTodo:S,deleteTodo:L}=tn(),I=le.useMemo(()=>{const M=zr(p,{weekStartsOn:0}),B=i1(p,{weekStartsOn:0});return a1({start:M,end:B})},[p]),V=le.useMemo(()=>M4(p,{weekStartsOn:0}),[p]);le.useEffect(()=>{(()=>{const B={};I.forEach(j=>{const _e=fc(j);_e&&(B[j.toISOString().split("T")[0]]=_e)}),w(B)})()},[I]);const Y=le.useMemo(()=>P({searchTerm:r,priorityFilter:e,typeFilter:t,projectFilter:a,tagFilter:i,completionDateFilter:l,includeCompleted:!0}),[r,e,t,a,i,l,P]),te=M=>Y.filter(B=>B.dueDate?ch(B.dueDate,M):!1),A=()=>{y(M=>H4(M))},k=()=>{y(M=>Hp(M,1))},C=()=>{y(new Date)},z=zp({onSwipeLeft:k,onSwipeRight:A},{minSwipeDistance:60});return c.jsxs("div",{className:"space-y-4",...g?{onTouchStart:z.onTouchStart,onTouchMove:z.onTouchMove,onTouchEnd:z.onTouchEnd}:{},children:[c.jsxs("div",{className:`flex items-center ${g?"flex-col gap-2":"justify-between"}`,children:[c.jsxs("div",{className:`flex items-center ${g?"w-full justify-between":"gap-4"}`,children:[c.jsxs("h2",{className:`${g?"text-base":"text-xl"} font-semibold text-gray-900 dark:text-white ${g?"flex-1 text-center min-w-0":""}`,children:[wt(p,"yyyy년 M월",{locale:Rr})," ",V,"째주"]}),c.jsxs("div",{className:`flex items-center ${g?"gap-1":"gap-2"}`,children:[c.jsx("button",{onClick:A,className:`${g?"p-1":"p-2"} hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg`,title:"이전 주",children:c.jsx(dh,{className:`${g?"w-3 h-3":"w-4 h-4"}`})}),c.jsx("button",{onClick:C,className:`${g?"px-2 py-1 text-xs":"px-3 py-1 text-sm"} bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/40`,children:"이번 주"}),c.jsx("button",{onClick:k,className:`${g?"p-1":"p-2"} hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg`,title:"다음 주",children:c.jsx(Ao,{className:`${g?"w-3 h-3":"w-4 h-4"}`})})]})]}),!g&&c.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[wt(I[0],"M월 d일",{locale:Rr})," - ",wt(I[6],"M월 d일",{locale:Rr})]})]}),c.jsx("div",{className:"grid grid-cols-7 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:I.map((M,B)=>{const j=te(M);j.filter(H=>H.completed).length,j.length;const _e=M.toISOString().split("T")[0],Ee=b[_e],W=hc(M),J=Vo(M);return c.jsxs("div",{className:"border-r border-gray-200 dark:border-gray-700 last:border-r-0 relative flex flex-col",children:[c.jsxs("div",{className:`${g?"p-1":"p-2"} border-b border-gray-200 dark:border-gray-700 text-center ${J?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":Ee||W?"bg-red-50 dark:bg-red-900/20":"bg-gray-50 dark:bg-gray-700/50"}`,children:[c.jsx("div",{className:`text-xs font-medium mb-1 ${Ee||W?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`,children:wt(M,"E",{locale:Rr})}),c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("div",{className:`text-lg font-semibold ${J?"text-blue-700 dark:text-blue-300":Ee||W?"text-red-700 dark:text-red-300":"text-gray-900 dark:text-white"}`,children:wt(M,"d")}),Ee&&!g&&c.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 font-medium ml-1",children:Ee.name})]})]}),c.jsxs("div",{className:`${g?"px-0.5 py-1 min-h-[150px] space-y-0.5":"p-2 min-h-[200px] space-y-1"} flex-1`,children:[j.slice(0,g?2:3).map(H=>c.jsxs("div",{className:`group relative ${g?"p-1":"p-2"} rounded ${g?"text-[10px]":"text-xs"} border cursor-pointer hover:shadow-md transition-all ${H.completed?"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 opacity-60":H.priority==="urgent"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 hover:bg-red-100 dark:hover:bg-red-900/30":H.priority==="high"?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800 hover:bg-orange-100 dark:hover:bg-orange-900/30":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900/30"}`,onClick:()=>{O(H),$(!0)},children:[c.jsx("div",{className:`font-medium truncate ${g?"text-[10px]":"text-xs"} ${H.completed?"line-through text-gray-500":"text-gray-900 dark:text-white"}`,children:H.title}),H.dueTime&&c.jsx("div",{className:`${g?"text-[9px]":"text-xs"} text-gray-500 dark:text-gray-400 ${g?"mt-0.5":"mt-1"}`,children:H.dueTime}),H.type==="project"&&c.jsx("div",{className:`${g?"text-[9px]":"text-xs"} text-blue-600 dark:text-blue-400 ${g?"mt-0.5":"mt-1"}`,children:H.project==="longterm"?"롱텀":"숏텀"}),c.jsxs("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[c.jsx("button",{onClick:ue=>{ue.stopPropagation(),S(H.id)},className:"p-1 bg-white dark:bg-gray-800 rounded shadow-sm hover:bg-gray-100 dark:hover:bg-gray-700",title:H.completed?"완료 취소":"완료 처리",children:c.jsx("div",{className:`w-2 h-2 rounded-full ${H.completed?"bg-green-600":"border border-gray-400"}`})}),c.jsx("button",{onClick:ue=>{ue.stopPropagation(),confirm(`"${H.title}" 할일을 삭제하시겠습니까?`)&&L(H.id)},className:"p-1 bg-white dark:bg-gray-800 rounded shadow-sm hover:bg-red-100 dark:hover:bg-red-900/30",title:"삭제",children:c.jsx(fi,{className:"w-2 h-2 text-red-600"})})]})]},H.id)),j.length>(g?2:3)&&c.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center py-1",children:["+",j.length-(g?2:3),"개 더"]}),c.jsx("button",{onClick:h,className:`w-full ${g?"h-6":"h-8"} border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex items-center justify-center text-gray-400 hover:border-blue-400 hover:text-blue-400 transition-colors`,title:"할일 추가",children:c.jsx(Tn,{className:`${g?"w-2.5 h-2.5":"w-3 h-3"}`})})]}),Ee&&g&&c.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:c.jsx("div",{className:"text-[9px] text-red-600 dark:text-red-400 font-medium text-center bg-red-50 dark:bg-red-900/20 py-0.5 leading-tight",children:Ee.name})})]},B)})}),I.some(M=>te(M).length>0)&&c.jsxs("div",{className:"mt-8",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"이번 주 상세 할일"}),c.jsx("div",{className:"space-y-2",children:I.map(M=>{const B=te(M);return B.length===0?null:c.jsxs("div",{children:[c.jsxs("h4",{className:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[c.jsx(Rt,{className:"w-4 h-4"}),wt(M,"M월 d일 (E)",{locale:Rr}),Vo(M)&&c.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded",children:"오늘"})]}),c.jsx("div",{className:"space-y-2",children:B.map(j=>c.jsx(uh,{todo:j},j.id))})]},M.toISOString())})})]}),T&&c.jsx(Fp,{isOpen:F,onClose:()=>{$(!1),O(null)},todo:T,isMobile:g})]})},j3=({searchTerm:r,priorityFilter:e,typeFilter:t,projectFilter:a,tagFilter:i,completionDateFilter:l,onAddTodo:h,isMobile:g=!1})=>{const[p,y]=le.useState(new Date),[b,w]=le.useState(null),[T,O]=le.useState({}),[F,$]=le.useState(null),[P,S]=le.useState(!1),[L,I]=le.useState(!1),[V,Y]=le.useState([]),{getFilteredTodos:te,toggleTodo:A,deleteTodo:k}=tn(),C=le.useMemo(()=>{const J=zr(qp(p),{weekStartsOn:0}),H=i1(CC(p),{weekStartsOn:0});return a1({start:J,end:H})},[p]);le.useEffect(()=>{(()=>{const H={};C.forEach(ue=>{const D=fc(ue);D&&(H[ue.toISOString().split("T")[0]]=D)}),O(H)})()},[C]);const z=le.useMemo(()=>te({searchTerm:r,priorityFilter:e,typeFilter:t,projectFilter:a,tagFilter:i,completionDateFilter:l,includeCompleted:!0}),[r,e,t,a,i,l,te]),M=J=>z.filter(H=>H.dueDate?ch(H.dueDate,J):!1),B=()=>{y(J=>z4(J))},j=()=>{y(J=>r1(J,1))},_e=()=>{y(new Date)},Ee=zp({onSwipeLeft:j,onSwipeRight:B},{minSwipeDistance:60}),W=["일","월","화","수","목","금","토"];return c.jsxs("div",{className:"space-y-4",...g?{onTouchStart:Ee.onTouchStart,onTouchMove:Ee.onTouchMove,onTouchEnd:Ee.onTouchEnd}:{},children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:wt(p,"yyyy년 M월",{locale:Rr})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:B,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"이전 달",children:c.jsx(dh,{className:"w-4 h-4"})}),c.jsx("button",{onClick:_e,className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/40",children:"이번 달"}),c.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:"다음 달",children:c.jsx(Ao,{className:"w-4 h-4"})})]})]}),b&&c.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["선택된 날짜: ",wt(b,"M월 d일 (E)",{locale:Rr})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[c.jsx("div",{className:"grid grid-cols-7 bg-gray-50 dark:bg-gray-700/50",children:W.map((J,H)=>c.jsx("div",{className:`p-3 text-center text-sm font-medium border-r border-gray-200 dark:border-gray-700 last:border-r-0 ${H===0||H===6?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`,children:J},J))}),c.jsx("div",{className:"grid grid-cols-7",children:C.map((J,H)=>{const ue=M(J);ue.filter(ae=>ae.completed).length,ue.length;const D=u1(J,p),re=Vo(J),R=b&&ch(J,b),q=J.toISOString().split("T")[0],K=T[q],se=hc(J);return c.jsxs("div",{className:`relative ${g?"min-h-[80px]":"min-h-[120px]"} border-r border-b border-gray-200 dark:border-gray-700 last:border-r-0 ${D?"":"bg-gray-50 dark:bg-gray-800/50"} ${R?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[c.jsx("div",{className:`p-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 ${re?"bg-blue-100 dark:bg-blue-900/30":(K||se)&&D?"bg-red-50 dark:bg-red-900/20":""}`,onClick:()=>{g||ue.length>0?(Y(ue),I(!0)):w(R?null:J)},children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:`text-sm font-medium ${D?re?"text-blue-700 dark:text-blue-300":K||se?"text-red-700 dark:text-red-300":"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-600"}`,children:wt(J,"d")}),K&&D&&!g&&c.jsx("span",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:K.name})]})})}),c.jsxs("div",{className:`${g?"px-1 pb-1 space-y-0.5":"px-2 pb-2 space-y-1"}`,children:[g?ue.slice(0,2).map(ae=>c.jsx("div",{className:`px-1.5 py-0.5 rounded text-[10px] cursor-pointer truncate ${ae.completed?"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 line-through":ae.priority==="urgent"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200":ae.priority==="high"?"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200"}`,onClick:()=>{$(ae),S(!0)},title:ae.title,children:ae.title},ae.id)):ue.slice(0,2).map(ae=>c.jsxs("div",{className:`group relative p-1 rounded text-xs border cursor-pointer hover:shadow-md transition-all ${ae.completed?"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 opacity-60":ae.priority==="urgent"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 hover:bg-red-100 dark:hover:bg-red-900/30":ae.priority==="high"?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800 hover:bg-orange-100 dark:hover:bg-orange-900/30":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900/30"}`,onClick:()=>{$(ae),S(!0)},children:[c.jsx("div",{className:`font-medium truncate ${ae.completed?"line-through text-gray-500":"text-gray-900 dark:text-white"}`,children:ae.title}),ae.dueTime&&c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:ae.dueTime}),ae.type==="project"&&c.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:ae.project==="longterm"?"롱텀":"숏텀"}),c.jsxs("div",{className:"absolute top-0.5 right-0.5 opacity-0 group-hover:opacity-100 transition-opacity flex gap-0.5",children:[c.jsx("button",{onClick:ce=>{ce.stopPropagation(),A(ae.id)},className:"p-0.5 bg-white dark:bg-gray-800 rounded shadow-sm hover:bg-gray-100 dark:hover:bg-gray-700",title:ae.completed?"완료 취소":"완료 처리",children:c.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${ae.completed?"bg-green-600":"border border-gray-400"}`})}),c.jsx("button",{onClick:ce=>{ce.stopPropagation(),confirm(`"${ae.title}" 할일을 삭제하시겠습니까?`)&&k(ae.id)},className:"p-0.5 bg-white dark:bg-gray-800 rounded shadow-sm hover:bg-red-100 dark:hover:bg-red-900/30",title:"삭제",children:c.jsx(fi,{className:"w-1.5 h-1.5 text-red-600"})})]})]},ae.id)),ue.length>2&&c.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center py-1 cursor-pointer hover:text-blue-600",onClick:()=>{Y(ue),I(!0)},children:["+",ue.length-2,"개 더"]}),D&&c.jsx("button",{onClick:h,className:`w-full ${g?"h-5":"h-6"} border border-dashed border-gray-300 dark:border-gray-600 rounded flex items-center justify-center text-gray-400 hover:border-blue-400 hover:text-blue-400 transition-colors`,title:"할일 추가",children:c.jsx(Tn,{className:`${g?"w-2.5 h-2.5":"w-3 h-3"}`})})]}),K&&g&&D&&c.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:c.jsx("div",{className:"text-[9px] text-red-600 dark:text-red-400 font-medium text-center bg-red-50 dark:bg-red-900/20 py-0.5 leading-tight",children:K.name})})]},H)})})]}),b&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(Rt,{className:"w-5 h-5"}),wt(b,"M월 d일 (E)",{locale:Rr})," 할일",Vo(b)&&c.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded",children:"오늘"})]}),c.jsx("button",{onClick:()=>w(null),className:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"닫기"})]}),c.jsxs("div",{className:"space-y-2",children:[M(b).map(J=>c.jsx(uh,{todo:J},J.id)),M(b).length===0&&c.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[c.jsx(Rt,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"이 날짜에 할일이 없습니다."}),c.jsx("button",{onClick:h,className:"mt-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"할일 추가하기"})]})]})]}),L&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>I(!1),children:c.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-xl ${g?"w-[90vw] max-h-[80vh]":"w-[500px] max-h-[600px]"} overflow-hidden`,onClick:J=>J.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(Rt,{className:"w-5 h-5"}),V.length>0&&V[0].dueDate?wt(V[0].dueDate,"M월 d일 (E)",{locale:Rr}):"할일 목록"," (",V.length,"개)"]}),c.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:c.jsx(Tt,{className:"w-4 h-4"})})]}),c.jsx("div",{className:"p-4 overflow-y-auto max-h-[500px]",children:V.length>0?c.jsx("div",{className:"space-y-3",children:V.map(J=>c.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer hover:shadow-md transition-all ${J.completed?"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 opacity-60":J.priority==="urgent"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":J.priority==="high"?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}`,onClick:()=>{$(J),S(!0),I(!1)},children:[c.jsx("div",{className:`font-medium ${J.completed?"line-through text-gray-500":"text-gray-900 dark:text-white"}`,children:J.title}),J.description&&c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:J.description}),J.dueTime&&c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:J.dueTime}),J.type==="project"&&c.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:[J.project==="longterm"?"롱텀":"숏텀"," 프로젝트"]}),J.tags&&J.tags.length>0&&c.jsx("div",{className:"flex gap-1 mt-2",children:J.tags.map(H=>c.jsx("span",{className:"px-2 py-1 text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded",children:H},H))})]},J.id))}):c.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[c.jsx(Rt,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"이 날짜에 할일이 없습니다."}),c.jsx("button",{onClick:()=>{I(!1),h()},className:"mt-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"할일 추가하기"})]})})]})}),F&&c.jsx(Fp,{isOpen:P,onClose:()=>{S(!1),$(null)},todo:F,isMobile:g})]})},I3=({isOpen:r,onClose:e})=>{const{addRecurringTemplate:t,recurringTemplates:a}=tn(),[i,l]=le.useState({title:"",description:"",priority:"medium",type:"simple",recurrenceType:"weekly",weekday:1,monthlyDate:1,monthlyPattern:"date",monthlyWeek:"first",monthlyWeekday:3,tags:[],exceptions:[],holidayHandling:"before"}),[h,g]=le.useState(!1),p=()=>{l(S=>({...S,exceptions:[...S.exceptions,{type:"date",values:[]}]}))},y=S=>{l(L=>({...L,exceptions:L.exceptions.filter((I,V)=>V!==S)}))},b=(S,L,I)=>{l(V=>({...V,exceptions:V.exceptions.map((Y,te)=>te===S?{...Y,[L]:I}:Y)}))},w=(S,L)=>{l(I=>({...I,exceptions:I.exceptions.map((V,Y)=>Y===S?{...V,values:L}:V)}))},T=S=>{const I=i.exceptions[S].values||[],V={targetTemplateTitle:"",scope:"same_week"};w(S,[...I,V])},O=(S,L)=>{const V=i.exceptions[S].values||[];w(S,V.filter((Y,te)=>te!==L))},F=(S,L,I,V)=>{const A=(i.exceptions[S].values||[]).map((k,C)=>C===L?{...k,[I]:V}:k);w(S,A)},$=[{value:0,label:"일요일"},{value:1,label:"월요일"},{value:2,label:"화요일"},{value:3,label:"수요일"},{value:4,label:"목요일"},{value:5,label:"금요일"},{value:6,label:"토요일"}],P=async S=>{if(S.preventDefault(),!!i.title.trim()){g(!0);try{console.log("=== AddRecurringModal 템플릿 생성 시작 ==="),console.log("폼 데이터:",i);const L={title:i.title.trim(),description:i.description.trim()||void 0,priority:i.priority,type:i.type,recurrenceType:i.recurrenceType,isActive:!0,tags:i.tags,exceptions:i.exceptions,holidayHandling:i.holidayHandling};console.log("공휴일 처리 설정:",L.holidayHandling),i.recurrenceType==="weekly"?L.weekday=i.weekday:i.recurrenceType==="monthly"&&(i.monthlyPattern==="weekday"?(L.monthlyPattern="weekday",L.monthlyWeek=i.monthlyWeek,L.monthlyWeekday=i.monthlyWeekday):(L.monthlyPattern="date",L.monthlyDate=i.monthlyDate)),console.log("최종 템플릿 데이터:",L),await t(L),e(),l({title:"",description:"",priority:"medium",type:"simple",recurrenceType:"weekly",weekday:1,monthlyDate:1,monthlyPattern:"date",monthlyWeek:"first",monthlyWeekday:3,tags:[],exceptions:[],holidayHandling:"before"}),console.log("=== AddRecurringModal 템플릿 생성 완료 ===")}catch(L){console.error("반복 템플릿 추가 실패:",L),alert("반복 템플릿 추가에 실패했습니다.")}finally{g(!1)}}};return r?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"반복 템플릿 추가"}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:c.jsx(Tt,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:P,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"제목"}),c.jsx("input",{type:"text",value:i.title,onChange:S=>l({...i,title:S.target.value}),placeholder:"반복 할일 제목을 입력하세요",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"설명 (선택사항)"}),c.jsx("textarea",{value:i.description,onChange:S=>l({...i,description:S.target.value}),placeholder:"반복 할일에 대한 설명을 입력하세요",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:2})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"우선순위"}),c.jsxs("select",{value:i.priority,onChange:S=>l({...i,priority:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[c.jsx("option",{value:"low",children:"낮음"}),c.jsx("option",{value:"medium",children:"보통"}),c.jsx("option",{value:"high",children:"높음"}),c.jsx("option",{value:"urgent",children:"긴급"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"반복 주기"}),c.jsxs("select",{value:i.recurrenceType,onChange:S=>l({...i,recurrenceType:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[c.jsx("option",{value:"weekly",children:"매주"}),c.jsx("option",{value:"monthly",children:"매월"})]})]}),i.recurrenceType==="weekly"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"요일"}),c.jsxs("select",{value:i.weekday,onChange:S=>l({...i,weekday:parseInt(S.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[c.jsx("option",{value:0,children:"일요일"}),c.jsx("option",{value:1,children:"월요일"}),c.jsx("option",{value:2,children:"화요일"}),c.jsx("option",{value:3,children:"수요일"}),c.jsx("option",{value:4,children:"목요일"}),c.jsx("option",{value:5,children:"금요일"}),c.jsx("option",{value:6,children:"토요일"})]})]}),i.recurrenceType==="monthly"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"월간 패턴"}),c.jsxs("select",{value:i.monthlyPattern,onChange:S=>l({...i,monthlyPattern:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[c.jsx("option",{value:"date",children:"특정 날짜 (예: 매월 15일)"}),c.jsx("option",{value:"weekday",children:"특정 주의 요일 (예: 매월 마지막 주 수요일)"})]})]}),i.monthlyPattern==="date"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"날짜"}),c.jsx("input",{type:"number",min:"1",max:"31",value:i.monthlyDate,onChange:S=>l({...i,monthlyDate:parseInt(S.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),i.monthlyPattern==="weekday"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"몇 번째 주"}),c.jsxs("select",{value:i.monthlyWeek,onChange:S=>l({...i,monthlyWeek:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[c.jsx("option",{value:"first",children:"첫 번째 주"}),c.jsx("option",{value:"second",children:"두 번째 주"}),c.jsx("option",{value:"third",children:"세 번째 주"}),c.jsx("option",{value:"fourth",children:"네 번째 주"}),c.jsx("option",{value:"last",children:"마지막 주"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"요일"}),c.jsxs("select",{value:i.monthlyWeekday,onChange:S=>l({...i,monthlyWeekday:parseInt(S.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[c.jsx("option",{value:0,children:"일요일"}),c.jsx("option",{value:1,children:"월요일"}),c.jsx("option",{value:2,children:"화요일"}),c.jsx("option",{value:3,children:"수요일"}),c.jsx("option",{value:4,children:"목요일"}),c.jsx("option",{value:5,children:"금요일"}),c.jsx("option",{value:6,children:"토요일"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"공휴일 처리"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",name:"holidayHandling",value:"before",checked:i.holidayHandling==="before",onChange:S=>l({...i,holidayHandling:S.target.value}),className:"mr-2 text-blue-600"}),c.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"공휴일 이전으로 이동"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",name:"holidayHandling",value:"after",checked:i.holidayHandling==="after",onChange:S=>l({...i,holidayHandling:S.target.value}),className:"mr-2 text-blue-600"}),c.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"공휴일 이후로 이동"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[c.jsx(hh,{className:"w-4 h-4 inline mr-1"}),"예외 설정 (반복에서 제외할 조건)"]}),c.jsxs("button",{type:"button",onClick:p,className:"flex items-center gap-1 px-2 py-1 text-sm bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-900/30",children:[c.jsx(Tn,{className:"w-3 h-3"}),"예외 추가"]})]}),i.exceptions.map((S,L)=>c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("select",{value:S.type,onChange:I=>b(L,"type",I.target.value),className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"date",children:"특정 날짜 제외"}),c.jsx("option",{value:"weekday",children:"특정 요일 제외"}),c.jsx("option",{value:"week",children:"특정 주차 제외"}),c.jsx("option",{value:"month",children:"특정 달 제외"}),c.jsx("option",{value:"conflict",children:"다른 템플릿과 중복"})]}),c.jsx("button",{type:"button",onClick:()=>y(L),className:"ml-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:c.jsx(Tt,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-2",children:[S.type==="date"&&Array.from({length:31},(I,V)=>V+1).map(I=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:S.values.includes(I),onChange:V=>{const Y=S.values,te=V.target.checked?[...Y,I]:Y.filter(A=>A!==I);w(L,te)},className:"text-blue-600 rounded focus:ring-blue-500"}),c.jsxs("span",{className:"text-xs",children:[I,"일"]})]},I)),S.type==="weekday"&&$.map(I=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:S.values.includes(I.value),onChange:V=>{const Y=S.values,te=V.target.checked?[...Y,I.value]:Y.filter(A=>A!==I.value);w(L,te)},className:"text-blue-600 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-xs",children:I.label})]},I.value)),S.type==="week"&&[1,2,3,4,-1].map(I=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:S.values.includes(I),onChange:V=>{const Y=S.values,te=V.target.checked?[...Y,I]:Y.filter(A=>A!==I);w(L,te)},className:"text-blue-600 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-xs",children:Ic(I)})]},I)),S.type==="month"&&Array.from({length:12},(I,V)=>V+1).map(I=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:S.values.includes(I),onChange:V=>{const Y=S.values,te=V.target.checked?[...Y,I]:Y.filter(A=>A!==I);w(L,te)},className:"text-blue-600 rounded focus:ring-blue-500"}),c.jsxs("span",{className:"text-xs",children:[I,"월"]})]},I)),S.type==="conflict"&&c.jsxs("div",{className:"col-span-full space-y-3",children:[(S.values||[]).map((I,V)=>c.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:["중복 예외 규칙 ",V+1]}),c.jsx("button",{type:"button",onClick:()=>O(L,V),className:"text-red-500 hover:text-red-700 p-1",children:c.jsx(Tt,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-blue-800 dark:text-blue-200 mb-1",children:"대상 템플릿"}),c.jsxs("select",{value:I.targetTemplateTitle,onChange:Y=>F(L,V,"targetTemplateTitle",Y.target.value),className:"w-full px-2 py-1 text-sm border border-blue-300 dark:border-blue-600 rounded focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"",children:"템플릿 선택"}),a.map(Y=>c.jsx("option",{value:Y.title,children:Y.title},Y.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-blue-800 dark:text-blue-200 mb-1",children:"중복 조건"}),c.jsxs("select",{value:I.scope,onChange:Y=>F(L,V,"scope",Y.target.value),className:"w-full px-2 py-1 text-sm border border-blue-300 dark:border-blue-600 rounded focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"same_date",children:"같은 날짜 중복"}),c.jsx("option",{value:"same_week",children:"같은 주 중복"}),c.jsx("option",{value:"same_month",children:"같은 달 중복"})]})]})]}),c.jsxs("div",{className:"mt-2 p-2 bg-blue-100 dark:bg-blue-800/30 rounded text-xs text-blue-700 dark:text-blue-300",children:[c.jsx("strong",{children:"규칙:"}),' "',I.targetTemplateTitle||"선택된 템플릿",'"이(가) ',I.scope==="same_date"?"같은 날짜":I.scope==="same_week"?"같은 주":"같은 달","에 있으면 이 템플릿의 해당 일정을 제외합니다."]})]},V)),c.jsxs("button",{type:"button",onClick:()=>T(L),className:"w-full py-2 px-3 text-sm border-2 border-dashed border-blue-300 dark:border-blue-600 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/30 flex items-center justify-center gap-2",children:[c.jsx(Tn,{className:"w-4 h-4"}),"중복 규칙 추가"]})]})]}),c.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[S.values.length>0&&S.type!=="conflict"&&c.jsxs("span",{children:["선택된 ",S.type==="date"?"날짜":S.type==="weekday"?"요일":S.type==="week"?"주차":"월",": ",S.values.join(", ")]}),S.type==="conflict"&&S.values.length>0&&c.jsxs("span",{children:["설정된 중복 예외: ",S.values.length,"개"]})]})]},L))]}),c.jsxs("div",{className:"flex gap-3 pt-4 mt-6 border-t",children:[c.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",disabled:h,children:"취소"}),c.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:h||!i.title.trim(),children:h?"저장 중...":"저장"})]})]})]})}):null},C3=()=>{const{recurringTemplates:r,recurringInstances:e,updateRecurringTemplate:t,deleteRecurringTemplate:a,cleanupDuplicateTemplates:i}=tn(),[l,h]=le.useState("templates"),[g,p]=le.useState(!1),[y,b]=le.useState(!1),[w,T]=le.useState(null),[O,F]=le.useState({excludeWeeks:[],excludeDates:[]});le.useEffect(()=>{try{const A=localStorage.getItem("globalRecurringExceptions");A&&F(JSON.parse(A))}catch(A){console.error("예외 설정 로드 실패:",A)}},[]);const $=A=>{try{localStorage.setItem("globalRecurringExceptions",JSON.stringify(A)),F(A)}catch(k){console.error("예외 설정 저장 실패:",k)}},P=A=>{const k={...O},C=k.excludeWeeks.indexOf(A);C===-1?k.excludeWeeks.push(A):k.excludeWeeks.splice(C,1),$(k)},S=r.filter(A=>A.isActive),L=r.filter(A=>!A.isActive),I=async A=>{const k=r.find(C=>C.id===A);k&&await t(A,{isActive:!k.isActive})},V=async A=>{confirm("이 반복 템플릿을 삭제하시겠습니까?")&&await a(A)},Y=A=>{T(A),b(!0)},te=A=>{if(A.recurrenceType==="weekly")return`매주 ${["일","월","화","수","목","금","토"][A.weekday||0]}요일`;if(A.recurrenceType==="monthly")if(A.monthlyPattern==="weekday"&&A.monthlyWeek&&A.monthlyWeekday!==void 0){const k=["일","월","화","수","목","금","토"];return`매월 ${{first:"첫 번째",second:"두 번째",third:"세 번째",fourth:"네 번째",last:"마지막"}[A.monthlyWeek]} 주 ${k[A.monthlyWeekday]}요일`}else return A.monthlyDate===-1?"매월 말일":`매월 ${A.monthlyDate}일`;return"매일"};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"반복 관리"}),c.jsxs("button",{onClick:()=>p(!0),className:"btn-primary flex items-center gap-2",children:[c.jsx(Tn,{className:"w-4 h-4"}),"반복 템플릿 추가"]})]}),c.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:c.jsxs("nav",{className:"flex justify-between",children:[c.jsx("button",{onClick:()=>h("templates"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="templates"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:"반복 템플릿"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsx("button",{onClick:()=>h("exceptions"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="exceptions"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:"예외 처리"}),c.jsx("button",{onClick:()=>h("holidays"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="holidays"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:"휴가 관리"})]})]})}),l==="templates"&&c.jsxs("div",{className:"space-y-6",children:[S.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(um,{className:"w-5 h-5 text-green-600"}),"활성 반복 할일 (",S.length,")"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(A=>c.jsx("div",{className:"card p-3 bg-green-50 dark:bg-green-900/10 border-green-200 dark:border-green-800",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-1 truncate",children:A.title}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 whitespace-nowrap overflow-hidden text-ellipsis",children:te(A)})]}),c.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[c.jsx("span",{className:`px-2 py-1 rounded text-xs ${A.priority==="urgent"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300":A.priority==="high"?"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300":A.priority==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300"}`,children:A.priority==="urgent"?"긴급":A.priority==="high"?"높음":A.priority==="medium"?"보통":"낮음"}),c.jsx("button",{onClick:()=>Y(A),className:"p-1 hover:bg-blue-100 dark:hover:bg-blue-800 rounded",title:"수정",children:c.jsx(__,{className:"w-4 h-4 text-blue-600"})}),c.jsx("button",{onClick:()=>I(A.id),className:"p-1 hover:bg-green-100 dark:hover:bg-green-800 rounded",title:"일시정지",children:c.jsx(cm,{className:"w-4 h-4 text-green-600"})}),c.jsx("button",{onClick:()=>V(A.id),className:"p-1 hover:bg-red-100 dark:hover:bg-red-800 rounded",title:"삭제",children:c.jsx(fi,{className:"w-4 h-4 text-red-600"})})]})]})},A.id))})]}),L.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(cm,{className:"w-5 h-5 text-gray-500"}),"일시정지된 반복 할일 (",L.length,")"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L.map(A=>c.jsx("div",{className:"card p-3 bg-gray-50 dark:bg-gray-800 opacity-75",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-medium text-gray-600 dark:text-gray-300 mb-1 truncate",children:A.title}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap overflow-hidden text-ellipsis",children:te(A)})]}),c.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[c.jsx("button",{onClick:()=>I(A.id),className:"p-1 hover:bg-green-100 dark:hover:bg-green-800 rounded",title:"재개",children:c.jsx(um,{className:"w-4 h-4 text-green-600"})}),c.jsx("button",{onClick:()=>V(A.id),className:"p-1 hover:bg-red-100 dark:hover:bg-red-800 rounded",title:"삭제",children:c.jsx(fi,{className:"w-4 h-4 text-red-600"})})]})]})},A.id))})]}),r.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Rt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"반복 템플릿이 없습니다"}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"새로운 반복 할일 템플릿을 추가하여 일정을 자동화하세요."}),c.jsx("button",{onClick:()=>p(!0),className:"btn-primary",children:"첫 번째 템플릿 추가"})]})]}),l==="exceptions"&&c.jsx("div",{className:"space-y-6",children:c.jsxs("div",{className:"card p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"반복 할일 예외 처리 설정"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-md font-medium text-gray-800 dark:text-gray-200 mb-3",children:"월별 주 설정"}),c.jsxs("div",{className:"flex gap-1 justify-between overflow-hidden",children:[c.jsx("div",{className:"text-center px-1 py-1 bg-blue-50 dark:bg-blue-900/30 rounded flex-1 min-w-0",children:c.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300 whitespace-nowrap overflow-hidden text-ellipsis",style:{fontSize:"clamp(8px, 2.5vw, 12px)"},children:"첫째주"})}),c.jsx("div",{className:"text-center px-1 py-1 bg-green-50 dark:bg-green-900/30 rounded flex-1 min-w-0",children:c.jsx("div",{className:"font-medium text-green-700 dark:text-green-300 whitespace-nowrap overflow-hidden text-ellipsis",style:{fontSize:"clamp(8px, 2.5vw, 12px)"},children:"둘째주"})}),c.jsx("div",{className:"text-center px-1 py-1 bg-yellow-50 dark:bg-yellow-900/30 rounded flex-1 min-w-0",children:c.jsx("div",{className:"font-medium text-yellow-700 dark:text-yellow-300 whitespace-nowrap overflow-hidden text-ellipsis",style:{fontSize:"clamp(8px, 2.5vw, 12px)"},children:"셋째주"})}),c.jsx("div",{className:"text-center px-1 py-1 bg-purple-50 dark:bg-purple-900/30 rounded flex-1 min-w-0",children:c.jsx("div",{className:"font-medium text-purple-700 dark:text-purple-300 whitespace-nowrap overflow-hidden text-ellipsis",style:{fontSize:"clamp(8px, 2.5vw, 12px)"},children:"넷째주"})}),c.jsx("div",{className:"text-center px-1 py-1 bg-red-50 dark:bg-red-900/30 rounded flex-1 min-w-0",children:c.jsx("div",{className:"font-medium text-red-700 dark:text-red-300 whitespace-nowrap overflow-hidden text-ellipsis",style:{fontSize:"clamp(8px, 2.5vw, 12px)"},children:"마지막주"})})]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-3",children:"* 마지막주는 해당 달의 마지막 주를 의미합니다. (4주가 있는 달은 4주차, 5주가 있는 달은 5주차)"})]}),c.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[c.jsx("h4",{className:"text-md font-medium text-gray-800 dark:text-gray-200 mb-3",children:"특정 주 제외 설정"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex gap-1 justify-between overflow-hidden",children:[c.jsxs("label",{className:"flex flex-col items-center space-y-1 px-1 py-1 bg-blue-50 dark:bg-blue-900/30 rounded cursor-pointer flex-1 min-w-0",children:[c.jsx("span",{className:"text-blue-700 dark:text-blue-300 whitespace-nowrap overflow-hidden text-ellipsis font-medium",style:{fontSize:"clamp(8px, 2.5vw, 12px)"},children:"첫째주"}),c.jsx("input",{type:"checkbox",className:"rounded w-3 h-3",checked:O.excludeWeeks.includes(1),onChange:()=>P(1)})]}),c.jsxs("label",{className:"flex flex-col items-center space-y-1 px-1 py-1 bg-green-50 dark:bg-green-900/30 rounded cursor-pointer flex-1 min-w-0",children:[c.jsx("span",{className:"text-green-700 dark:text-green-300 whitespace-nowrap overflow-hidden text-ellipsis font-medium",style:{fontSize:"clamp(8px, 2.5vw, 12px)"},children:"둘째주"}),c.jsx("input",{type:"checkbox",className:"rounded w-3 h-3",checked:O.excludeWeeks.includes(2),onChange:()=>P(2)})]}),c.jsxs("label",{className:"flex flex-col items-center space-y-1 px-1 py-1 bg-yellow-50 dark:bg-yellow-900/30 rounded cursor-pointer flex-1 min-w-0",children:[c.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 whitespace-nowrap overflow-hidden text-ellipsis font-medium",style:{fontSize:"clamp(8px, 2.5vw, 12px)"},children:"셋째주"}),c.jsx("input",{type:"checkbox",className:"rounded w-3 h-3",checked:O.excludeWeeks.includes(3),onChange:()=>P(3)})]}),c.jsxs("label",{className:"flex flex-col items-center space-y-1 px-1 py-1 bg-purple-50 dark:bg-purple-900/30 rounded cursor-pointer flex-1 min-w-0",children:[c.jsx("span",{className:"text-purple-700 dark:text-purple-300 whitespace-nowrap overflow-hidden text-ellipsis font-medium",style:{fontSize:"clamp(8px, 2.5vw, 12px)"},children:"넷째주"}),c.jsx("input",{type:"checkbox",className:"rounded w-3 h-3",checked:O.excludeWeeks.includes(4),onChange:()=>P(4)})]}),c.jsxs("label",{className:"flex flex-col items-center space-y-1 px-1 py-1 bg-red-50 dark:bg-red-900/30 rounded cursor-pointer flex-1 min-w-0",children:[c.jsx("span",{className:"text-red-700 dark:text-red-300 whitespace-nowrap overflow-hidden text-ellipsis font-medium",style:{fontSize:"clamp(8px, 2.5vw, 12px)"},children:"마지막주"}),c.jsx("input",{type:"checkbox",className:"rounded w-3 h-3",checked:O.excludeWeeks.includes(5),onChange:()=>P(5)})]})]}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"체크된 주에는 반복 할일이 생성되지 않습니다. 마지막주는 해당 달의 마지막 주를 의미합니다."}),O.excludeWeeks.length>0&&c.jsxs("div",{className:"mt-3 p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[c.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-300 font-medium",children:["현재 제외된 주: ",O.excludeWeeks.map(A=>Ic(A)).join(", ")]}),c.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:"이 주들에는 새로운 반복 할일이 생성되지 않습니다."})]})]}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h4",{className:"text-md font-medium text-gray-800 dark:text-gray-200",children:"특정 날짜 예외 관리"}),c.jsx("button",{className:"btn-secondary px-2 py-1 whitespace-nowrap",style:{fontSize:"clamp(10px, 2vw, 14px)"},children:"예외 날짜 추가"})]}),c.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-2 rounded-lg",children:c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"특정 날짜에 반복 할일을 건너뛰거나 다른 날짜로 이동할 수 있습니다."})})]})]})]})]})}),l==="holidays"&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(v_,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"휴가 관리 기능"}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"휴가 일정 관리 기능이 곧 추가될 예정입니다."}),c.jsxs("div",{className:"card p-6 max-w-md mx-auto",children:[c.jsx("h4",{className:"font-medium mb-3",children:"계획된 기능"}),c.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-300 text-left space-y-2",children:[c.jsx("li",{children:"• 휴가 일정 등록"}),c.jsx("li",{children:"• 반복 할일 자동 조정"}),c.jsx("li",{children:"• 휴가 기간 알림"}),c.jsx("li",{children:"• 공휴일 연동"})]})]})]}),c.jsx("div",{className:"card p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:"총 템플릿"}),c.jsx("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:r.length})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:"활성"}),c.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:S.length})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:"오늘 인스턴스"}),c.jsx("p",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:e.filter(A=>{const k=new Date().toDateString();return new Date(A.date).toDateString()===k}).length})]})]})}),c.jsx(I3,{isOpen:g,onClose:()=>p(!1)}),y&&w&&c.jsx(O3,{template:w,onClose:()=>{b(!1),T(null)},onSave:async A=>{await t(w.id,A),b(!1),T(null)}})]})},O3=({template:r,onClose:e,onSave:t})=>{const{recurringTemplates:a}=tn();console.log("=== EditRecurringModal 초기화 ==="),console.log("전달받은 template:",r),console.log("template.holidayHandling:",r.holidayHandling);const[i,l]=le.useState({title:r.title,description:r.description||"",priority:r.priority,type:r.type,recurrenceType:r.recurrenceType,weekday:r.weekday||0,monthlyDate:r.monthlyDate||1,monthlyPattern:r.monthlyPattern||"date",monthlyWeek:r.monthlyWeek||"first",monthlyWeekday:r.monthlyWeekday||3,tags:r.tags||[],exceptions:r.exceptions||[],holidayHandling:r.holidayHandling||"before"});console.log("초기 formData.holidayHandling:",i.holidayHandling);const[h,g]=le.useState(!1);le.useEffect(()=>{console.log("=== EditRecurringModal template 변경 감지 ==="),console.log("새로운 template.holidayHandling:",r.holidayHandling),l({title:r.title,description:r.description||"",priority:r.priority,type:r.type,recurrenceType:r.recurrenceType,weekday:r.weekday||0,monthlyDate:r.monthlyDate||1,monthlyPattern:r.monthlyPattern||"date",monthlyWeek:r.monthlyWeek||"first",monthlyWeekday:r.monthlyWeekday||3,tags:r.tags||[],exceptions:r.exceptions||[],holidayHandling:r.holidayHandling||"before"}),console.log("업데이트된 formData.holidayHandling:",r.holidayHandling||"before")},[r]);const p=()=>{l(S=>({...S,exceptions:[...S.exceptions,{type:"date",values:[]}]}))},y=S=>{l(L=>({...L,exceptions:L.exceptions.filter((I,V)=>V!==S)}))},b=(S,L,I)=>{l(V=>({...V,exceptions:V.exceptions.map((Y,te)=>te===S?{...Y,[L]:I}:Y)}))},w=(S,L)=>{l(I=>({...I,exceptions:I.exceptions.map((V,Y)=>Y===S?{...V,values:L}:V)}))},T=S=>{const I=i.exceptions[S].values||[],V={targetTemplateTitle:"",scope:"same_week"};w(S,[...I,V])},O=(S,L)=>{const V=i.exceptions[S].values||[];w(S,V.filter((Y,te)=>te!==L))},F=(S,L,I,V)=>{const A=(i.exceptions[S].values||[]).map((k,C)=>C===L?{...k,[I]:V}:k);w(S,A)},$=[{value:0,label:"일요일"},{value:1,label:"월요일"},{value:2,label:"화요일"},{value:3,label:"수요일"},{value:4,label:"목요일"},{value:5,label:"금요일"},{value:6,label:"토요일"}],P=async S=>{S.preventDefault(),g(!0);try{console.log("=== EditRecurringModal 저장 시작 ==="),console.log("원본 템플릿 holidayHandling:",r.holidayHandling),console.log("formData holidayHandling:",i.holidayHandling);const L={title:i.title.trim(),description:i.description.trim()||void 0,priority:i.priority,type:i.type,recurrenceType:i.recurrenceType,tags:i.tags,exceptions:i.exceptions,holidayHandling:i.holidayHandling,updatedAt:new Date};console.log("updateData:",L),console.log("updateData.holidayHandling:",L.holidayHandling),i.recurrenceType==="weekly"?L.weekday=i.weekday:i.recurrenceType==="monthly"&&(i.monthlyPattern==="weekday"?(L.monthlyPattern="weekday",L.monthlyWeek=i.monthlyWeek,L.monthlyWeekday=i.monthlyWeekday):(L.monthlyPattern="date",L.monthlyDate=i.monthlyDate)),await t(L),e()}catch(L){console.error("템플릿 수정 실패:",L),alert("템플릿 수정에 실패했습니다.")}finally{g(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"반복 템플릿 수정"}),c.jsxs("form",{onSubmit:P,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"제목"}),c.jsx("input",{type:"text",value:i.title,onChange:S=>l({...i,title:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"설명"}),c.jsx("textarea",{value:i.description,onChange:S=>l({...i,description:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:2})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"우선순위"}),c.jsxs("select",{value:i.priority,onChange:S=>l({...i,priority:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[c.jsx("option",{value:"low",children:"낮음"}),c.jsx("option",{value:"medium",children:"보통"}),c.jsx("option",{value:"high",children:"높음"}),c.jsx("option",{value:"urgent",children:"긴급"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"반복 주기"}),c.jsxs("select",{value:i.recurrenceType,onChange:S=>l({...i,recurrenceType:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[c.jsx("option",{value:"weekly",children:"매주"}),c.jsx("option",{value:"monthly",children:"매월"})]})]}),i.recurrenceType==="weekly"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"요일"}),c.jsxs("select",{value:i.weekday,onChange:S=>l({...i,weekday:parseInt(S.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[c.jsx("option",{value:0,children:"일요일"}),c.jsx("option",{value:1,children:"월요일"}),c.jsx("option",{value:2,children:"화요일"}),c.jsx("option",{value:3,children:"수요일"}),c.jsx("option",{value:4,children:"목요일"}),c.jsx("option",{value:5,children:"금요일"}),c.jsx("option",{value:6,children:"토요일"})]})]}),i.recurrenceType==="monthly"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"월간 패턴"}),c.jsxs("select",{value:i.monthlyPattern,onChange:S=>l({...i,monthlyPattern:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[c.jsx("option",{value:"date",children:"특정 날짜 (예: 매월 15일)"}),c.jsx("option",{value:"weekday",children:"특정 주의 요일 (예: 매월 마지막 주 수요일)"})]})]}),i.monthlyPattern==="date"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"날짜"}),c.jsx("input",{type:"number",min:"1",max:"31",value:i.monthlyDate,onChange:S=>l({...i,monthlyDate:parseInt(S.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),i.monthlyPattern==="weekday"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"몇 번째 주"}),c.jsxs("select",{value:i.monthlyWeek,onChange:S=>l({...i,monthlyWeek:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[c.jsx("option",{value:"first",children:"첫 번째 주"}),c.jsx("option",{value:"second",children:"두 번째 주"}),c.jsx("option",{value:"third",children:"세 번째 주"}),c.jsx("option",{value:"fourth",children:"네 번째 주"}),c.jsx("option",{value:"last",children:"마지막 주"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"요일"}),c.jsxs("select",{value:i.monthlyWeekday,onChange:S=>l({...i,monthlyWeekday:parseInt(S.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[c.jsx("option",{value:0,children:"일요일"}),c.jsx("option",{value:1,children:"월요일"}),c.jsx("option",{value:2,children:"화요일"}),c.jsx("option",{value:3,children:"수요일"}),c.jsx("option",{value:4,children:"목요일"}),c.jsx("option",{value:5,children:"금요일"}),c.jsx("option",{value:6,children:"토요일"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"공휴일 처리"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",name:"holidayHandling",value:"before",checked:i.holidayHandling==="before",onChange:S=>l({...i,holidayHandling:S.target.value}),className:"mr-2 text-blue-600"}),c.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"공휴일 이전으로 이동"})]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",name:"holidayHandling",value:"after",checked:i.holidayHandling==="after",onChange:S=>l({...i,holidayHandling:S.target.value}),className:"mr-2 text-blue-600"}),c.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"공휴일 이후로 이동"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[c.jsx(hh,{className:"w-4 h-4 inline mr-1"}),"예외 설정 (반복에서 제외할 조건)"]}),c.jsxs("button",{type:"button",onClick:p,className:"flex items-center gap-1 px-2 py-1 text-sm bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-900/30",children:[c.jsx(Tn,{className:"w-3 h-3"}),"예외 추가"]})]}),i.exceptions.map((S,L)=>c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("select",{value:S.type,onChange:I=>b(L,"type",I.target.value),className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"date",children:"특정 날짜 제외"}),c.jsx("option",{value:"weekday",children:"특정 요일 제외"}),c.jsx("option",{value:"week",children:"특정 주차 제외"}),c.jsx("option",{value:"month",children:"특정 달 제외"}),c.jsx("option",{value:"conflict",children:"다른 템플릿과 중복"})]}),c.jsx("button",{type:"button",onClick:()=>y(L),className:"ml-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:c.jsx(Tt,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-2",children:[S.type==="date"&&Array.from({length:31},(I,V)=>V+1).map(I=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:S.values.includes(I),onChange:V=>{const Y=S.values,te=V.target.checked?[...Y,I]:Y.filter(A=>A!==I);w(L,te)},className:"text-blue-600 rounded focus:ring-blue-500"}),c.jsxs("span",{className:"text-xs",children:[I,"일"]})]},I)),S.type==="weekday"&&$.map(I=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:S.values.includes(I.value),onChange:V=>{const Y=S.values,te=V.target.checked?[...Y,I.value]:Y.filter(A=>A!==I.value);w(L,te)},className:"text-blue-600 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-xs",children:I.label})]},I.value)),S.type==="week"&&[1,2,3,4,-1].map(I=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:S.values.includes(I),onChange:V=>{const Y=S.values,te=V.target.checked?[...Y,I]:Y.filter(A=>A!==I);w(L,te)},className:"text-blue-600 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-xs",children:Ic(I)})]},I)),S.type==="month"&&Array.from({length:12},(I,V)=>V+1).map(I=>c.jsxs("label",{className:"flex items-center space-x-1",children:[c.jsx("input",{type:"checkbox",checked:S.values.includes(I),onChange:V=>{const Y=S.values,te=V.target.checked?[...Y,I]:Y.filter(A=>A!==I);w(L,te)},className:"text-blue-600 rounded focus:ring-blue-500"}),c.jsxs("span",{className:"text-xs",children:[I,"월"]})]},I)),S.type==="conflict"&&c.jsxs("div",{className:"col-span-full space-y-3",children:[(S.values||[]).map((I,V)=>c.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:["중복 예외 규칙 ",V+1]}),c.jsx("button",{type:"button",onClick:()=>O(L,V),className:"text-red-500 hover:text-red-700 p-1",children:c.jsx(Tt,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-blue-800 dark:text-blue-200 mb-1",children:"대상 템플릿"}),c.jsxs("select",{value:I.targetTemplateTitle,onChange:Y=>F(L,V,"targetTemplateTitle",Y.target.value),className:"w-full px-2 py-1 text-sm border border-blue-300 dark:border-blue-600 rounded focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"",children:"템플릿 선택"}),a.filter(Y=>Y.id!==r.id).map(Y=>c.jsx("option",{value:Y.title,children:Y.title},Y.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-blue-800 dark:text-blue-200 mb-1",children:"중복 조건"}),c.jsxs("select",{value:I.scope,onChange:Y=>F(L,V,"scope",Y.target.value),className:"w-full px-2 py-1 text-sm border border-blue-300 dark:border-blue-600 rounded focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"same_date",children:"같은 날짜 중복"}),c.jsx("option",{value:"same_week",children:"같은 주 중복"}),c.jsx("option",{value:"same_month",children:"같은 달 중복"})]})]})]}),c.jsxs("div",{className:"mt-2 p-2 bg-blue-100 dark:bg-blue-800/30 rounded text-xs text-blue-700 dark:text-blue-300",children:[c.jsx("strong",{children:"규칙:"}),' "',I.targetTemplateTitle||"선택된 템플릿",'"이(가) ',I.scope==="same_date"?"같은 날짜":I.scope==="same_week"?"같은 주":"같은 달","에 있으면 이 템플릿의 해당 일정을 제외합니다."]})]},V)),c.jsx("div",{className:"col-span-full",children:c.jsxs("button",{type:"button",onClick:()=>T(L),className:"w-full py-2 px-3 text-sm border-2 border-dashed border-blue-300 dark:border-blue-600 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/30 flex items-center justify-center gap-2",children:[c.jsx(Tn,{className:"w-4 h-4"}),"중복 규칙 추가"]})})]})]}),c.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[S.values.length>0&&S.type!=="conflict"&&c.jsxs("span",{children:["선택된 ",S.type==="date"?"날짜":S.type==="weekday"?"요일":S.type==="week"?"주차":"월",": ",S.values.join(", ")]}),S.type==="conflict"&&S.values.length>0&&c.jsxs("span",{children:["설정된 중복 예외: ",S.values.length,"개"]})]})]},L))]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500",disabled:h,children:"취소"}),c.jsx("button",{type:"submit",className:"flex-1 btn-primary",disabled:h,children:h?"저장 중...":"저장"})]})]})]})})},M3=({searchTerm:r="",priorityFilter:e="all",typeFilter:t="all",projectFilter:a="all",tagFilter:i=[]})=>{const{todos:l}=tn(),[h,g]=le.useState(new Set(["today"])),p=l.filter($=>$.completed&&$.completedAt&&(r===""||$.title.toLowerCase().includes(r.toLowerCase())||$.description&&$.description.toLowerCase().includes(r.toLowerCase()))&&(e==="all"||$.priority===e)&&(t==="all"||$.type===t)&&(a==="all"||a==="longterm"&&$.project==="longterm"||a==="shortterm"&&$.project==="shortterm")&&(i.length===0||$.tags&&i.every(P=>$.tags?.includes(P)))),y=()=>{const $=new Date,P=new Date($.getFullYear(),$.getMonth(),$.getDate()),S=new Date(P);S.setDate(S.getDate()-1);const L=new Date(P);L.setDate(P.getDate()-P.getDay());const I=new Date(L);I.setDate(L.getDate()-7);const V=new Date(L);V.setDate(L.getDate()-1);const Y=new Date(P.getFullYear(),P.getMonth(),1),te=new Date(P.getFullYear(),P.getMonth()-1,1),A=new Date(P.getFullYear(),P.getMonth(),0),k={today:[],yesterday:[],thisWeek:[],lastWeek:[],thisMonth:[],lastMonth:[],older:[]};return p.forEach(C=>{if(!C.completedAt)return;const z=new Date(C.completedAt),M=new Date(z.getFullYear(),z.getMonth(),z.getDate());M.getTime()===P.getTime()?k.today.push(C):M.getTime()===S.getTime()?k.yesterday.push(C):z>=L&&M<P?k.thisWeek.push(C):z>=I&&z<=V?k.lastWeek.push(C):z>=Y&&z<L?k.thisMonth.push(C):z>=te&&z<=A?k.lastMonth.push(C):k.older.push(C)}),Object.values(k).forEach(C=>{C.sort((z,M)=>!z.completedAt||!M.completedAt?0:new Date(M.completedAt).getTime()-new Date(z.completedAt).getTime())}),k},b=$=>{const P=new Set(h);P.has($)?P.delete($):P.add($),g(P)},w=$=>{const P={low:"text-gray-500 bg-gray-100 dark:bg-gray-800",medium:"text-blue-700 bg-blue-100 dark:bg-blue-900/30",high:"text-orange-700 bg-orange-100 dark:bg-orange-900/30",urgent:"text-red-700 bg-red-100 dark:bg-red-900/30"};return c.jsx("div",{className:"border-l-4 border-green-500 bg-green-50 dark:bg-green-900/10 p-4 rounded-r-lg",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Dd,{className:"w-4 h-4 text-green-600"}),c.jsx("h3",{className:"font-medium text-green-800 dark:text-green-300 line-through",children:$.title}),c.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${P[$.priority]}`,children:[$.priority==="low"&&"낮음",$.priority==="medium"&&"보통",$.priority==="high"&&"높음",$.priority==="urgent"&&"긴급"]})]}),$.description&&c.jsx("p",{className:"text-sm text-green-700 dark:text-green-400 mb-2 line-through opacity-75",children:$.description}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-green-600 dark:text-green-400",children:[$.completedAt&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(ha,{className:"w-3 h-3"}),_2($.completedAt)," 완료"]}),$.type==="project"&&c.jsxs("span",{className:"bg-green-200 dark:bg-green-800 px-2 py-1 rounded",children:[$.project==="longterm"?"롱텀":"숏텀"," 프로젝트"]}),$.tags&&$.tags.length>0&&c.jsx("div",{className:"flex gap-1",children:$.tags.map(S=>c.jsxs("span",{className:"bg-green-200 dark:bg-green-800 px-2 py-1 rounded",children:["#",S]},S))})]})]})})},$.id)},T=($,P,S,L)=>{if(P.length===0)return null;const I=h.has(S);return c.jsxs("div",{className:"mb-6",children:[c.jsxs("button",{onClick:()=>b(S),className:"w-full flex items-center justify-between p-3 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[L,c.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[$," (",P.length,"개)"]})]}),I?c.jsx(ok,{className:"w-4 h-4"}):c.jsx(Ao,{className:"w-4 h-4"})]}),I&&c.jsx("div",{className:"mt-3 space-y-3",children:P.map(w)})]},S)},O=y(),F=p.length;return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"완료 히스토리"}),c.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["총 ",F,"개의 할일을 완료했습니다"]})]})}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:O.today.length}),c.jsx("div",{className:"text-sm text-green-700 dark:text-green-300",children:"오늘"})]}),c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:O.thisWeek.length+O.yesterday.length}),c.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"이번 주"})]}),c.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:O.thisMonth.length}),c.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:"이번 달"})]}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:O.lastMonth.length+O.older.length}),c.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"이전"})]})]}),c.jsxs("div",{className:"space-y-4",children:[T("오늘 완료한 할일",O.today,"today",c.jsx(Dd,{className:"w-5 h-5 text-green-600"})),T("어제 완료한 할일",O.yesterday,"yesterday",c.jsx(Rt,{className:"w-5 h-5 text-blue-600"})),T("이번 주 완료한 할일",O.thisWeek,"thisWeek",c.jsx(Rt,{className:"w-5 h-5 text-purple-600"})),T("저번 주 완료한 할일",O.lastWeek,"lastWeek",c.jsx(Rt,{className:"w-5 h-5 text-orange-600"})),T("이번 달 완료한 할일",O.thisMonth,"thisMonth",c.jsx(Rt,{className:"w-5 h-5 text-indigo-600"})),T("저번 달 완료한 할일",O.lastMonth,"lastMonth",c.jsx(Rt,{className:"w-5 h-5 text-pink-600"})),T("더 이전에 완료한 할일",O.older,"older",c.jsx(ha,{className:"w-5 h-5 text-gray-600"}))]}),F===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Dd,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"아직 완료한 할일이 없습니다"}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"할일을 완료하면 여기에 히스토리가 표시됩니다."})]})]})},P3=({isOpen:r,onClose:e})=>{const{signIn:t,signUp:a,signInWithGoogle:i,signInAsGuest:l}=Wc(),[h,g]=le.useState(!1),[p,y]=le.useState(!1),[b,w]=le.useState(""),[T,O]=le.useState({email:"",password:"",displayName:"",confirmPassword:""}),F=async I=>{I.preventDefault(),w(""),y(!0);try{if(h){if(T.password!==T.confirmPassword)throw new Error("비밀번호가 일치하지 않습니다");await a(T.email,T.password,T.displayName)}else await t(T.email,T.password);e()}catch(V){w(S(V.code||V.message))}finally{y(!1)}},$=async()=>{w(""),y(!0);try{await i(),e()}catch(I){w(S(I.code||I.message))}finally{y(!1)}},P=async()=>{w(""),y(!0);try{await l(),e()}catch(I){w(S(I.code||I.message))}finally{y(!1)}},S=I=>{switch(I){case"auth/user-not-found":case"auth/wrong-password":return"이메일 또는 비밀번호가 올바르지 않습니다";case"auth/email-already-in-use":return"이미 사용 중인 이메일입니다";case"auth/weak-password":return"비밀번호는 6자리 이상이어야 합니다";case"auth/invalid-email":return"올바른 이메일 주소를 입력해주세요";case"auth/popup-closed-by-user":return"Google 로그인이 취소되었습니다";case"auth/popup-blocked":return"팝업이 차단되었습니다. 팝업 차단을 해제하고 다시 시도해주세요";case"auth/unauthorized-domain":return"승인되지 않은 도메인입니다. 관리자에게 문의하세요";case"auth/invalid-api-key":return"Firebase 설정이 올바르지 않습니다";case"auth/network-request-failed":return"네트워크 연결을 확인하고 다시 시도해주세요";case"auth/too-many-requests":return"너무 많은 시도가 있었습니다. 잠시 후 다시 시도해주세요";default:return console.error("Firebase Auth Error:",I),`오류가 발생했습니다: ${I}. 다시 시도해주세요`}},L=(I,V)=>{O(Y=>({...Y,[I]:V}))};return r?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:h?"회원가입":"로그인"}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:c.jsx(Tt,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6",children:[b&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm",children:b}),c.jsxs("form",{onSubmit:F,className:"space-y-4",children:[h&&c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(hm,{className:"w-4 h-4 inline mr-1"}),"이름"]}),c.jsx("input",{type:"text",value:T.displayName,onChange:I=>L("displayName",I.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"이름을 입력하세요"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(zk,{className:"w-4 h-4 inline mr-1"}),"이메일"]}),c.jsx("input",{type:"email",value:T.email,onChange:I=>L("email",I.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"이메일을 입력하세요",required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(fb,{className:"w-4 h-4 inline mr-1"}),"비밀번호"]}),c.jsx("input",{type:"password",value:T.password,onChange:I=>L("password",I.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"비밀번호를 입력하세요",required:!0})]}),h&&c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[c.jsx(fb,{className:"w-4 h-4 inline mr-1"}),"비밀번호 확인"]}),c.jsx("input",{type:"password",value:T.confirmPassword,onChange:I=>L("confirmPassword",I.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"비밀번호를 다시 입력하세요",required:!0})]}),c.jsx("button",{type:"submit",disabled:p,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:p?"처리 중...":h?"회원가입":"로그인"})]}),c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500",children:"또는"})})]}),c.jsxs("div",{className:"mt-6 space-y-3",children:[c.jsxs("button",{onClick:$,disabled:p,className:"w-full flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50",children:[c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google로 로그인"]}),c.jsxs("button",{onClick:P,disabled:p,className:"w-full flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50",children:[c.jsx(Ck,{className:"w-5 h-5"}),"게스트로 시작하기"]})]})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("button",{onClick:()=>g(!h),className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:h?"이미 계정이 있으신가요? 로그인":"계정이 없으신가요? 회원가입"})})]})]})}):null},V3=({currentView:r,isSidebarOpen:e,onToggleSidebar:t,searchInputRef:a,addTodoModalRef:i,isMobile:l=!1})=>{const[h,g]=le.useState(!1),[p,y]=le.useState(!1),[b,w]=le.useState(""),[T,O]=le.useState("all"),[F,$]=le.useState("all"),[P,S]=le.useState("all"),[L,I]=le.useState([]),[V,Y]=le.useState("all"),[te,A]=le.useState(null),[k,C]=le.useState(new Date),{getTomorrowTodos:z,getYesterdayIncompleteTodos:M,todos:B}=tn(),{currentUser:j,logout:_e,isAnonymous:Ee}=Wc(),W=Array.from(new Set(B.flatMap(se=>se.tags||[]))).sort(),J=()=>{C(se=>U4(se))},H=()=>{C(se=>Kn(se,1))},ue=()=>{C(new Date)},re=zp((()=>{switch(r){case"today":return{onSwipeLeft:H,onSwipeRight:J};case"week":return{};case"month":return{};default:return{}}})(),{minSwipeDistance:60});le.useEffect(()=>{i&&(i.current={open:()=>g(!0)})},[i]),le.useEffect(()=>{const se=()=>{g(!0)},ae=()=>{a.current?.focus()},ce=()=>{t()},xe=Ke=>{const Me=Ke.detail;A(Me)};return window.addEventListener("openAddTodoModal",se),window.addEventListener("focusSearch",ae),window.addEventListener("toggleSidebar",ce),window.addEventListener("switchView",xe),()=>{window.removeEventListener("openAddTodoModal",se),window.removeEventListener("focusSearch",ae),window.removeEventListener("toggleSidebar",ce),window.removeEventListener("switchView",xe)}},[a,t]);const R=te||r;le.useEffect(()=>{A(null)},[r]);const q=()=>{w(""),O("all"),$("all"),S("all"),I([]),Y("all")},K=se=>{switch(se){case"today":return"오늘 할일";case"week":return"이번 주 할일";case"month":return"이번 달 할일";case"recurring":return"반복 태스크 관리";case"history":return"완료 히스토리";case"analytics":return"통계 및 데이터";default:return"할일"}};return c.jsxs("div",{className:"flex-1 flex flex-col bg-gray-50 dark:bg-gray-900","data-testid":"main-content",children:[c.jsx("header",{className:`bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 ${l?"px-3 py-0":"px-6 py-2"} flex-shrink-0`,children:c.jsxs("div",{className:`flex items-center justify-between ${l?"h-[44px]":""}`,children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:t,className:`${l?"p-1 min-w-[32px] min-h-[32px]":"p-2"} hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg flex items-center justify-center`,"data-testid":"menu-button",children:c.jsx(Bk,{className:`${l?"w-4 h-4":"w-5 h-5"}`})}),c.jsx("h2",{className:`${l?"text-sm font-medium leading-none":"text-2xl font-bold"} text-gray-900 dark:text-white`,children:K(R)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[R!=="recurring"&&R!=="history"&&R!=="analytics"&&c.jsxs("button",{onClick:()=>g(!0),className:`${l?"p-1 min-w-[28px] min-h-[28px]":"btn-primary"} flex items-center gap-2`,children:[c.jsx(Tn,{className:`${l?"w-3 h-3":"w-4 h-4"}`}),!l&&"할일 추가"]}),j?c.jsxs("div",{className:"flex items-center gap-2",children:[!l&&c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[c.jsx(hm,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"}),c.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:Ee?"게스트":j.displayName||j.email}),Ee&&c.jsx("span",{className:"text-xs text-yellow-600 dark:text-yellow-400 ml-1",children:"(임시)"})]}),c.jsx("button",{onClick:_e,className:`${l?"p-1 min-w-[28px] min-h-[28px]":"p-2"} hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300 flex items-center justify-center`,title:"로그아웃",children:c.jsx(Lk,{className:`${l?"w-3 h-3":"w-4 h-4"}`})})]}):c.jsxs("button",{onClick:()=>y(!0),className:`btn-secondary flex items-center gap-2 ${l?"px-1 py-1 min-w-[28px] min-h-[28px]":""}`,children:[c.jsx(hm,{className:`${l?"w-3 h-3":"w-4 h-4"}`}),!l&&"로그인"]})]})]})}),c.jsx("main",{className:`flex-1 ${l?"p-4":"p-6"} overflow-y-auto`,...l&&(r==="today"||r==="week"||r==="month")?{onTouchStart:re.onTouchStart,onTouchMove:re.onTouchMove,onTouchEnd:re.onTouchEnd}:{},children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[R!=="recurring"&&R!=="history"&&R!=="analytics"&&c.jsx(e3,{searchTerm:b,onSearchChange:w,priorityFilter:T,onPriorityFilterChange:O,typeFilter:F,onTypeFilterChange:$,projectFilter:P,onProjectFilterChange:S,tagFilter:L,onTagFilterChange:I,completionDateFilter:V,onCompletionDateFilterChange:Y,onClearFilters:q,searchInputRef:a,availableTags:W}),R==="recurring"?c.jsx(C3,{}):R==="history"?c.jsx(M3,{searchTerm:b,priorityFilter:T,typeFilter:F,projectFilter:P,tagFilter:L}):R==="today"?c.jsxs("div",{className:`${l?"space-y-6":"grid grid-cols-1 lg:grid-cols-12 gap-6"}`,children:[l&&c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg px-3 py-1.5 border border-gray-200 dark:border-gray-700 mb-2",children:c.jsxs("div",{className:"flex justify-center items-center gap-4",children:[c.jsx(n_,{layout:"compact"}),c.jsx("div",{className:"w-px h-4 bg-gray-300 dark:bg-gray-600"}),c.jsx(r_,{layout:"compact"})]})}),c.jsx("div",{className:`${l?"":"lg:col-span-2"}`,children:c.jsxs("div",{className:`${l?"":"sticky top-0"}`,children:[c.jsxs("div",{className:"mb-3",children:[c.jsx("h3",{className:"text-base font-semibold text-orange-600 dark:text-orange-400",children:"어제 못한 일"}),M(k).length===0&&c.jsx("div",{className:"text-center mt-2",children:c.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"없음"})})]}),c.jsx("div",{className:"space-y-2",children:M(k).slice(0,8).map(se=>c.jsxs("div",{className:"p-2 bg-orange-50 dark:bg-orange-900/20 rounded border border-orange-200 dark:border-orange-800",children:[c.jsx("div",{className:"text-sm text-orange-700 dark:text-orange-300 truncate",children:se.title}),se.type==="project"&&c.jsx("div",{className:"text-xs text-orange-500 dark:text-orange-400 mt-1",children:se.project==="longterm"?"롱텀":"숏텀"}),se.dueTime&&c.jsx("div",{className:"text-xs text-orange-500 dark:text-orange-400",children:se.dueTime})]},se.id))})]})}),c.jsxs("div",{className:`${l?"":"lg:col-span-6"}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Vo(k)?"오늘 할일":`${wt(k,"M월 d일 (E)",{locale:Rr})} 할일`}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:J,className:"p-1.5 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"이전 날",children:c.jsx(dh,{className:"w-4 h-4"})}),c.jsx("button",{onClick:ue,className:`px-2 py-1 text-xs rounded transition-colors ${Vo(k)?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"오늘로 이동",children:c.jsx(Rt,{className:"w-3 h-3"})}),c.jsx("button",{onClick:H,className:"p-1.5 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"다음 날",children:c.jsx(Ao,{className:"w-4 h-4"})})]})]}),c.jsx(u_,{currentView:R,searchTerm:b,priorityFilter:T,typeFilter:F,projectFilter:P,tagFilter:L,completionDateFilter:V,selectedDate:k})]}),c.jsx("div",{className:`${l?"":"lg:col-span-4"}`,children:c.jsxs("div",{className:`${l?"":"sticky top-0"}`,children:[c.jsxs("div",{className:"mb-3",children:[c.jsx("h3",{className:"text-base font-semibold text-blue-600 dark:text-blue-400",children:"내일 할일"}),z(k).length===0&&c.jsx("div",{className:"text-center mt-2",children:c.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"없음"})})]}),c.jsx("div",{className:"space-y-2",children:z(k).slice(0,8).map(se=>c.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[c.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300 truncate",children:se.title}),se.type==="project"&&c.jsx("div",{className:"text-xs text-blue-500 dark:text-blue-400 mt-1",children:se.project==="longterm"?"롱텀":"숏텀"}),se.dueTime&&c.jsx("div",{className:"text-xs text-blue-500 dark:text-blue-400",children:se.dueTime})]},se.id))})]})})]}):R==="week"?c.jsx(R3,{searchTerm:b,priorityFilter:T,typeFilter:F,projectFilter:P,tagFilter:L,completionDateFilter:V,onAddTodo:()=>g(!0),isMobile:l}):R==="month"?c.jsx(j3,{searchTerm:b,priorityFilter:T,typeFilter:F,projectFilter:P,tagFilter:L,completionDateFilter:V,onAddTodo:()=>g(!0),isMobile:l}):R==="analytics"?c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"할일 통계"}),c.jsx(n_,{layout:"full"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"프로젝트 분석"}),c.jsx(r_,{layout:"full"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"데이터 관리"}),c.jsx(TC,{})]})]}):c.jsx("div",{className:"max-w-4xl mx-auto",children:c.jsx(u_,{currentView:R,searchTerm:b,priorityFilter:T,typeFilter:F,projectFilter:P,tagFilter:L,completionDateFilter:V})})]})}),c.jsx(Z4,{isOpen:h,onClose:()=>g(!1)}),c.jsx(P3,{isOpen:p,onClose:()=>y(!1)})]})};class L3 extends BE.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){console.error("Error caught by ErrorBoundary:",e,t),this.setState({hasError:!0,error:e,errorInfo:t})}render(){return this.state.hasError?c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:c.jsx("div",{className:"max-w-2xl mx-auto text-center",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[c.jsx("div",{className:"text-red-600 dark:text-red-400 text-6xl mb-4",children:"⚠️"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"앱에서 오류가 발생했습니다"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"예상치 못한 오류가 발생했습니다. 페이지를 새로고침하거나 브라우저를 다시 시작해보세요."}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"페이지 새로고침"}),c.jsxs("details",{className:"text-left",children:[c.jsx("summary",{className:"cursor-pointer text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"개발자 정보 보기"}),c.jsxs("div",{className:"mt-2 p-3 bg-gray-100 dark:bg-gray-700 rounded text-xs font-mono text-red-600 dark:text-red-400 overflow-auto",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"오류:"})," ",this.state.error?.message]}),c.jsx("p",{children:c.jsx("strong",{children:"스택 추적:"})}),c.jsx("pre",{className:"whitespace-pre-wrap",children:this.state.error?.stack}),this.state.errorInfo&&c.jsxs("div",{children:[c.jsx("p",{children:c.jsx("strong",{children:"컴포넌트 스택:"})}),c.jsx("pre",{className:"whitespace-pre-wrap",children:this.state.errorInfo.componentStack})]})]})]})]})]})})}):this.props.children}}const U3=()=>{const[r,e]=le.useState(navigator.onLine),[t,a]=le.useState(!1);return le.useEffect(()=>{const i=()=>{e(!0),t&&a(!1)},l=()=>{e(!1),a(!0)};return window.addEventListener("online",i),window.addEventListener("offline",l),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",l)}},[t]),{isOnline:r,wasOffline:t}},z3=()=>{const{isOnline:r,wasOffline:e}=U3(),{currentUser:t}=Wc(),{syncWithFirestore:a}=tn(),[i,l]=le.useState(!1),[h,g]=le.useState("offline");le.useEffect(()=>{r?e&&t?(g("sync"),l(!0),p()):e&&(g("online"),l(!0),setTimeout(()=>l(!1),3e3)):(g("offline"),l(!0))},[r,e,t]);const p=async()=>{if(t)try{await a(),g("online"),setTimeout(()=>l(!1),3e3)}catch(T){console.error("자동 동기화 실패:",T),setTimeout(()=>l(!1),5e3)}},y=()=>{l(!1)};if(!i)return null;const w=(()=>{switch(h){case"offline":return{icon:c.jsx(y2,{className:"w-5 h-5 text-red-500"}),title:"오프라인 모드",message:"인터넷 연결이 끊어졌습니다. 로컬에서 작업이 계속됩니다.",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",textColor:"text-red-700 dark:text-red-400",persistent:!0};case"sync":return{icon:c.jsx(yb,{className:"w-5 h-5 text-blue-500 animate-pulse"}),title:"동기화 중...",message:"온라인 상태로 복구되었습니다. 데이터를 동기화하고 있습니다.",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",textColor:"text-blue-700 dark:text-blue-400",persistent:!1};case"online":return{icon:c.jsx(yb,{className:"w-5 h-5 text-green-500"}),title:"온라인 복구",message:"인터넷 연결이 복구되었습니다. 모든 기능을 사용할 수 있습니다.",bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",textColor:"text-green-700 dark:text-green-400",persistent:!1};default:return null}})();return w?c.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:c.jsxs("div",{className:`${w.bgColor} ${w.borderColor} ${w.textColor} border rounded-lg shadow-lg p-4 transition-all duration-300 transform translate-x-0`,children:[c.jsxs("div",{className:"flex items-start gap-3",children:[w.icon,c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-medium text-sm",children:w.title}),c.jsx("p",{className:"text-xs mt-1 opacity-90",children:w.message})]}),!w.persistent&&c.jsx("button",{onClick:y,className:"p-1 hover:bg-black/5 dark:hover:bg-white/5 rounded",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h==="offline"&&c.jsx("div",{className:"mt-3 pt-3 border-t border-red-200 dark:border-red-800",children:c.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[c.jsx(w_,{className:"w-3 h-3"}),c.jsx("span",{children:"로컬 변경사항은 온라인 복구 시 자동 동기화됩니다."})]})})]})}):null},f1=le.createContext(void 0),H3=({children:r,onOpenAddTodo:e,onFocusSearch:t,onToggleSidebar:a,onSwitchToTodayView:i,onSwitchToWeekView:l,onSwitchToMonthView:h})=>{const g={openAddTodoModal:e,focusSearch:t,toggleSidebar:a,switchToTodayView:i,switchToWeekView:l,switchToMonthView:h};return c.jsx(f1.Provider,{value:g,children:r})},B3=()=>{const r=le.useContext(f1);if(r===void 0)throw new Error("useKeyboard must be used within a KeyboardProvider");return r},q3=()=>{const{openAddTodoModal:r,focusSearch:e,toggleSidebar:t,switchToTodayView:a,switchToWeekView:i,switchToMonthView:l}=B3();le.useEffect(()=>{const h=p=>{if(p.ctrlKey||p.metaKey)switch(p.key.toLowerCase()){case"1":p.preventDefault(),a();break;case"2":p.preventDefault(),i();break;case"3":p.preventDefault(),l();break;case"b":p.preventDefault(),t();break;case"n":p.preventDefault(),r();break;case"f":p.preventDefault(),e();break;case"k":p.preventDefault(),g();break}if(p.key==="Escape"){const y=document.querySelectorAll('[role="dialog"]');if(y.length>0){p.preventDefault();const b=y[y.length-1].querySelector('[aria-label="닫기"], [data-close]');b&&b.click()}}},g=()=>{alert(`🎯 키보드 단축키:

`+["Ctrl+1: 오늘 뷰","Ctrl+2: 주간 뷰","Ctrl+3: 월간 뷰","Ctrl+N: 새 할일 추가","Ctrl+F: 검색","Ctrl+B: 사이드바 토글","Ctrl+K: 단축키 도움말","ESC: 모달 닫기"].join(`
`))};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[r,e,t,a,i,l])};function F3({currentView:r,setCurrentView:e,isSidebarOpen:t,setIsSidebarOpen:a,searchInputRef:i,addTodoModalRef:l,isMobile:h,forceMobile:g,setForceMobile:p}){return q3(),c.jsxs("div",{className:`h-screen flex bg-gray-50 dark:bg-gray-900 ${h?"relative":""}`,children:[h&&t&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-40",onClick:()=>a(!1)}),c.jsx(EC,{currentView:r,onViewChange:e,isOpen:t,onToggle:()=>a(!t),isMobile:h,forceMobile:g,onToggleForceMobile:p}),c.jsx(V3,{currentView:r,isSidebarOpen:t,onToggleSidebar:()=>a(!t),searchInputRef:i,addTodoModalRef:l,isMobile:h}),c.jsx(z3,{})]})}function $3(){const[r,e]=le.useState("today"),[t,a]=le.useState(!0),[i,l]=le.useState(!1),[h,g]=le.useState(null),p=le.useRef(null),y=le.useRef(null);le.useEffect(()=>{const P=()=>{const V=window.innerWidth,Y=window.innerHeight;if(console.log(`🔍 모바일 감지 시작: ${V}x${Y}`),h!==null){console.log(`🎯 강제 모드: ${h?"모바일":"데스크톱"}`),l(h),a(!h);return}const te=V<=768,A="ontouchstart"in window||navigator.maxTouchPoints>0,k=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),C=V>768&&V<=1024&&A,z=window.matchMedia("(max-width: 768px)").matches,M=window.matchMedia("(pointer: coarse)").matches,B=V<=500&&A&&k||A&&k&&window.devicePixelRatio>=2||navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("Android")||z&&A||M&&k;let j=!1,_e="";B?(j=!0,_e="Playwright/고급 모바일 감지"):z?(j=!0,_e="CSS 미디어 쿼리 (≤768px)"):te?(j=!0,_e=`너비 기준 (${V}px ≤ 768px)`):C?(j=!0,_e=`태블릿 터치 기기 (${V}px)`):(j=!1,_e=`데스크톱 (${V}px > 768px)`),console.log(`📱 감지 결과: ${j?"모바일":"데스크톱"} - ${_e}`),console.log(`   터치: ${A}, UserAgent: ${k}`),console.log(`   미디어쿼리: ${z}, 터치포인터: ${M}, DPR: ${window.devicePixelRatio}`),l(j),j?(a(!1),console.log("📱 모바일 모드: 사이드바 닫음")):(a(!0),console.log("💻 데스크톱 모드: 사이드바 열림"))};P();let S;const L=()=>{clearTimeout(S),S=setTimeout(P,100)};window.addEventListener("resize",L),window.addEventListener("orientationchange",()=>{setTimeout(P,200)});const I=setTimeout(P,300);return()=>{window.removeEventListener("resize",L),window.removeEventListener("orientationchange",P),clearTimeout(S),clearTimeout(I)}},[h]);const b=()=>{y.current?.open()},w=()=>{p.current?.focus()},T=()=>{a(!t)},O=()=>{e("today")},F=()=>{e("week")},$=()=>{e("month")};return c.jsx("div",{children:c.jsx(H3,{onOpenAddTodo:b,onFocusSearch:w,onToggleSidebar:T,onSwitchToTodayView:O,onSwitchToWeekView:F,onSwitchToMonthView:$,children:c.jsx(F3,{currentView:r,setCurrentView:e,isSidebarOpen:t,setIsSidebarOpen:a,searchInputRef:p,addTodoModalRef:y,isMobile:i,forceMobile:h,setForceMobile:g})})})}function G3(){return c.jsx(L3,{children:c.jsx(_C,{children:c.jsx(pC,{children:c.jsx(bC,{children:c.jsx($3,{})})})})})}QE.createRoot(document.getElementById("root")).render(c.jsx(le.StrictMode,{children:c.jsx(G3,{})}));
